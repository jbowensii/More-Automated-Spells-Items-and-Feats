{
  "name": "Maneuvers: Lunging Attack",
  "type": "feat",
  "img": "systems/dnd5e/icons/skills/yellow_37.jpg",
  "data": {
    "description": {
      "value": "<h2><strong>USEAGE :</strong> <span style=\"color:#169179\">ACTIVATE BEFORE ATTACK<br /></span></h2>\n<p>This Maneuver must be activated BEFORE the character makes an attack.  This will setup any bonuses and effects on the TARGET character.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n<p> </p>\n<h2><strong>MANEUVER DESCRIPTION: </strong></h2>\n<p>When you make a melee weapon attack on your turn, you can expend one superiority die to increase your reach for that attack by 5 feet. If you hit, you add the superiority die to the attack’s damage roll.</p>",
      "chat": "<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>",
      "unidentified": ""
    },
    "source": "PHB [v0.8]",
    "activation": {
      "type": "special",
      "cost": null,
      "condition": ""
    },
    "duration": {
      "value": null,
      "units": ""
    },
    "target": {
      "value": null,
      "width": null,
      "units": "",
      "type": "self"
    },
    "range": {
      "value": null,
      "long": null,
      "units": ""
    },
    "uses": {
      "value": null,
      "max": "",
      "per": ""
    },
    "consume": {
      "type": "attribute",
      "target": "resources.primary.value",
      "amount": 1
    },
    "ability": "",
    "actionType": "other",
    "attackBonus": 0,
    "chatFlavor": "",
    "critical": {
      "threshold": null,
      "damage": ""
    },
    "damage": {
      "parts": [],
      "versatile": ""
    },
    "formula": "",
    "save": {
      "ability": "",
      "dc": null,
      "scaling": "spell"
    },
    "requirements": "Fighter: Battlemaster",
    "recharge": {
      "value": null,
      "charged": false
    },
    "attunement": 0
  },
  "effects": [
    {
      "_id": "51gy6rzi5b0s0bws",
      "changes": [
        {
          "key": "data.bonuses.mwak.damage",
          "mode": 2,
          "value": "@flags.dae.SuperiorityDie",
          "priority": "1"
        },
        {
          "key": "flags.midi-qol.onUseMacroName",
          "mode": 0,
          "value": "ItemMacro.Maneuvers: Lunging Attack,preItemRoll",
          "priority": "10"
        }
      ],
      "disabled": false,
      "duration": {
        "rounds": 1,
        "startTime": null
      },
      "icon": "systems/dnd5e/icons/skills/yellow_37.jpg",
      "label": "Maneuvers: Lunging Attack",
      "origin": "Actor.67GUmdTadYmGXD8W.Item.hkchEm8jxUTaR2Ng",
      "transfer": false,
      "flags": {
        "core": {
          "statusId": ""
        },
        "dae": {
          "stackable": "none",
          "durationExpression": "",
          "macroRepeat": "none",
          "specialDuration": [
            "1Attack:mwak"
          ],
          "transfer": false
        },
        "ActiveAuras": {
          "isAura": false,
          "aura": "None",
          "radius": null,
          "alignment": "",
          "type": "",
          "ignoreSelf": false,
          "height": false,
          "hidden": false,
          "displayTemp": false,
          "hostile": false,
          "onlyOnce": false
        }
      },
      "tint": null,
      "selectedKey": [
        "data.bonuses.mwak.damage",
        "flags.midi-qol.onUseMacroName"
      ]
    }
  ],
  "flags": {
    "ddbimporter": {
      "id": "2439086",
      "entityTypeId": "222216831",
      "componentId": 1306902,
      "componentTypeId": 258900837,
      "class": "Fighter",
      "subclass": "Battle Master",
      "importId": "28pyz8r4w0vt0973"
    },
    "infusions": {
      "infused": false
    },
    "obsidian": {
      "source": {
        "type": "class",
        "text": "Fighter"
      }
    },
    "scene-packer": {
      "hash": "64c2be1a13c1acfe86614b4fa2a6c1ba4d704dbb",
      "sourceId": "Item.t1mig3Zl3JIP2KYN"
    },
    "spellTemplateManager": {
      "stmData": {
        "ignoreDuration": false,
        "spellTexture": "",
        "useTexture": false,
        "alpha": 50,
        "coneOrigin": 1,
        "loopAnimations": true
      }
    },
    "midi-qol": {
      "effectActivation": false,
      "onUseMacroName": ""
    },
    "midiProperties": {
      "nodam": false,
      "fulldam": false,
      "halfdam": false,
      "rollOther": false,
      "critOther": false,
      "magicdam": false,
      "magiceffect": false,
      "concentration": false,
      "toggleEffect": false
    },
    "magicitems": {
      "enabled": false,
      "equipped": false,
      "attuned": false,
      "charges": "0",
      "chargeType": "c1",
      "destroy": false,
      "destroyFlavorText": "reaches 0 charges: it crumbles into ashes and is destroyed.",
      "rechargeable": false,
      "recharge": "0",
      "rechargeType": "t1",
      "rechargeUnit": "r1",
      "sorting": "l"
    },
    "favtab": {
      "isFavorite": true
    },
    "itemacro": {
      "macro": {
        "data": {
          "_id": null,
          "name": "Maneuvers: Lunging Attack",
          "type": "script",
          "author": "ldRsJ6Yp5qPydWA1",
          "img": "icons/svg/dice-target.svg",
          "scope": "global",
          "command": "/*****\nFighter Battlemaster Maneuvers: Lunging Attack\n\n*** AWAITING SOLUTION FROM MIDI TO GET THIS TO WORK WITH RANGE CHECKING ***\n\nUSEAGE : ACTIVATE BEFORE ATTACK\nThis Maneuver must be activated BEFORE the character makes an attack.  \nThis will setup any bonuses and effects on the TARGET character.  \nA Superiority Die will be expended immediately.\n \nMANEUVER DESCRIPTION:\nWhen you make a melee weapon attack on your turn, you can expend one \nsuperiority die to increase your reach for that attack by 5 feet. \nIf you hit, you add the superiority die to the attack’s damage roll.\n*****/\n\n// Activate on preActiveEffects\nif (args[0].macroPass === \"preItemRoll\") {\n    \n    // Item itself defining the workflow \n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    \n    // make sure the attempted hit was made with a melee weapon attack\n    if ((theItem != null) && (theItem.name != \"Maneuvers: Lunging Attack\")) {\n        if (![\"mwak\"].includes(args[0].item.data.actionType)) {\n            ui.notifications.error(\"Lunging Attack only works with a melee weapon attack\");  \n            await incrementResource (pcActor, \"Superiority Dice\", 1);\n            return;       \n        }\n        else {\n            let range = theItem.data.data.range.value;\n            theItem.data.data.range.value = (range + 5);\n        }\n    }\n}\nreturn;\n\n//---------------------------------- MY FUNCTIONS -------------------------------------------\n\n// Increment available resource\nasync function incrementResource (testActor, resourceName, numValue) {\n    let actorDup = duplicate(testActor.data._source);\n    let resources = Object.values(actorDup.data.resources);\n    let foundResource = resources.find(i => i.label.toLowerCase() === resourceName.toLowerCase());\n    if (foundrResource) {\n        foundResource.value = foundResource.value + numValue;\n        await testActor.update(actorDup); \n    } else ui.notifications.error(\"You have not setup a Superiority Dice resource.\");\n    return;\n}",
          "folder": null,
          "sort": 0,
          "permission": {
            "default": 0
          },
          "flags": {}
        }
      }
    },
    "core": {
      "sourceId": "Item.QCt9G1ryLky9enrK"
    },
    "exportSource": {
      "world": "test",
      "system": "dnd5e",
      "coreVersion": "9.255",
      "systemVersion": "1.5.7"
    }
  }
}