{"name":"Channel Divinity: Peerless Athlete","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"MOoT p.29","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Paladin Oath of Glory","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"Xkk83MdPGWwWb2yX","changes":[{"key":"flags.midi-qol.advantage.skill.acr","mode":5,"value":"1","priority":"20"},{"key":"flags.midi-qol.advantage.skill.ath","mode":5,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null,"seconds":600},"icon":"systems/dnd5e/icons/skills/blue_23.jpg","label":"Peerless Athlete","origin":"Item.xJ3uiHOSl6ZDElTz","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.advantage.skill.acr","flags.midi-qol.advantage.skill.ath"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":216,"data":{"id":216,"name":"Remarkable Athlete","prerequisite":null,"description":"<p class=\"compendium-hr\">Starting at 7th level, you can add half your proficiency bonus (round up) to any Strength, Dexterity, or Constitution check you make that doesn’t already use your proficiency bonus.</p>\r\n<p class=\"Core-Styles_Core-Body\">In addition, when you make a running long jump, the distance you can cover increases by a number of feet equal to your Strength modifier.</p>","requiredLevel":7,"displayOrder":2},"version":"2.9.8","featureId":216,"requiredLevel":7,"prerequisite":null,"class":"Champion","classId":16,"subClass":"Champion"},"obsidian":{"source":{"type":"class","text":"Champion"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.world.ddb-class-features.7rTzj1cBRBDKOb7R"},"scene-packer":{"hash":"6056f78dc93552dbfd1531865ea9bd1e469baf43","sourceId":"Item.NCcm6daO1Jkn5vXH"},"cf":null},"_id":"1jhTzXabg02GDbRk"}
{"name":"Stunning Strike","type":"feat","img":"icons/skills/melee/unarmed-punch-fist.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"When you hit with a melee weapon attack, you can spend 1 ki point to make the target @Compendium[dnd5e.rules.Stunned]{stunned} until the end of your next turn if it fails a CON saving throw (DC +14).","unidentified":""},"source":"PHB p78","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"touch","type":"creature"},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"con","dc":null,"scaling":"wis"},"requirements":"Monk","recharge":{"value":null,"charged":false}},"effects":[{"_id":"36l6rpnrn6pnifja","changes":[{"key":"flags.midi-qol.fail.ability.save.dex","mode":0,"value":"1","priority":"20"},{"key":"flags.midi-qol.fail.ability.save.str","mode":0,"value":"1","priority":"20"},{"key":"flags.midi-qol.grants.advantage.attack.all","mode":0,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/dfreds-convenient-effects/images/stunned.svg","label":"Stunned","origin":"Actor.0VGsg2mP5ntj0F1K.Item.SOmjuGeXM3tOoCcQ","transfer":false,"flags":{"core":{"statusId":"Convenient Effect: Stunned"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnEndSource"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.fail.ability.save.dex","flags.midi-qol.fail.ability.save.str","flags.midi-qol.grants.advantage.attack.all"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53367","entityTypeId":"222216831","componentId":235,"componentTypeId":12168134,"class":"Monk","subclass":"Way of the Open Hand","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"sf7t9giix783op3r"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Monk"}},"scene-packer":{"hash":"cbe4d45040f87a601c2210d7d5a120ed8c00f1e4","sourceId":"Item.7UVhuwVTNWH7AgSm"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"_id":"630llGKJ3NXC6p96"}
{"name":"Gift of the Eyes of Night","type":"feat","img":"icons/magic/perception/silhouette-stealth-shadow.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"As an action, you can share your 300 ft. @Compendium[dnd5e.rules.Darkvision]{darkvision} with up to +4 willing creatures you can see within 10 ft. of you, lasting for 1 hour. Once you share it, you can’t do so again until you finish a long rest, unless you expend a spell slot of any level to share it again.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p><em>1st-level Twilight Domain feature</em></p>\n<p>You can see through the deepest gloom. You have @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} out to a range of 300 feet. In that radius, you can see in dim light as if it were bright light and in darkness as if it were dim light.</p>\n<p>As an action, you can magically share the @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} of this feature with willing creatures you can see within 10 feet of you, up to a number of creatures equal to your Wisdom modifier (minimum of one creature). The shared @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} lasts for 1 hour. Once you share it, you can’t do so again until you finish a long rest, unless you expend a spell slot of any level to share it again.</p>\n  <p></p>\n</details>","unidentified":""},"source":"TCoE p34","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":4,"width":null,"units":"","type":"creature"},"range":{"value":10,"long":10,"units":"ft"},"uses":{"value":1,"max":"1","per":"lr"},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric Twilight Domain","recharge":{"value":null,"charged":false}},"effects":[{"_id":"eh177mjwrheqqh5w","changes":[{"key":"ATL.dimSight","mode":2,"value":"300","priority":"40"}],"disabled":false,"duration":{"startTime":null,"seconds":3600},"icon":"systems/dnd5e/icons/skills/shadow_17.jpg","label":"Eyes of Night","origin":"Actor.4okcHmPmM1iBwyFs.Item.lpKBbM6Rsla8ZL64","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"ATL.dimSight"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2409717","entityTypeId":"222216831","componentId":2996540,"componentTypeId":12168134,"class":"Cleric","subclass":"Twilight Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"iyl0evwnfwrvm9lh"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"783a0f8b00bb86a78cf3a546c80e388e141e5234","sourceId":"Item.FuzyG18iZvJMi4Uj"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Eyes of Night","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.yLmIyy87Eh8dzywq"},"cf":null},"_id":"7oHvMTbRyGwLfamW"}
{"name":"Fey Presence","type":"feat","img":"icons/magic/perception/eye-ringed-glow-angry-large-teal.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"Once per short rest, as an action, you can cause each creature in a 10-ft. cube from you to make a WIS saving throw (DC +14) or become @Compendium[dnd5e.rules.Charmed]{charmed} or @Compendium[dnd5e.rules.Frightened]{frightened} by you (your choice) until the end of your next turn.","unidentified":""},"source":"PHB p109","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":10,"width":null,"units":"ft","type":"creature"},"range":{"value":null,"long":null,"units":"spec"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"spell"},"requirements":"Warlock: Fey Patron","recharge":{"value":null,"charged":false},"quantity":1,"weight":null,"price":null},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"1035","entityTypeId":"222216831","componentId":396,"componentTypeId":12168134,"class":"Warlock","subclass":"The Archfey","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"py0qw85udlapktp3"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Warlock"}},"link-item-resource-5e":{"resource-link":"primary"},"scene-packer":{"hash":"636e5c414823ace11434304872e447e61db7cda7","sourceId":"Item.GKuI0kasaWJjhUF3"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[all]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Fey Presence","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nFey Presence\n\nUSAGE: Usae ability when you character has an action\n\n- this ability targets evertything in a ten foot cube \n\nv1.0 May 7 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"preambleComplete\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    // prompt user for the fightened or charmed effect, store on the workflow as feyPresenceEffect \n    let dialog = new Promise((resolve) => {\n        new Dialog({\n            // localize this text\n            title: \"Fey Presence:\",\n            content: \"<p>Select the desired effect fightened or charmed?</p>\",\n            buttons: {\n                one: {\n                    icon: '<p> </p><img src = \"modules/dfreds-convenient-effects/images/frightened.svg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>Frightened</p>\",\n                    callback: () => resolve(\"Frightened\")\n                },\n                two: {\n                    icon: '<p> </p><img src = \"modules/dfreds-convenient-effects/images/charmed.svg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>Charmed</p>\",\n                    callback: () => { resolve(\"Charmed\") }\n                }\n            },\n            default: \"one\"\n        }).render(true);\n    });\n    let selectedEffect = await dialog;\n    await setProperty(workflow, \"feyPresenceEffect\", selectedEffect);\n\n} else if (args[0].macroPass === \"postActiveEffects\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    //for every target the failed the saving throw apply the selected feyPresenceEffect\n    let effect = getProperty(workflow, \"feyPresenceEffect\");\n    if (effect)\n        for (target of args[0].failedSaves) {\n            let targetActor = target.actor;\n            if (effect === \"Frightened\") await applyFrightenedEffect(targetActor, args);\n            else if (effect === \"Charmed\") await applyCharmedEffect(targetActor, args);\n            else ui.notifications.error(\"An error occured applying the effect.\");\n        }\n} return;\n\n// Apply the fightened effect to the target\nasync function applyFrightenedEffect(target, args) {\n    let effectData = {\n        label: \"Frightened\",\n        icon: \"modules/dfreds-convenient-effects/images/frightened.svg\",\n        origin: args.uuid,\n        changes: [\n            { \"key\": \"flags.midi-qol.disadvantage.attack.all\", \"value\": `1`, \"mode\": 0, \"priority\": 20 },\n            { \"key\": \"flags.midi-qol.disadvantage.ability.check.all\", \"value\": `1`, \"mode\": 0, \"priority\": 20 }\n        ],\n        disabled: false,\n        flags: {\n            dae: { specialDuration: [\"turnEndSource\"] },\n            core: { statusId: \"Convenient Effect: Frightened\" }\n        }\n    }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: target.uuid, effects: [effectData] });\n}\n\n// Apply the charmed effect to the target\nasync function applyCharmedEffect(target, args) {\n    let effectData = {\n        label: \"Charmed\",\n        icon: \"modules/dfreds-convenient-effects/images/charmed.svg\",\n        origin: args.uuid,\n        disabled: false,\n        flags: {\n            dae: { specialDuration: [\"turnEndSource\"] },\n            core: { statusId: \"Convenient Effect: Charmed\" }\n        }\n    }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: target.uuid, effects: [effectData] });\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}}},"_id":"CtEKgQdkv3yHRRnh"}
{"name":"Channel Divinity: Turn Undead","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.1 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB p194","activation":{"type":"action","cost":1,"condition":"undead"},"duration":{"value":null,"units":"inst"},"target":{"value":30,"width":null,"units":"ft","type":"creature"},"range":{"value":null,"long":null,"units":"spec"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"spell"},"requirements":"Cleric","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"3adv1867dmy3nrmn","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.\"Channel Divinity: Turn Undead\",all","priority":"1"}],"disabled":false,"duration":{"startTime":null,"seconds":60},"icon":"systems/dnd5e/icons/skills/yellow_19.jpg","label":"Channel Divinity: Turn Undead","origin":"Actor.4okcHmPmM1iBwyFs.Item.0Gd8ADfg2sOZyTyq","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"8ec16287ad8b3d591755dba65d63fc22e3b870f3","sourceId":"Item.50atoQ09pJX4WAxn"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false,"forceCEOff":false,"onUseMacroName":"[all]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.r5SIR5IwtjxLYHvO"},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Turn Undead","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nCleric: Turn Undead\n\nUSEAGE : ACTIVATE TO CHANNEL DIVINITY : TURN UNDEAD\nClick on this item to activate the turn undead.  \nPlease remember to setup usage consumption in the itme itself.  \n\nThis Macro requires a GAME LEVEL MACRO: MAKE DEAD \n\nv1.1 May 7 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"preambleComplete\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    // I am stealing the activation condition as a string for the creature type I want to hit\n    const activationCondition = args[0].itemData.data.activation.condition.toLowerCase();\n    for (let target of workflow.targets) {\n        let creatureType = target.actor.data.data.details.type;\n        if ((creatureType === null) || (creatureType === undefined))    // that is not a creature\n            workflow.targets.delete(target);\n        else if (!([creatureType.value.toLowerCase(), creatureType.subtype.toLowerCase()].includes(activationCondition.toLowerCase()))) {\n            workflow.targets.delete(target);\n        }\n        game.user.updateTokenTargets(Array.from(workflow.targets).map(t => t.id));\n    }\n} else if (args[0].macroPass === \"postActiveEffects\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const pcActor = workflow.actor;\n\n    // set CR to destory\n    let crDestroy = 0.0;\n    if (workflow.targets.size === 0) return;\n    let actorClass = testClass(pcActor, \"cleric\", null, 1)?.levels ?? 0;\n    if (!actorClass) return;\n    if (actorClass.levels > 16) crDestroy = 4;\n    else if (actorClass.levels > 13) crDestroy = 3;\n    else if (actorClass.levels > 10) crDestroy = 2;\n    else if (actorClass.levels > 7) crDestroy = 1;\n    else if (actorClass.levels > 4) crDestroy = 0.5;\n\n    // set HP = 0 for all targets of the CR or less\n    const macro = game.macros.getName(\"Make Dead\");\n    for (let target of workflow.targets) {\n        if (target.actor.data.data.details.cr <= crDestroy) {\n            macro.execute(target.actor.uuid);\n        }\n    }\n}\n\n// Test PC Class, Subclass and Class Level\n// RETURN the class object (TRUE) or null (FALSE)\nfunction testClass(testActor, className, subClassName, levels) {\n    let theClass = testActor.data.data.classes[className];\n    if (theClass) {\n        if ((levels > 0) && (theClass.levels >= levels)) {\n            if (subClassName === null || (theClass.subclass.identifier.toLowerCase() === subClassName.toLowerCase())) {\n                return theClass;\n            }\n        }\n    }\n    return null;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"testWorld","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"},"favtab":{"isFavorite":true}},"_id":"EGcCBBuaqoX02vEx"}
{"name":"Channel Divinity: Path of the Grave","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"XGtE p20","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"creature"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric: Grave Domain","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"Xkk83MdPGWwWb2yX","changes":[{"key":"data.traits.dv.all","mode":0,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/magic/death/grave-tombstone-glow-teal.webp","label":"Path to the Grave","origin":"Item.xJ3uiHOSl6ZDElTz","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["isDamaged"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.traits.dv.all"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":216,"data":{"id":216,"name":"Remarkable Athlete","prerequisite":null,"description":"<p class=\"compendium-hr\">Starting at 7th level, you can add half your proficiency bonus (round up) to any Strength, Dexterity, or Constitution check you make that doesn’t already use your proficiency bonus.</p>\r\n<p class=\"Core-Styles_Core-Body\">In addition, when you make a running long jump, the distance you can cover increases by a number of feet equal to your Strength modifier.</p>","requiredLevel":7,"displayOrder":2},"version":"2.9.8","featureId":216,"requiredLevel":7,"prerequisite":null,"class":"Champion","classId":16,"subClass":"Champion"},"obsidian":{"source":{"type":"class","text":"Champion"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.world.ddb-class-features.7rTzj1cBRBDKOb7R"},"scene-packer":{"hash":"d09b5f8e01fcb4493b434f888effcb4a458a764e","sourceId":"Item.KBaJEwMAnwyIWAad"},"cf":null},"_id":"KM5fz5JAf5nxlWUm"}
{"name":"Divine Fury","type":"feat","img":"icons/magic/fire/projectile-wave-arrow.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"XGtE p11","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Barbarian Zealot Path","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"YJK1tQQIV2Ycrqy0","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Divine Fury","priority":"30"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/magic/fire/projectile-wave-arrow.webp","label":"Divine Fury","origin":"Item.5PUe0GiheEHUomoR","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"177dd0c89191789bb641864fd250410a8b334158","sourceId":"Item.n3rP3VtlnXnSZK40"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Divine Fury","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nDivine Fury | Auto Divine Fury  [there are two items to make this function]\n\nNOTE: I used Tom Posney's MIDI-QOL Sneak Attack / Auto Sneak Attack as a templete for this\n\nUSEAGE : PASSIVE\nPlease place these two items on a Barbarian Zealot the rest is automated\n \nv1.0 May 7 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif ([\"mwak\", \"rwak\"].includes(args[0].item.data.actionType)) {\n    let pcActor = token.actor;\n    const pcBarbarian = testClass(pcActor, \"barbarian\", \"Path of the Zealot\", 3);\n    if (testClass === null) ui.notifications.error(\"You are not a Barbarian Zealot of at least level 3!\");\n    else {\n        let effect = await findEffect(token, \"Rage\");\n        if (!effect) {\n            ui.notifications.error(\"You are not Raging!\");\n            return;\n        }\n\n        // Check to see if you have already made a divine fury attack this round\n        if (game.combat) {\n            const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn / 100}`;\n            const lastTime = actor.getFlag(\"midi-qol\", \"divineFuryTime\");\n            if (combatTime === lastTime) return {};  // already used divine fury this round\n        }\n\n        // check to see if autoDivineFury is active, if it is skip the prompt\n        let useDivineFury = getProperty(actor.data, \"flags.dae.autoDivineFury\");\n        if (!useDivineFury) {\n            console.log(\"MACRO | prompt user with dialog to use Divine Fury\");\n            let dialog = new Promise((resolve, reject) => {\n                new Dialog({\n                    // localize this text\n                    title: \"Conditional Damage\",\n                    content: `<p>Use Divine Fury?</p>`,\n                    buttons: {\n                        one: {\n                            icon: '<i class=\"fas fa-check\"></i>',\n                            label: \"Confirm\",\n                            callback: () => resolve(true)\n                        },\n                        two: {\n                            icon: '<i class=\"fas fa-times\"></i>',\n                            label: \"Cancel\",\n                            callback: () => { resolve(false) }\n                        }\n                    },\n                    default: \"two\"\n                }).render(true);\n            });\n            useDivineFury = await dialog;\n        }\n        if (!useDivineFury) return {};  // do not use divine fury\n\n        // the player wants to use divine fury or autoDivineFury is active\n        const diceMult = args[0].isCritical ? 2 : 1;\n        const baseDice = 1;\n        const baseBonus = Math.ceil(pcBarbarian.levels / 2);\n\n        if (game.combat) {\n            const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn / 100}`;\n            const lastTime = actor.getFlag(\"midi-qol\", \"divineFuryTime\");\n            if (combatTime !== lastTime) {\n                await actor.setFlag(\"midi-qol\", \"divineFuryTime\", combatTime)\n            }\n        }\n        return { damageRoll: `${baseDice * diceMult}d6 + ${baseBonus}`, flavor: \"Divine Fury\" };\n    }\n}\n\n// Test PC Class, Subclass and Class Level\n// RETURN the class object (TRUE) or null (FALSE)\nfunction testClass(testActor, className, subClassName, levels) {\n    let theClass = testActor.data.data.classes[className];\n    if (theClass) {\n        if ((levels > 0) && (theClass.levels >= levels)) {\n            if (subClassName === null || (theClass.subclass === subClassName)) {\n                return theClass;\n            }\n        }\n    }\n    return null;\n}\n\n// Function to test for an effect\nasync function findEffect(target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef => ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.5PUe0GiheEHUomoR"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.269","systemVersion":"1.5.7"},"cf":{"id":"temp_ischjl2ljr","path":"DDB Override#/CF_SEP/Class Features","color":"#000000"},"midi-qol":{"onUseMacroName":""},"midiProperties":{},"ddbimporter":{"ignoreIcon":true,"ignoreItemImport":true,"retainResourceConsumption":true}},"_id":"LShrAAOqkSCIwWUe"}
{"name":"Steps of Night","type":"feat","img":"icons/magic/control/debuff-energy-snare-brown.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"TCoE p34","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric Twilight Domain","recharge":{"value":null,"charged":false}},"effects":[{"_id":"ioxb7mkofb3lhcvi","changes":[{"key":"data.attributes.movement.fly","mode":2,"value":"@data.attributes.movement.walk","priority":"20"}],"disabled":false,"duration":{"startTime":null,"seconds":60},"icon":"systems/dnd5e/icons/spells/wind-grasp-air-1.jpg","label":"Steps of Night","origin":"Actor.4okcHmPmM1iBwyFs.Item.smt73dN8B1zU5F8r","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.movement.fly"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"1ca4a1281ba7e375de7091bcd67d1fed6aadb745","sourceId":"Item.AEFtWjLARYnAULjR"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.ii0ZfozCkVZ5vtpD"},"cf":null},"_id":"Lo7J6QbQ7aFwztJt"}
{"name":"Auto Divine Fury","type":"feat","img":"icons/magic/fire/projectile-wave-arrow.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary>VERSION INFO</summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"XGtE p11","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Barbarian Zealot Path","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"BPyKtcWCBpuwouN9","changes":[{"key":"flags.dae","mode":0,"value":"autoDivineFury 1","priority":"10"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/magic/fire/projectile-wave-arrow.webp","label":"Auto Divine Fury","origin":"Item.x0Obbisd7EriI1UU","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dae"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false},"cf":null,"core":{"sourceId":"Compendium.midi-qol.midiqol-sample-items.uvRQayOyn61L6vOV"},"scene-packer":{"hash":"a2e6a19a4b1a935cbb633dcb3f6ad7aa7504be91","sourceId":"Item.OIwRwEi4Lqpik1qW"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"}},"_id":"MYj7rdLPFib9bPBR"}
{"name":"Vigilant Blessing","type":"feat","img":"icons/magic/symbols/cog-shield-white-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"TCoE p34","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric: Twilight Domain","recharge":{"value":null,"charged":false}},"effects":[{"_id":"7BtDouaCOCQRMIQi","changes":[{"key":"flags.dnd5e.initiativeAdv","mode":0,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/light_06.jpg","label":"Vigilant Blessing","origin":"Item.ece8DHmOzO5m70tX","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnStartSource"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.initiativeAdv"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":2996547,"data":{"id":2996547,"name":"Vigilant Blessing","prerequisite":null,"description":"<p><em>1st-level Twilight Domain feature</em></p>\r\n<p>The night has taught you to be vigilant. As an action, you give one creature you touch (including possibly yourself) advantage on the next initiative roll the creature makes. This benefit ends immediately after the roll or if you use this feature again.</p>","requiredLevel":1,"displayOrder":4},"version":"2.9.8","featureId":2996547,"requiredLevel":1,"prerequisite":null,"class":"Twilight Domain","classId":654582,"subClass":"Twilight Domain"},"obsidian":{"source":{"type":"class","text":"Twilight Domain"}},"core":{"sourceId":"Compendium.world.ddb-class-features.M3GMQIicjInJPUhD"},"scene-packer":{"hash":"9f3e0fc2de43da3f7c4668f03dabe7e780aa4196","sourceId":"Item.IML9DQXEKmLWsAiu"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":null},"_id":"NT817fb3tWlDdNnF"}
{"name":"Shadow Step","type":"feat","img":"icons/magic/control/debuff-energy-snare-brown.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB p80","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Monk: Way of the Shadow","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"Maol11OcLygv28wa","changes":[{"key":"flags.midi-qol.advantage.attack.all","mode":0,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"systems/dnd5e/icons/spells/wind-grasp-air-1.jpg","label":"Shadow Step","origin":"Item.B2VMCdTeSXIiKeZJ","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Attack"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.advantage.attack.all"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"acd729a4fca0d799d11ecb5d90679f1a85927dc0","sourceId":"Item.xff9TJ7gDc7pxQdF"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Shadow Step","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nShadow Step\n\nNOTE: PARTS OF THIS AUTOMATION WERE TAKEN FROM \"MIDI-SRD\" SPELL: MISTY STEP\nBy Author: Kandashi   https://github.com/kandashi/Dynamic-Effects-SRD\n\nv1.0 May 7 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git\n*****/\n\nif (args[0].macroPass === \"preItemRoll\") {\n    let pcToken = token;\n    let pcActor = token.actor.data.data;\n    const target = canvas.tokens.get(pcToken.tokenId) || token;\n\n    let range = canvas.scene.createEmbeddedDocuments(\"MeasuredTemplate\", [{\n        t: \"circle\",\n        user: game.user.id,\n        x: target.x + canvas.grid.size / 2,\n        y: target.y + canvas.grid.size / 2,\n        direction: 0,\n        distance: 60,\n        borderColor: \"#FF0000\",\n        flags: { DAESRD: { ShadowStep: { ActorId: pcActor.id } } }\n    }]);\n\n    range.then(result => {\n        let templateData = {\n            t: \"rect\",\n            user: game.user.id,\n            distance: 7.5,\n            direction: 45,\n            x: 0,\n            y: 0,\n            fillColor: game.user.color,\n            flags: { DAESRD: { ShadowStep: { ActorId: pcActor.id } } }\n        };\n\n        Hooks.once(\"createMeasuredTemplate\", deleteTemplatesAndMove);\n        let doc = new CONFIG.MeasuredTemplate.documentClass(templateData, { parent: canvas.scene });\n        let template = new game.dnd5e.canvas.AbilityTemplate(doc);\n        template.actorSheet = pcActor.sheet;\n        template.drawPreview();\n\n        async function deleteTemplatesAndMove(template) {\n            let removeTemplates = canvas.templates.placeables.filter(i => i.data.flags.DAESRD?.MistyEscape?.ActorId === pcActor.id);\n            let templateArray = removeTemplates.map(function (w) { return w.id });\n            await target.data.document.update(canvas.grid.getSnappedPosition(template.data.x, template.data.y));\n            if (removeTemplates) await canvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", templateArray);\n        };\n    });\n} return;","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.snMxepltm5UWo5KL"},"favtab":{"isFavorite":true}},"_id":"TGRbo6E7wV3iZEST"}
{"name":"Circle of Mortality","type":"feat","img":"icons/skills/wounds/blood-cells-disease-green.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"You restore maximum possible HP on each dice (instead of rolling) with healing spells to a creature with 0 HP. You learn the spare the dying cantrip, can cast it as a bonus action, and it has a range of 30 ft.","unidentified":""},"source":"XGtE p20","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric: Grave Domain","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"1jud0luaqrwjayvy","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Circle of Mortality,all","priority":"10"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/affliction_10.jpg","label":"Circle of Mortality","origin":"Actor.Uv8E8r17bCEb1o2e.Item.3aDwBUf6nDcPVKz7","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53464","entityTypeId":"222216831","componentId":664,"componentTypeId":12168134,"class":"Cleric","subclass":"Grave Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"qr5dq6rdmr31r67m"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"2b012f72ce797b79e785cdf81a87241fd8789b7c","sourceId":"Item.rmIlA4EpUQtohU26"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Circle of Mortality","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nCircle of Mortality\n\nv1.0 May 7 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"postDamageRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    const actorUuid = workflow.tokenUuid;\n    const actorToken = canvas.tokens.get(workflow.tokenId);\n    const thisItem = actorToken.actor.items.find(i => i.name === \"Circle of Mortality\")?.data;\n    let targetTokenUuid = args[0].hitTargetUuids[0];\n    let targetToken = await fromUuid(targetTokenUuid);\n    let targetActor = targetToken.actor;\n\n    // if Target HP > 0 return \n    if (targetActor.data.data.attributes.hp.value != 0) return;\n\n    // check to make sure only one target is selected\n    if ((args[0].targetUuids.length < 1) || (args[0].targetUuids.length > 1)) {\n        ui.notifications.error(\"You need to select a single target.\");\n        return;\n    }\n\n    // compute maximum healing for the spell cast\n    let healingRollMax = 0;\n    for (let i = 0; i < workflow.damageRoll.terms.length; i++)\n        if (workflow.damageRoll.terms[i]?.faces) healingRollMax = healingRollMax + (workflow.damageRoll.terms[i].faces * workflow.damageRoll.terms[i].number);\n        else if (workflow.damageRoll.terms[i]?.number) healingRollMax = healingRollMax + workflow.damageRoll.terms[i].number;\n    let bonusHealing = (healingRollMax - workflow.damageRoll.total);\n    await setProperty(workflow, \"BonusHealing\", bonusHealing);\n\n    // trigger BonusDamage to apply the extra damage / adjustments outside of the normal damage roll\n    let effectData = {\n        label: \"Healing Mortality\",\n        changes: [{ key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.Circle of Mortality,all`, priority: 20 }],\n        icon: thisItem.img,\n        origin: thisItem.uuid,\n        duration: { turns: 1 }\n    };\n\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: actorUuid, effects: [effectData] });\n    return;\n\n} else if (args[0].tag === \"DamageBonus\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    const actorUuid = workflow.tokenUuid;\n    const actorToken = canvas.tokens.get(workflow.tokenId);\n    let bonusHealing = await getProperty(workflow, \"BonusHealing\");\n\n    // remove extra damage effect \n    let effect = await findEffect(actorToken, \"Healing Mortality\");\n    await MidiQOL.socket().executeAsGM(\"removeEffects\", { actorUuid: actorUuid, effects: [effect.id] });\n\n    // Bonus Healing\n    return { damageRoll: `${bonusHealing}[healing]`, flavor: \"Circle of Mortality Bonus Healing\" };\n}\n\n// Function to test for an effect\nasync function findEffect(target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef => ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"core":{"sourceId":"Item.edUabd3mcVcUaLtm"}},"_id":"a3wJFvKvQEiC02P9"}
{"name":"Misty Escape","type":"feat","img":"icons/magic/control/debuff-energy-snare-brown.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB p109","activation":{"type":"reactiondamage","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Warlock: The Archfey","recharge":{"value":null,"charged":false},"attunement":null},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"1d6c2b4c7b4480cd557b2066d50fc0e7687bd557","sourceId":"Item.T6ro4mJIxfNXLxvg"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Misty Escape","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nMisty Escape\n\nNOTE: PARTS OF THIS AUTOMATION WERE TAKEN FROM \"MIDI-SRD\" SPELL: MISTY STEP\nBy Author: Kandashi   https://github.com/kandashi/Dynamic-Effects-SRD\n\nv1.0 May 7 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git\n*****/\n\nif (args[0].macroPass === \"preItemRoll\") {\n    let pcToken = token;\n    let pcActor = token.actor.data.data;\n    const target = canvas.tokens.get(pcToken.tokenId) || token;\n\n    let range = canvas.scene.createEmbeddedDocuments(\"MeasuredTemplate\", [{\n        t: \"circle\",\n        user: game.user.id,\n        x: target.x + canvas.grid.size / 2,\n        y: target.y + canvas.grid.size / 2,\n        direction: 0,\n        distance: 60,\n        borderColor: \"#FF0000\",\n        flags: { DAESRD: { MistyEscape: { ActorId: pcActor.id } } }\n    }]);\n\n    range.then(result => {\n        let templateData = {\n            t: \"rect\",\n            user: game.user.id,\n            distance: 7.5,\n            direction: 45,\n            x: 0,\n            y: 0,\n            fillColor: game.user.color,\n            flags: { DAESRD: { MistyEscape: { ActorId: pcActor.id } } }\n        };\n\n        Hooks.once(\"createMeasuredTemplate\", deleteTemplatesAndMove);\n        let doc = new CONFIG.MeasuredTemplate.documentClass(templateData, { parent: canvas.scene });\n        let template = new game.dnd5e.canvas.AbilityTemplate(doc);\n        template.actorSheet = pcActor.sheet;\n        template.drawPreview();\n\n        // make character invisible with custom effect\n        applyTempInvisibilityEffect(actor, actor);\n\n        async function deleteTemplatesAndMove(template) {\n            let removeTemplates = canvas.templates.placeables.filter(i => i.data.flags.DAESRD?.MistyEscape?.ActorId === pcActor.id);\n            let templateArray = removeTemplates.map(function (w) { return w.id });\n            await target.data.document.update(canvas.grid.getSnappedPosition(template.data.x, template.data.y));\n            if (removeTemplates) await canvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", templateArray);\n        };\n    });\n} return;\n\n// Mark the character invisible until the start of thier next turn \n// or when the character attacks or casts a spell\nasync function applyTempInvisibilityEffect(target, actor) {\n    let effectData = {\n        label: \"Invisible\",\n        icon: \"modules/dfreds-convenient-effects/images/invisible.svg\",\n        origin: actor.uuid,\n        changes: [\n            { \"key\": \"flags.midi-qol.advantage.attack.all\", \"value\": `1`, \"mode\": 0, \"priority\": 20 },\n            { \"key\": \"flags.midi-qol.grants.disadvantage.attack.all\", \"value\": `1`, \"mode\": 0, \"priority\": 20 }\n        ],\n        disabled: false,\n        flags: {\n            dae: { specialDuration: [\"turnStartSource\", \"1Attack\"] },\n            core: { statusId: \"Convenient Effect: Invisible\" }\n        }\n    }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: target.uuid, effects: [effectData] });\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.snMxepltm5UWo5KL"}},"_id":"b23oLQCyHWqSUgZS"}
{"name":"Wrath of the Storm","type":"feat","img":"icons/magic/lightning/bolts-forked-large-orange.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"When a creature within 5 ft. that you can see hits you with an attack, you can use your reaction to cause the creature to make a DEX saving throw (DC +14 or it takes 2d8 lightning or thunder damage (your choice), half damage on success).\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>Also at 1st level, you can thunderously rebuke attackers. When a creature within 5 feet of you that you can see hits you with an attack, you can use your reaction to cause the creature to make a Dexterity saving throw. The creature takes 2d8 lightning or thunder damage (your choice) on a failed saving throw, and half as much damage on a successful one.</p>\n<p>You can use this feature a number of times equal to your Wisdom modifier (a minimum of once). You regain all expended uses when you finish a long rest.</p>\n  <p></p>\n</details>","unidentified":""},"source":"PHB p62","activation":{"type":"reaction","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"enemy"},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":2,"max":"2","per":"lr"},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["2d8[lightning]","lightning"]],"versatile":""},"formula":"","save":{"ability":"dex","dc":null,"scaling":"spell"},"requirements":"Cleric: Tempest","recharge":{"value":null,"charged":false},"attunement":null},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"1018","entityTypeId":"222216831","componentId":149,"componentTypeId":12168134,"class":"Cleric","subclass":"Tempest Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"sqffc9kk1ucpsf5y","ignoreIcon":false,"ignoreItemImport":false,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"link-item-resource-5e":{"resource-link":""},"scene-packer":{"hash":"7377d7a35dfaa5340cbfa43635701af3233db250","sourceId":"Item.sgX39YcOTQ19eA4i"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":true,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.Fvl2VJyfemTViUHw"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.266","systemVersion":"1.5.7"}},"_id":"ekD2XfHEJvAvdmO4"}
{"name":"Aura of Alacrity","type":"feat","img":"icons/skills/movement/feet-winged-boots-brown.webp","data":{"description":{"value":"<p><em>[PLACE YOUR DESCRIPTION HERE]</em></p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p><em>7th- and 18th-level Oath of Glory feature</em></p>\n<p>You emanate an aura that fills you and your companions with supernatural speed, allowing you to race across a battlefield in formation. Your walking speed increases by 10 feet. In addition, if you aren’t @Compendium[dnd5e.rules.Incapacitated]{incapacitated}, the walking speed of any ally who starts their turn within 5 feet of you increases by 10 feet until the end of that turn.</p>\n<p>When you reach 18th level in this class, the range of the aura increases to 10 feet.</p>","unidentified":""},"source":"MOoT p29","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Paladin : Oath of Glory","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"2clgap6djsy9eun2","changes":[{"key":"data.attributes.movement.walk","mode":2,"value":"10","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/armor_01.jpg","label":"Aura of Alacrity","origin":"Actor.XhIWoWzMyMzFK5FU.Item.8TLpbFnPykVWRRwa","transfer":true,"flags":{"core":{"statusId":"1"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":true,"aura":"Allies","radius":5,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.movement.walk"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":2203086,"type":"class","dndbeyond":{"requiredLevel":7,"displayOrder":3,"levelScale":{"id":266710,"level":7,"description":"Aura of Alacrity (Range 5 feet)","dice":null,"fixedValue":5},"levelScales":[{"id":266710,"level":7,"description":"Aura of Alacrity (Range 5 feet)","dice":{"diceCount":null,"diceValue":null,"diceMultiplier":null,"fixedValue":null,"diceString":null},"fixedValue":5},{"id":266711,"level":18,"description":"Aura of Alacrity (range 10 feet)","dice":{"diceCount":null,"diceValue":null,"diceMultiplier":null,"fixedValue":null,"diceString":null},"fixedValue":10}],"limitedUse":[],"class":"Paladin : Oath of Glory"},"class":"Paladin","subclass":"Oath of Glory","importId":"lkdgypqhrbwo10lx"},"obsidian":{"source":{"type":"class","text":"Paladin"}},"scene-packer":{"hash":"7ff91cbcc78a8bc8368ddccde3ae08f6e1c5bc17","sourceId":"Item.CPeO36Ox7J472TD5"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.IymI4xM6Du0DvYhg"}},"_id":"grvuhngQGIHp0iQG"}
{"name":"Eyes of Night","type":"feat","img":"icons/magic/perception/silhouette-stealth-shadow.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"As an action, you can share your 300 ft. @Compendium[dnd5e.rules.Darkvision]{darkvision} with up to +4 willing creatures you can see within 10 ft. of you, lasting for 1 hour. Once you share it, you can’t do so again until you finish a long rest, unless you expend a spell slot of any level to share it again.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p><em>1st-level Twilight Domain feature</em></p>\n<p>You can see through the deepest gloom. You have @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} out to a range of 300 feet. In that radius, you can see in dim light as if it were bright light and in darkness as if it were dim light.</p>\n<p>As an action, you can magically share the @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} of this feature with willing creatures you can see within 10 feet of you, up to a number of creatures equal to your Wisdom modifier (minimum of one creature). The shared @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} lasts for 1 hour. Once you share it, you can’t do so again until you finish a long rest, unless you expend a spell slot of any level to share it again.</p>\n  <p></p>\n</details>","unidentified":""},"source":"TCoE p34","activation":{"type":"none","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric Twilight Domain","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"WysKNsnpbFv2ZWLB","changes":[{"key":"ATL.dimSight","mode":2,"value":"300","priority":"40"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/shadow_17.jpg","label":"Eyes of Night","origin":"Item.BsbEEhiIUMijPdYz","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"ATL.dimSight"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2409717","entityTypeId":"222216831","componentId":2996540,"componentTypeId":12168134,"class":"Cleric","subclass":"Twilight Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"iyl0evwnfwrvm9lh"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"8c55ed5d8ba1e0ad17b2153f708ddd5c4185444c","sourceId":"Item.PCAu9fa2ZxyDpBxZ"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Eyes of Night","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.BsbEEhiIUMijPdYz"},"cf":null},"_id":"l17z6IqYnldfCR6v"}
{"name":"Psionic Die","type":"feat","img":"icons/sundries/gaming/dice-runed-brown.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"You learn maneuvers that are fueled by superiority dice. Maneuvers enhance an attack in some way. You have 5d8 superiority dice per short rest.","unidentified":""},"source":"PHB","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Rogue: Soulknife","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"UgB9349LhJU4nKsd","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/items/inventory/dice.jpg","label":"Psionic Die","origin":"Item.H14LgNk3j1O3e3FV","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"1023","entityTypeId":"222216831","componentId":209,"componentTypeId":12168134,"class":"Fighter","subclass":"Battle Master","dndbeyond":{"levelScale":{"id":12,"level":7,"description":"d8","dice":{"diceCount":5,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"5d8"},"fixedValue":null},"levelScales":[{"id":11,"level":1,"description":"d8","dice":{"diceCount":4,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"4d8"},"fixedValue":null},{"id":12,"level":7,"description":"d8","dice":{"diceCount":5,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"5d8"},"fixedValue":null},{"id":13,"level":10,"description":"d10","dice":{"diceCount":5,"diceValue":10,"diceMultiplier":null,"fixedValue":null,"diceString":"5d10"},"fixedValue":null},{"id":14,"level":15,"description":"d10","dice":{"diceCount":6,"diceValue":10,"diceMultiplier":null,"fixedValue":null,"diceString":"6d10"},"fixedValue":null},{"id":15,"level":18,"description":"d12","dice":{"diceCount":6,"diceValue":12,"diceMultiplier":null,"fixedValue":null,"diceString":"6d12"},"fixedValue":null}],"limitedUse":[{"level":null,"uses":1}]},"importId":"ye6nz9f4x9n3v7lu","ignoreIcon":true,"ignoreItemImport":true,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"scene-packer":{"hash":"1518724f8509341a93417089b289e54f18bf8d85","sourceId":"Item.1SZLgIr42Rn2kwZ1"},"core":{"sourceId":"Item.8gdA6c8j5GnkX33K"},"itemacro":{"macro":{"data":{"_id":null,"name":"Psionic Die","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nPsionic Power: Psionic Power\n\nUSEAGE : PASSIVE\nThis energy is represented by your Psionic Energy dice, which are each a d6. \nYou have a number of these dice equal to twice your proficiency bonus, and \nthey fuel various psionic powers you have, which are detailed below.\n\nv1.0 May 7 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0] === \"on\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    let rogueLevel = testClass(pcActor, \"rogue\", \"Soulknife\", 3)?.levels ?? 0;\n    if (!rogueLevel) {\n        ui.notifications.error(\"You are not a Rogue: Soulknife of at least 3rd level.\");\n        return;\n    }\n    let flagData;\n    if (rogueLevel > 16) flagData = \"+ 1d12\";\n    else if (rogueLevel > 10) flagData = \"+ 1d10\";\n    else if (rogueLevel > 4) flagData = \"+ 1d8\";\n    else if (rogueLevel > 0) flagData = \"+ 1d6\";\n    pcActor.setFlag(\"dae\", \"PsionicDie\", flagData)\n\n} else if (args[0] === \"off\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    pcActor.unsetFlag(\"dae\", \"PsionicDie\");\n}\n\n// Test PC Class, Subclass and Class Level\n// RETURN the class object (TRUE) or null (FALSE)\nfunction testClass(testActor, className, subClassName, levels) {\n    let theClass = testActor.data.data.classes[className];\n    if (theClass) {\n        if ((levels > 0) && (theClass.levels >= levels)) {\n            if (subClassName === null || (theClass.subclass === subClassName)) {\n                return theClass;\n            }\n        }\n    }\n    return null;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"saltmarsh","system":"dnd5e","coreVersion":"9.266","systemVersion":"1.5.7"},"favtab":{"isFavorite":true},"cf":{"id":"temp_fgyhz98iq6m","path":"DDB Override#/CF_SEP/Battlemaster Maneuvers","color":"#000000"}},"_id":"lS2fxTtF5Up2wum1"}
{"name":"Inspiring Smite","type":"feat","img":"icons/magic/life/heart-cross-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to use Channel Divinity: Inspiring Smite first, after you deal smite damage.</p>\n<p> </p>\n</details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"MOoT p.29","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":"","type":"lr"},"consume":{"type":"","target":"","amount":8},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"Inspiring Smite","critical":{"threshold":null,"damage":null},"damage":{"parts":[["8","healing"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin: Oath of Glory","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10},"attunement":0},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"_sheetTab":"description","entityorder":{"order":161},"dynamiceffects":{"effects":[],"alwaysActive":false,"equipActive":false},"favtab":{"isFavourite":true,"isFavorite":true},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Inspiring Smite","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nInspiring Smite\n\nUSE: Must Manually triggered after channel divinity: Inspiring Smite to distribute healing pool\n\nNOTE: PARTS OF THIS AUTOMATION WERE TAKEN FROM \"MidiQOL Sample Items\" SPELL: LAY ON HANDS\nBy Author: Tim Poseney   https://gitlab.com/tposney/midi-qol\n\nv1.0 May 7 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"preItemRoll\") {\n  // get healthpool if not available send a notification\n  let healingPool = actor.getFlag(\"dae\", \"healingpool\");\n  if ((!healingPool) || (!healingPool > 0)) {\n    ui.notifications.warn(\"You either have no healing pool left or you have not used Channel Divinity: Inspiring Smite...\");\n    return false;\n  }\n\n  // check to make sure there is a target to heal and only one is selected\n  let theTarget = args[0].targets[0];\n  if ((!theTarget) || (args[0].targets.length > 1)) {\n    ui.notifications.warn(\"Please select a target to heal with Inspiring Smite\");\n    return false;\n  }\n\n  // does not work on undead/constructs - not sure if this is RAW but makes sense given Inspiring Smite \n  let invalid = [\"undead\", \"construct\"].some(type => (theTarget?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\n  if (invalid) {\n    ui.notifications.warn(\"Inspiring Smite can't affect undead/constructs\")\n    return false;\n  }\n\n  let targetToken = await fromUuid(args[0].targetUuids[0]);\n  let targetActor = targetToken.actor;\n  let targetDamage = targetActor.data.data.attributes.hp.max - targetActor.data.data.attributes.hp.value;\n\n  // prompt for how much to use...\n  let d = new Promise((resolve, reject) => {\n    let theDialog = new Dialog({\n      title: \"Inspiring Smite\",\n      content: `<p>Your targets current damage level: ${targetDamage}</p>\n                  <p>How many points to use? ${healingPool} left in your Healing Pool<input id=\"mqlohpoints\" type=\"number\" min=\"0\" step=\"1.0\" max=\"${healingPool}\"></input></p>`,\n      buttons: {\n        heal: {\n          icon: '<p></p><img src = \"icons/magic/life/heart-cross-blue.webp\" width=\"60\" height=\"60\"></>',\n          label: \"<p>HEAL</p>\",\n          callback: (html) => { resolve(Math.clamped(Math.floor(Number(html.find('#mqlohpoints')[0].value)), 0, healingPool)); }\n        },\n        abort: {\n          icon: '<p></p><img src = \"icons/svg/cancel.svg\" width=\"60\" height=\"60\"></>',\n          label: \"<p>CANCEL</p>\",\n          callback: () => { resolve(false) }\n        },\n      },\n      default: \"abort\",\n    }).render(true);\n  });\n  const consumed = await d;\n  if (!consumed) return false;\n\n  const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n  const theItem = workflow.item;\n  let updates;\n  if (consumed > 0) {\n    updates = {\n      \"data.consume.amount\": Math.abs(consumed),\n      \"data.damage.parts\": [[`${Math.max(0, consumed)}`, \"healing\"]],\n      \"data.chatFlavor\": \"Inspiring Smite\"\n    };\n  }\n\n  // remove consumed from pool\n  healingPool = healingPool - consumed;\n  actor.setFlag(\"dae\", \"healingpool\", healingPool);\n\n  return theItem.update(updates);\n}\nreturn true;","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.IM2UCUasJLD5J7Fw"},"scene-packer":{"sourceId":"Item.btYfM4eeeuXQ5k45","hash":"50796eb9313f0f0c99b95827f641bcfd0f311bbc"},"cf":{"id":"temp_ovon30cu8t"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"_id":"oJPVlugN0WU9zNTz"}
{"name":"Incisive Sense","type":"feat","img":"icons/equipment/back/cloak-hooded-green-gold.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>You have advantage on Intelligence (@Compendium[dnd5e.rules.Using Each Ability]{Investigation}) and Wisdom (@Compendium[dnd5e.rules.Using Each Ability]{Insight}) checks.</p>","unidentified":""},"source":"EGtW p163","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Elf","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"f50j8dfdk7sz7lfe","changes":[{"key":"flags.midi-qol.advantage.skill.ins","mode":5,"value":"1","priority":"20"},{"key":"flags.midi-qol.advantage.skill.inv","mode":5,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/equipment/back/cloak-hooded-green-gold.webp","label":"Incisive Sense","origin":"Actor.6OUbrDvzBaKBNRuA.Item.VPKVVTDdrss5Yi0f","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.advantage.skill.ins","flags.midi-qol.advantage.skill.inv"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":2821775,"type":"race","entityTypeId":1960452172,"dndbeyond":{"displayOrder":200},"importId":"8i3k4hbim8bho1dm"},"obsidian":{"source":{"type":"race"}},"scene-packer":{"hash":"11bb3ce6869a43933dd7a76a5955ff75b5b9c826","sourceId":"Item.qSAhMNWngLTJD6nO"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.266","systemVersion":"1.5.7"},"core":{"sourceId":"Item.1AgaCsP9EpGaadae"}},"_id":"oMV86JE5RhKiX2OV"}
{"name":"Zealous Presence","type":"feat","img":"icons/creatures/magical/construct-iron-stomping-yellow.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"Once per long rest as a bonus action, you unleash a battle cry and up to 10 other creatures of your choice within 60 feet of you that can hear you gain advantage on attack rolls and saving throws until the start of your next turn.","unidentified":""},"source":"XGtE p11","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":10,"width":null,"units":"","type":"ally"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"lr"},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Barbarian: Path of the Zealot","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"xrxfjgozwcowrenv","changes":[{"key":"flags.midi-qol.advantage.attack.all","mode":0,"value":"1","priority":"20"},{"key":"flags.midi-qol.advantage.ability.save.all","mode":0,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_14.jpg","label":"Zealous Presence","origin":"Actor.uQOmYSCbRfODlmLf.Item.juMtQeO7Dyz3rDlO","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnStartSource"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.advantage.attack.all","flags.midi-qol.advantage.ability.save.all"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"5181","entityTypeId":"222216831","componentId":647,"componentTypeId":12168134,"class":"Barbarian","subclass":"Path of the Zealot","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"pmwzriev72c0n6wr","ignoreIcon":false,"ignoreItemImport":false,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Barbarian"}},"link-item-resource-5e":{"resource-link":"secondary"},"scene-packer":{"hash":"51a913db310ac877a00cf18be8aaca37b8dce967","sourceId":"Item.XGrcyW4DQeVeDMlF"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.Kjv6xBCHzbdiD9uE"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.266","systemVersion":"1.5.7"}},"_id":"qymoSsQZ8xitYEZh"}
{"name":"Channel Divinity: Inspiring Smite","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"MOoT p.29","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Paladin: Oath of Glory","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"mj8jXTYFLF8zANxn","changes":[{"key":"macro.itemMacro","mode":0,"value":"ItemMacro","priority":"50"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"icons/magic/life/heart-cross-blue.webp","label":"Inspiring Smite Healing Pool","origin":"Item.D5SPoopIkNLJ3PyB","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"82381a9876b83087f690502b08ed5aca2b06dc9c","sourceId":"Item.rI4zp4wKLsN9CjlR"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.D5SPoopIkNLJ3PyB"},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Inspiring Smite","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nChannel Divinity: Inspiring Smite\n\nUSE: Manually triggered after to hit with divine smite\nCreate a healing pool - roll 2d8 + class level\nStore the healing pool on the character in a DAE variable that terminates at the end of the actors turn\n\nv1.0 May 7 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0] === \"on\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n\n    let paladinClass = testClass(pcActor, \"paladin\", \"oath-of-glory\", 3)?.levels ?? 0;\n    if (!paladinClass) {\n        ui.notifications.error(\"You are not a Oath of Glory Paladin of at least 3rd level.\");\n        return;\n    }\n\n    //roll 2d8 + paladinClass.levels and store result in flag.dae.healingPool\n    const roll = await(new Roll(`2d8 + ${paladinClass.levels}`)).roll();\n    pcActor.setFlag(\"dae\", \"healingpool\", roll.total);\n    return;\n\n} else if (args[0] === \"off\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    pcActor.unsetFlag(\"dae\", \"healingpool\");\n    return;\n}\n\n// Test PC Class, Subclass and Class Level\n// RETURN the class object (TRUE) or null (FALSE)\nfunction testClass(testActor, className, subClassName, levels) {\n    let theClass = testActor.data.data.classes[className];\n    if (theClass) {\n        if ((levels > 0) && (theClass.levels >= levels)) {\n            if (subClassName === null || (theClass.subclass.identifier.toLowerCase() === subClassName.toLowerCase())) {\n                return theClass;\n            }\n        }\n    }\n    return null;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true}},"_id":"swSGkGbtZLKnnuuH"}
{"name":"Channel Divinity: Radiance of the Dawn","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"As an action, you can use Channel Divinity and present your holy symbol to dispel any magical darkness within 30 ft. Each hostile creature (that doesn't have total cover) within 30 ft. must make a CON saving throw (DC +15) or take 2d10 +10 radiant damage (half damage on success).\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>Starting at 2nd level, you can use your Channel Divinity to harness sunlight, banishing darkness and dealing radiant damage to your foes.</p>\n<p>As an action, you present your holy symbol, and any magical darkness within 30 feet of you is dispelled. Additionally, each hostile creature within 30 feet of you must make a Constitution saving throw. A creature takes radiant damage equal to 2d10 + your cleric level on a failed saving throw, and half as much damage on a successful one. A creature that has total cover from you is not affected.</p>\n  <p></p>\n</details>","unidentified":""},"source":"PHB p61","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"enemy"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["2d10[radiant] + @classes.cleric.levels","radiant"]],"versatile":"","value":""},"formula":"","save":{"ability":"con","dc":null,"scaling":"spell"},"requirements":"Cleric: Light","recharge":{"value":null,"charged":false},"attunement":null},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53344","entityTypeId":"222216831","componentId":138,"componentTypeId":12168134,"class":"Cleric","subclass":"Light Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"cjwzq7lf48igj2ev","ignoreIcon":false,"ignoreItemImport":false,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"8e24bda147f9324c48ca6b31059c25993b4eb561","sourceId":"Item.bRTDkQAywbR5uJQE"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":true,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.BvxA3rBt3nvjgMti"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.266","systemVersion":"1.5.7"}},"_id":"zfebupN5MVXVohBm"}
{"$$deleted":true,"_id":"swSGkGbtZLKnnuuH"}
{"name":"Preserve Life","type":"feat","img":"systems/dnd5e/icons/skills/green_09.jpg","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<p><strong>SETUP:</strong></p>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<p> </p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 August 17 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB p194","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":"","type":"lr"},"consume":{"type":"","target":"","amount":5},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"Preserve Life","critical":{"threshold":null,"damage":null},"damage":{"parts":[["5","healing"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Cleric: Life Domain","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10},"attunement":0},"effects":[],"folder":null,"sort":0,"permission":{"ldRsJ6Yp5qPydWA1":3,"default":0},"flags":{"_sheetTab":"description","entityorder":{"order":161},"dynamiceffects":{"effects":[],"alwaysActive":false,"equipActive":false},"favtab":{"isFavourite":true,"isFavorite":true},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Preserve Life","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nPreserve Life\n\nUSE: use this feature AFTER channel divinity: Preserve Life is triggered to create a healing pool\n\nNOTE: PARTS OF THIS AUTOMATION WERE TAKEN FROM \"MidiQOL Sample Items\" SPELL: LAY ON HANDS\nBy Author: Tim Poseney   https://gitlab.com/tposney/midi-qol\n\nv1.0 August 17 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"preItemRoll\") {\n    // get healthpool if not available send a notification\n    let lifehealingpool = actor.getFlag(\"dae\", \"lifehealingpool\");\n    if ((!lifehealingpool) || (!lifehealingpool > 0)) {\n        ui.notifications.warn(\"You either have no healing pool left or you have not used Channel Divinity: Preserve Life...\");\n        return false;\n    }\n\n    // check to make sure there is a target to heal and only one is selected\n    let theTarget = args[0].targets[0];\n    if ((!theTarget) || (args[0].targets.length > 1)) {\n        ui.notifications.warn(\"Please select a target to heal with Preserve Life\");\n        return false;\n    }\n\n    // does not work on undead/constructs - not sure if this is RAW but makes sense given Preserve Life \n    let invalid = [\"undead\", \"construct\"].some(type => (theTarget?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\n    if (invalid) {\n        ui.notifications.warn(\"Preserve Life can't affect undead/constructs\")\n        return false;\n    }\n\n    let targetToken = await fromUuid(args[0].targetUuids[0]);\n    let targetActor = targetToken.actor;\n    //Target can only be healed up to half their HP\n    let targetDamage = ((targetActor.data.data.attributes.hp.max / 2) - targetActor.data.data.attributes.hp.value);\n\n    if (targetDamage <= 0) {\n        ui.notifications.warn(\"Target is at or above half health\");\n        return false;    \n    }\n\n    // prompt for how much to use...\n    let d = new Promise((resolve, reject) => {\n        let theDialog = new Dialog({\n            title: \"Preserve Life\",\n            content: `<p>Your targets current damage level: ${targetDamage}</p>\n                    <p>How many points to use? ${lifehealingpool} left in your Healing Pool<input id=\"mqlohpoints\" type=\"number\" min=\"0\" step=\"1.0\" max=\"${lifehealingpool}\"></input></p>`,\n            buttons: {\n                heal: {\n                    icon: '<p></p><img src = \"icons/magic/life/heart-cross-blue.webp\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>HEAL</p>\",\n                    callback: (html) => { resolve(Math.clamped(Math.floor(Number(html.find('#mqlohpoints')[0].value) / 2), 0, lifehealingpool)); }\n                },\n                abort: {\n                    icon: '<p></p><img src = \"icons/svg/cancel.svg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>CANCEL</p>\",\n                    callback: () => { resolve(false) }\n                },\n            },\n            default: \"abort\",\n        }).render(true);\n    });\n    const consumed = await d;\n    if (!consumed) return false;\n\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const theItem = workflow.item;\n    let updates;\n    if (consumed > 0) {\n        updates = {\n            \"data.consume.amount\": Math.abs(consumed),\n            \"data.damage.parts\": [[`${Math.max(0, consumed)}`, \"healing\"]],\n            \"data.chatFlavor\": \"Preserve Life\"\n        };\n    }\n\n    // remove consumed from pool\n    lifehealingpool = lifehealingpool - consumed;\n    actor.setFlag(\"dae\", \"lifehealingpool\", lifehealingpool);\n\n    return theItem.update(updates);\n}\nreturn true;","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.IM2UCUasJLD5J7Fw"},"scene-packer":{"sourceId":"Item.RwbMea9djHBWfi8N","hash":"868f373347d8c6a7235865cfb5c1b3bec06fec90"},"cf":{"id":"temp_ovon30cu8t"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"_id":"SLHeX9YoN5uR4ALG"}
{"name":"Channel Divinity: Preserve Life","type":"feat","img":"systems/dnd5e/icons/skills/green_09.jpg","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 August 17 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>\n<p> </p>","chat":"","unidentified":""},"source":"PHB p194","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"z5emxm04jk40kp3k","changes":[{"key":"macro.itemMacro","mode":0,"value":"ItemMacro","priority":"20"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"systems/dnd5e/icons/skills/green_09.jpg","label":"Channel Divinity: Preserve Life","origin":"Actor.XymBtQnn8lRHXvt6.Item.hqvE87WW1vGTGreC","transfer":false,"flags":{"dae":{"selfTarget":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53343","entityTypeId":"222216831","componentId":132,"componentTypeId":12168134,"class":"Cleric","subclass":"Life Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"v4ymwgpll4j2cos8"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"f0f87f8e1251e3eb36b6f4df01c2a06b14cbdfce","sourceId":"Item.K15WEagUYmI15YZm"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Preserve Life","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nChannel Divinity: Preserve Life\n\nUSE: Manually triggered Preserve Life to use the available healing pool on the target\nCreate a healing pool \nStore the healing pool on the character in a DAE variable that terminates at the end of the actors turn\n\nv1.0 August 17 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0] === \"on\") {\n    const pcActor = token.actor; \n    // Test Class\n    let pcCleric = pcActor.getRollData().classes?.cleric;\n    if (pcCleric === null) {\n        ui.notifications.error(\"You are not a cleric!\");\n        return;\n    }\n\n    // Test Subclass\n    let pcClericSubclass = pcActor.getRollData().classes.cleric?.subclass.identifier;\n    if (pcClericSubclass != \"life-domain\") {\n        ui.notifications.error(\"You are not a Life Domain cleric!\");\n        return;\n    }\n\n    //5x cleric level healing pool\n    const pool = 5 * pcCleric.levels;\n    pcActor.setFlag(\"dae\", \"lifehealingpool\", pool);\n    return;\n\n} else if (args[0] === \"off\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    pcActor.unsetFlag(\"dae\", \"lifehealingpool\");\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"core":{"sourceId":"Item.bPoUIdDoPJd5Tc2X"}},"_id":"bX9ZiHQsSO3CMWjm"}
{"$$deleted":true,"_id":"EGcCBBuaqoX02vEx"}
{"$$deleted":true,"_id":"SLHeX9YoN5uR4ALG"}
{"$$deleted":true,"_id":"bX9ZiHQsSO3CMWjm"}
{"name":"Channel Divinity: Inspiring Smite","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"MOoT p.29","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Paladin: Oath of Glory","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"mj8jXTYFLF8zANxn","changes":[{"key":"macro.itemMacro","mode":0,"value":"ItemMacro","priority":"50"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"icons/magic/life/heart-cross-blue.webp","label":"Inspiring Smite Healing Pool","origin":"Item.D5SPoopIkNLJ3PyB","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false,"selfTarget":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"26c1f5e823e4b4685429ae3b6787d860edb2e1ff","sourceId":"Item.ud948jSrnHLUJQ6d"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.D5SPoopIkNLJ3PyB"},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Inspiring Smite","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nChannel Divinity: Inspiring Smite\n\nUSE: Manually triggered after to hit with divine smite\nCreate a healing pool - roll 2d8 + class level\nStore the healing pool on the character in a DAE variable that terminates at the end of the actors turn\n\nv1.1 August 6 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0] === \"on\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n\n    // Test Class\n    let pcPaladin = pcActor.getRollData().classes?.paladin;\n    if (pcPaladin === null) {\n        ui.notifications.error(\"You are not a Paladin!\");\n        return;\n    }\n\n    // Test Subclass\n    let pcPaladinSubclass = pcActor.getRollData().classes.paladin?.subclass.identifier;\n    if (pcPaladinSubclass != \"oath-of-glory\") {\n        ui.notifications.error(\"You are not a Oath of Glory Paladin!\");\n        return;\n    }\n\n    //roll 2d8 + pcPaladin.levels and store result in flag.dae.healingPool\n    const roll = await(new Roll(`2d8 + ${pcPaladin.levels}`)).roll();\n    pcActor.setFlag(\"dae\", \"healingpool\", roll.total);\n    return;\n\n} else if (args[0] === \"off\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    pcActor.unsetFlag(\"dae\", \"healingpool\");\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"cf":{"id":"temp_92357bvnxs9"},"ddbimporter":{"pack":"world.ddb-override","id":"1731654","entityTypeId":"222216831","componentId":2203085,"componentTypeId":12168134,"class":"Paladin","subclass":"Oath of Glory","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1},{"level":null,"uses":1}]},"importId":"7hbudetkus7tdkj4","originalItemName":"Channel Divinity: Inspiring Smite","replaced":true}},"_id":"afjSLgPklyhp7BKp"}
{"name":"Channel Divinity: Preserve Life","type":"feat","img":"systems/dnd5e/icons/skills/green_09.jpg","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 August 17 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>\n<p> </p>","chat":"","unidentified":""},"source":"PHB p194","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"z5emxm04jk40kp3k","changes":[{"key":"macro.itemMacro","mode":0,"value":"ItemMacro","priority":"20"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"systems/dnd5e/icons/skills/green_09.jpg","label":"Channel Divinity: Preserve Life","origin":"Actor.XymBtQnn8lRHXvt6.Item.hqvE87WW1vGTGreC","transfer":false,"flags":{"dae":{"selfTarget":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53343","entityTypeId":"222216831","componentId":132,"componentTypeId":12168134,"class":"Cleric","subclass":"Life Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"v4ymwgpll4j2cos8"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"787f852a26ecdc449a674c1ac1b1218dc7d845df","sourceId":"Item.gmVYobArn0Oiu2S9"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Preserve Life","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nChannel Divinity: Preserve Life\n\nUSE: Manually triggered Preserve Life to use the available healing pool on the target\nCreate a healing pool \nStore the healing pool on the character in a DAE variable that terminates at the end of the actors turn\n\nv1.0 August 17 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0] === \"on\") {\n    const pcActor = token.actor; \n    // Test Class\n    let pcCleric = pcActor.getRollData().classes?.cleric;\n    if (pcCleric === null) {\n        ui.notifications.error(\"You are not a cleric!\");\n        return;\n    }\n\n    // Test Subclass\n    let pcClericSubclass = pcActor.getRollData().classes.cleric?.subclass.identifier;\n    if (pcClericSubclass != \"life-domain\") {\n        ui.notifications.error(\"You are not a Life Domain cleric!\");\n        return;\n    }\n\n    //5x cleric level healing pool\n    const pool = 5 * pcCleric.levels;\n    pcActor.setFlag(\"dae\", \"lifehealingpool\", pool);\n    return;\n\n} else if (args[0] === \"off\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    pcActor.unsetFlag(\"dae\", \"lifehealingpool\");\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"core":{"sourceId":"Item.bPoUIdDoPJd5Tc2X"}},"_id":"8oODTSGeuUPdbqpj"}
{"name":"Channel Divinity: Turn Undead","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.4 August 13 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB p194","activation":{"type":"action","cost":1,"condition":"undead"},"duration":{"value":null,"units":"inst"},"target":{"value":30,"width":null,"units":"ft","type":"creature"},"range":{"value":null,"long":null,"units":"spec"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":null},"ability":"","actionType":"other","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"3adv1867dmy3nrmn","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.\"Channel Divinity: Turn Undead\",all","priority":"1"}],"disabled":false,"duration":{"startTime":null,"seconds":60},"icon":"systems/dnd5e/icons/skills/yellow_19.jpg","label":"Channel Divinity: Turn Undead","origin":"Actor.4okcHmPmM1iBwyFs.Item.0Gd8ADfg2sOZyTyq","transfer":false,"flags":{"core":{"statusId":"true"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false,"selfTarget":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"d867b58edfb30baa756149a8ecda979c6fbed5bb","sourceId":"Item.Ssp4UDxq20tX43xo"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false,"forceCEOff":false,"onUseMacroName":"[all]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.r5SIR5IwtjxLYHvO"},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Turn Undead","type":"script","author":"KBnld8ZLhMcDSTkg","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nCleric: Turn Undead\n\nUSEAGE : ACTIVATE TO CHANNEL DIVINITY : TURN UNDEAD\nClick on this item to activate the turn undead.  \nPlease remember to setup usage consumption in the itme itself.  \n\nThis Macro requires a GAME LEVEL MACRO: MAKE DEAD \n\nv1.4 August 13 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n// if (!game.modules.get(\"warpgate\")?.active) return ui.notifications.error(\"Turn Undead requires warpgate module\");\n\nif (args[0].macroPass === \"preambleComplete\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    // I am stealing the activation condition as a string for the creature type I want to hit\n    const activationCondition = args[0].itemData.data.activation.condition.toLowerCase();\n    let immunity = [\"Turn Immunity\"];\n    for (let target of workflow.targets) {\n        let creatureType = target.actor.data.data.details.type;\n        // remove targets that are not creatures (aka PCs etc)\n        if ((creatureType === null) || (creatureType === undefined)) {\n            workflow.targets.delete(target);\n        }\n        // remove creatures that are not undead \n        else if (!([creatureType.value.toLowerCase(), creatureType.subtype.toLowerCase()].includes(activationCondition.toLowerCase()))) {\n            workflow.targets.delete(target);\n        }\n        // remove creatures with turn immunity\n        else if (target.actor.items.find(i => immunity.includes(i.name))) {\n            workflow.targets.delete(target);\n        }\n\n        // check for i, if so give advanatage on tragets next save\n        let resistance = [\"Turn Resistance\"];\n        if (target.actor.items.find(i => resistance.includes(i.name))) {\n            // add resistance to next save \n            await markTurnResistance(target.actor, args);\n        }\n\n        game.user.updateTokenTargets(Array.from(workflow.targets).map(t => t.id));\n    }\n} else if (args[0].macroPass === \"postSave\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const pcActor = workflow.actor;\n\n    let crDestroy = 0.0;\n    if (workflow.targets.size === 0) return;\n    let actorClass = pcActor.classes.cleric.data.data.levels;\n    if (actorClass > 16) crDestroy = 4;\n    else if (actorClass > 13) crDestroy = 3;\n    else if (actorClass > 10) crDestroy = 2;\n    else if (actorClass > 7) crDestroy = 1;\n    else if (actorClass > 4) crDestroy = 0.5;\n\n    // set HP = 0 for all targets of the CR or less that have been turned\n    for (let target of workflow.failedSaves) {\n        if (target.actor.data.data.details.cr < crDestroy) {\n            //let target = failedSave.actor;\n            let maxHP = Number(target.actor.data.data.attributes.hp.max);\n            let updates = {\n                actor: { \"data.attributes.hp.value\": 0, \"data.attributes.hp.max\": maxHP }\n            };\n            let mutateCallbacks = \"\";\n            await warpgate.mutate(target.document, updates, mutateCallbacks, { permanent: true });\n        } else {\n            // set frightened for all those undead above the CR that were not destoryed\n            console.log(\"MACRO TEST | target actor: %O\", target.actor);\n            console.log(\"MACRO TEST | add frightened: %O\", target);\n            let thisActor = target.uuid;\n            game.dfreds.effectInterface.addEffect({ effectName: 'Frightened', thisActor });\n        }\n    }\n    return;\n}\n\n// if the character has resistance to the new damage type, set vulnerability to negate it\nasync function markTurnResistance(target, args) {\n    const effectData = {\n        label: \"Turn Resistance\",\n        icon: \"systems/dnd5e/icons/skills/affliction_21.jpg\",\n        origin: args.uuid,\n        changes: [{\n            \"key\": \"flags.midi-qol.advantage.ability.check.wis\",\n            \"value\": 1,\n            \"mode\": 0,\n            \"priority\": 20\n        }],\n        disabled: false,\n        flags: {\n            dae: {\n                specialDuration: [\"isSave\"]\n            }\n        }\n    }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: target.uuid, effects: [effectData] });\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"testWorld","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"cf":{"id":"temp_92357bvnxs9","path":"Class Features","color":"#0000ff"},"favtab":{"isFavorite":true},"ddbimporter":{"pack":"world.ddb-override","id":"74143","entityTypeId":"222216831","componentId":110,"componentTypeId":12168134,"class":"Cleric","subclass":"Grave Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1},{"level":null,"uses":1}]},"importId":"h0fgg2cviptcizbi","originalItemName":"Channel Divinity: Turn Undead","replaced":true},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}}},"_id":"vHRCjv9s7z5CZ4bZ"}
{"$$deleted":true,"_id":"a3wJFvKvQEiC02P9"}
{"$$deleted":true,"_id":"LShrAAOqkSCIwWUe"}
{"name":"Circle of Mortality","type":"feat","img":"icons/skills/wounds/blood-cells-disease-green.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"You restore maximum possible HP on each dice (instead of rolling) with healing spells to a creature with 0 HP. You learn the spare the dying cantrip, can cast it as a bonus action, and it has a range of 30 ft.","unidentified":""},"source":"XGtE p20","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric: Grave Domain","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"1jud0luaqrwjayvy","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Circle of Mortality,all","priority":"10"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/affliction_10.jpg","label":"Circle of Mortality","origin":"Actor.Uv8E8r17bCEb1o2e.Item.3aDwBUf6nDcPVKz7","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53464","entityTypeId":"222216831","componentId":664,"componentTypeId":12168134,"class":"Cleric","subclass":"Grave Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"4hcm2jmz0inu7t2d","pack":"world.ddb-override","originalItemName":"Circle of Mortality","replaced":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"4895e3a53752db8bb66ed8b7d8a0930920374469","sourceId":"Item.wFx1w4tCFLan9aAc"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Circle of Mortality","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nCircle of Mortality\n\nv1.1 August 6 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"postDamageRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    let targetTokenUuid = args[0].hitTargetUuids[0];\n    let targetToken = await fromUuid(targetTokenUuid);\n    let targetActor = targetToken.actor;\n\n    // if Target HP > 0 return \n    if (targetActor.data.data.attributes.hp.value != 0) return;\n\n    // check to make sure only one target is selected\n    if ((args[0].targetUuids.length < 1) || (args[0].targetUuids.length > 1)) {\n        ui.notifications.error(\"You need to select a single target.\");\n        return;\n    }\n\n    // compute maximum healing for the spell cast\n    let healingRollMax = 0;\n    for (let i = 0; i < workflow.damageRoll.terms.length; i++)\n        if (workflow.damageRoll.terms[i]?.faces) healingRollMax = healingRollMax + (workflow.damageRoll.terms[i].faces * workflow.damageRoll.terms[i].number);\n        else if (workflow.damageRoll.terms[i]?.number) healingRollMax = healingRollMax + workflow.damageRoll.terms[i].number;\n    let bonusHealing = (healingRollMax - workflow.damageRoll.total);\n    await setProperty(workflow, \"BonusHealing\", bonusHealing);\n\n    return;\n\n} else if (args[0].tag === \"DamageBonus\") {\n    console.log(\"MACRO | bonus healing application\");\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    const actorUuid = workflow.tokenUuid;\n    const actorToken = canvas.tokens.get(workflow.tokenId);\n    let bonusHealing = await getProperty(workflow, \"BonusHealing\");\n\n    // Bonus Healing\n    if (bonusHealing > 0) {\n        await setProperty(workflow, \"BonusHealing\", 0);\n        return { damageRoll: `${bonusHealing}[healing]`, flavor: \"Circle of Mortality Bonus Healing\" };\n    } else return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"core":{"sourceId":"Item.edUabd3mcVcUaLtm"},"cf":{"id":"temp_92357bvnxs9"}},"_id":"ojW9MK8zg1MJA2qg"}
{"name":"Divine Fury","type":"feat","img":"icons/magic/fire/projectile-wave-arrow.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"XGtE p11","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Barbarian Zealot Path","recharge":{"value":null,"charged":false},"attunement":0,"equipped":true},"effects":[{"_id":"YJK1tQQIV2Ycrqy0","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Divine Fury","priority":"30"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/magic/fire/projectile-wave-arrow.webp","label":"Divine Fury","origin":"Item.5PUe0GiheEHUomoR","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"a0b62e160e6eaab7dc788375c8e37fea2445d3ba","sourceId":"Item.0dRSE8s0hW8havkd"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Divine Fury","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nDivine Fury | Auto Divine Fury  [there are two items to make this function]\n\nNOTE: I used Tom Posney's MIDI-QOL Sneak Attack / Auto Sneak Attack as a templete for this\n\nUSEAGE : PASSIVE\nPlease place these two items on a Barbarian Zealot the rest is automated\n \nv1.1 August 6 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif ([\"mwak\", \"rwak\"].includes(args[0].item.data.actionType)) {\n    let pcActor = token.actor;\n\n    // Test Class\n    let pcBarbarian = pcActor.getRollData().classes?.barbarian;\n    if (pcBarbarian === null) {\n        ui.notifications.error(\"You are not a Barbarian!\");\n        return;\n    }\n\n    // Test Subclass\n    let pcBarbarianSubclass = pcActor.getRollData().classes.barbarian?.subclass.identifier;\n    if (pcBarbarianSubclass != \"path-of-the-zealot\") {\n        ui.notifications.error(\"You are not a Barbarian Zealot!\");\n        return;\n    }\n\n    // Test if rage is active\n    let effect = await findEffect(token, \"Rage\");\n    if (!effect) {\n        ui.notifications.error(\"You are not Raging!\");\n        return;\n    }\n\n    // Check to see if you have already made a divine fury attack this round\n    if (game.combat) {\n        const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn / 100}`;\n        const lastTime = actor.getFlag(\"midi-qol\", \"divineFuryTime\");\n        if (combatTime === lastTime) return {};  // already used divine fury this round\n    }\n\n    // check to see if autoDivineFury is active, if it is skip the prompt\n    let useDivineFury = getProperty(actor.data, \"flags.dae.autoDivineFury\");\n    if (!useDivineFury) {\n        console.log(\"MACRO | prompt user with dialog to use Divine Fury\");\n        let dialog = new Promise((resolve, reject) => {\n            new Dialog({\n                // localize this text\n                title: \"Conditional Damage\",\n                content: `<p>Use Divine Fury?</p>`,\n                buttons: {\n                    one: {\n                        icon: '<i class=\"fas fa-check\"></i>',\n                        label: \"Confirm\",\n                        callback: () => resolve(true)\n                    },\n                    two: {\n                        icon: '<i class=\"fas fa-times\"></i>',\n                        label: \"Cancel\",\n                        callback: () => { resolve(false) }\n                    }\n                },\n                default: \"two\"\n            }).render(true);\n        });\n        useDivineFury = await dialog;\n    }\n    if (!useDivineFury) return {};  // do not use divine fury\n\n    // the player wants to use divine fury or autoDivineFury is active\n    const diceMult = args[0].isCritical ? 2 : 1;\n    const baseDice = 1;\n    const baseBonus = Math.ceil(pcBarbarian.levels / 2);\n\n    if (game.combat) {\n        const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn / 100}`;\n        const lastTime = actor.getFlag(\"midi-qol\", \"divineFuryTime\");\n        if (combatTime !== lastTime) {\n            await actor.setFlag(\"midi-qol\", \"divineFuryTime\", combatTime)\n        }\n    }\n    return { damageRoll: `${baseDice * diceMult}d6 + ${baseBonus}`, flavor: \"Divine Fury\" };\n}\n\n// Function to test for an effect\nasync function findEffect(target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef => ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.5PUe0GiheEHUomoR"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.269","systemVersion":"1.5.7"},"cf":{"id":"temp_92357bvnxs9","path":"DDB Override#/CF_SEP/Class Features","color":"#000000"},"midi-qol":{"onUseMacroName":""},"midiProperties":{},"ddbimporter":{"pack":"world.ddb-override","id":"1479249","entityTypeId":"222216831","action":true,"componentId":241,"componentTypeId":258900837,"class":"Barbarian","subclass":"Path of the Zealot","importId":"lbsrtmgv1xbfzi20","originalItemName":"Divine Fury","replaced":true}},"_id":"9RmEoC4scNvqbhMM"}
{"name":"Preserve Life","type":"feat","img":"systems/dnd5e/icons/skills/green_09.jpg","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<p><strong>SETUP:</strong></p>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<p> </p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 August 17 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB p194","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":"","type":"lr"},"consume":{"type":"","target":"","amount":5},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"Preserve Life","critical":{"threshold":null,"damage":null},"damage":{"parts":[["5","healing"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Cleric: Life Domain","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10},"attunement":0},"effects":[],"folder":null,"sort":0,"permission":{"ldRsJ6Yp5qPydWA1":3,"default":0},"flags":{"_sheetTab":"description","entityorder":{"order":161},"dynamiceffects":{"effects":[],"alwaysActive":false,"equipActive":false},"favtab":{"isFavourite":true,"isFavorite":true},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Preserve Life","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nPreserve Life\n\nUSE: use this feature AFTER channel divinity: Preserve Life is triggered to create a healing pool\n\nNOTE: PARTS OF THIS AUTOMATION WERE TAKEN FROM \"MidiQOL Sample Items\" SPELL: LAY ON HANDS\nBy Author: Tim Poseney   https://gitlab.com/tposney/midi-qol\n\nv1.0 August 17 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"preItemRoll\") {\n    // get healthpool if not available send a notification\n    let lifehealingpool = actor.getFlag(\"dae\", \"lifehealingpool\");\n    if ((!lifehealingpool) || (!lifehealingpool > 0)) {\n        ui.notifications.warn(\"You either have no healing pool left or you have not used Channel Divinity: Preserve Life...\");\n        return false;\n    }\n\n    // check to make sure there is a target to heal and only one is selected\n    let theTarget = args[0].targets[0];\n    if ((!theTarget) || (args[0].targets.length > 1)) {\n        ui.notifications.warn(\"Please select a target to heal with Preserve Life\");\n        return false;\n    }\n\n    // does not work on undead/constructs - not sure if this is RAW but makes sense given Preserve Life \n    let invalid = [\"undead\", \"construct\"].some(type => (theTarget?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\n    if (invalid) {\n        ui.notifications.warn(\"Preserve Life can't affect undead/constructs\")\n        return false;\n    }\n\n    let targetToken = await fromUuid(args[0].targetUuids[0]);\n    let targetActor = targetToken.actor;\n    //Target can only be healed up to half their HP\n    let targetDamage = ((targetActor.data.data.attributes.hp.max / 2) - targetActor.data.data.attributes.hp.value);\n\n    if (targetDamage <= 0) {\n        ui.notifications.warn(\"Target is at or above half health\");\n        return false;    \n    }\n\n    // prompt for how much to use...\n    let d = new Promise((resolve, reject) => {\n        let theDialog = new Dialog({\n            title: \"Preserve Life\",\n            content: `<p>Your targets current damage level: ${targetDamage}</p>\n                    <p>How many points to use? ${lifehealingpool} left in your Healing Pool<input id=\"mqlohpoints\" type=\"number\" min=\"0\" step=\"1.0\" max=\"${lifehealingpool}\"></input></p>`,\n            buttons: {\n                heal: {\n                    icon: '<p></p><img src = \"icons/magic/life/heart-cross-blue.webp\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>HEAL</p>\",\n                    callback: (html) => { resolve(Math.clamped(Math.floor(Number(html.find('#mqlohpoints')[0].value) / 2), 0, lifehealingpool)); }\n                },\n                abort: {\n                    icon: '<p></p><img src = \"icons/svg/cancel.svg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>CANCEL</p>\",\n                    callback: () => { resolve(false) }\n                },\n            },\n            default: \"abort\",\n        }).render(true);\n    });\n    const consumed = await d;\n    if (!consumed) return false;\n\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const theItem = workflow.item;\n    let updates;\n    if (consumed > 0) {\n        updates = {\n            \"data.consume.amount\": Math.abs(consumed),\n            \"data.damage.parts\": [[`${Math.max(0, consumed)}`, \"healing\"]],\n            \"data.chatFlavor\": \"Preserve Life\"\n        };\n    }\n\n    // remove consumed from pool\n    lifehealingpool = lifehealingpool - consumed;\n    actor.setFlag(\"dae\", \"lifehealingpool\", lifehealingpool);\n\n    return theItem.update(updates);\n}\nreturn true;","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.IM2UCUasJLD5J7Fw"},"scene-packer":{"sourceId":"Item.XxRNblPj8DUHIGvv","hash":"1770f008e89f95032902e1fb641d044b2eaca1c7"},"cf":{"id":"temp_ovon30cu8t"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"_id":"0bI5GyZGnTjmInmA"}
{"_id":"afjSLgPklyhp7BKp","name":"Channel Divinity: Inspiring Smite","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"MOoT p.29","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Paladin: Oath of Glory","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"mj8jXTYFLF8zANxn","changes":[{"key":"macro.itemMacro","mode":0,"value":"ItemMacro","priority":"50"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"icons/magic/life/heart-cross-blue.webp","label":"Inspiring Smite Healing Pool","origin":"Item.D5SPoopIkNLJ3PyB","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false,"selfTarget":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"26c1f5e823e4b4685429ae3b6787d860edb2e1ff","sourceId":"Item.ud948jSrnHLUJQ6d"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.D5SPoopIkNLJ3PyB"},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Inspiring Smite","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nChannel Divinity: Inspiring Smite\n\nUSE: Manually triggered after to hit with divine smite\nCreate a healing pool - roll 2d8 + class level\nStore the healing pool on the character in a DAE variable that terminates at the end of the actors turn\n\nv1.1 August 6 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0] === \"on\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n\n    // Test Class\n    let pcPaladin = pcActor.getRollData().classes?.paladin;\n    if (pcPaladin === null) {\n        ui.notifications.error(\"You are not a Paladin!\");\n        return;\n    }\n\n    // Test Subclass\n    let pcPaladinSubclass = pcActor.getRollData().classes.paladin?.subclass.identifier;\n    if (pcPaladinSubclass != \"oath-of-glory\") {\n        ui.notifications.error(\"You are not a Oath of Glory Paladin!\");\n        return;\n    }\n\n    //roll 2d8 + pcPaladin.levels and store result in flag.dae.healingPool\n    const roll = await(new Roll(`2d8 + ${pcPaladin.levels}`)).roll();\n    pcActor.setFlag(\"dae\", \"healingpool\", roll.total);\n    return;\n\n} else if (args[0] === \"off\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    pcActor.unsetFlag(\"dae\", \"healingpool\");\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"cf":{"id":"temp_92357bvnxs9"},"ddbimporter":{"pack":"world.ddb-override","id":"1731654","entityTypeId":"222216831","componentId":2203085,"componentTypeId":12168134,"class":"Paladin","subclass":"Oath of Glory","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1},{"level":null,"uses":1}]},"importId":"7hbudetkus7tdkj4","originalItemName":"Channel Divinity: Inspiring Smite","replaced":true}}}
{"_id":"8oODTSGeuUPdbqpj","name":"Channel Divinity: Preserve Life","type":"feat","img":"systems/dnd5e/icons/skills/green_09.jpg","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 August 17 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>\n<p> </p>","chat":"","unidentified":""},"source":"PHB p194","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"z5emxm04jk40kp3k","changes":[{"key":"macro.itemMacro","mode":0,"value":"ItemMacro","priority":"20"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"systems/dnd5e/icons/skills/green_09.jpg","label":"Channel Divinity: Preserve Life","origin":"Actor.XymBtQnn8lRHXvt6.Item.hqvE87WW1vGTGreC","transfer":false,"flags":{"dae":{"selfTarget":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53343","entityTypeId":"222216831","componentId":132,"componentTypeId":12168134,"class":"Cleric","subclass":"Life Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"v4ymwgpll4j2cos8"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"787f852a26ecdc449a674c1ac1b1218dc7d845df","sourceId":"Item.gmVYobArn0Oiu2S9"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Preserve Life","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nChannel Divinity: Preserve Life\n\nUSE: Manually triggered Preserve Life to use the available healing pool on the target\nCreate a healing pool \nStore the healing pool on the character in a DAE variable that terminates at the end of the actors turn\n\nv1.0 August 17 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0] === \"on\") {\n    const pcActor = token.actor; \n    // Test Class\n    let pcCleric = pcActor.getRollData().classes?.cleric;\n    if (pcCleric === null) {\n        ui.notifications.error(\"You are not a cleric!\");\n        return;\n    }\n\n    // Test Subclass\n    let pcClericSubclass = pcActor.getRollData().classes.cleric?.subclass.identifier;\n    if (pcClericSubclass != \"life-domain\") {\n        ui.notifications.error(\"You are not a Life Domain cleric!\");\n        return;\n    }\n\n    //5x cleric level healing pool\n    const pool = 5 * pcCleric.levels;\n    pcActor.setFlag(\"dae\", \"lifehealingpool\", pool);\n    return;\n\n} else if (args[0] === \"off\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    pcActor.unsetFlag(\"dae\", \"lifehealingpool\");\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"core":{"sourceId":"Item.bPoUIdDoPJd5Tc2X"}}}
{"_id":"ojW9MK8zg1MJA2qg","name":"Circle of Mortality","type":"feat","img":"icons/skills/wounds/blood-cells-disease-green.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"You restore maximum possible HP on each dice (instead of rolling) with healing spells to a creature with 0 HP. You learn the spare the dying cantrip, can cast it as a bonus action, and it has a range of 30 ft.","unidentified":""},"source":"XGtE p20","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric: Grave Domain","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"1jud0luaqrwjayvy","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Circle of Mortality,all","priority":"10"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/affliction_10.jpg","label":"Circle of Mortality","origin":"Actor.Uv8E8r17bCEb1o2e.Item.3aDwBUf6nDcPVKz7","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53464","entityTypeId":"222216831","componentId":664,"componentTypeId":12168134,"class":"Cleric","subclass":"Grave Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"4hcm2jmz0inu7t2d","pack":"world.ddb-override","originalItemName":"Circle of Mortality","replaced":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"4895e3a53752db8bb66ed8b7d8a0930920374469","sourceId":"Item.wFx1w4tCFLan9aAc"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Circle of Mortality","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nCircle of Mortality\n\nv1.1 August 6 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"postDamageRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    let targetTokenUuid = args[0].hitTargetUuids[0];\n    let targetToken = await fromUuid(targetTokenUuid);\n    let targetActor = targetToken.actor;\n\n    // if Target HP > 0 return \n    if (targetActor.data.data.attributes.hp.value != 0) return;\n\n    // check to make sure only one target is selected\n    if ((args[0].targetUuids.length < 1) || (args[0].targetUuids.length > 1)) {\n        ui.notifications.error(\"You need to select a single target.\");\n        return;\n    }\n\n    // compute maximum healing for the spell cast\n    let healingRollMax = 0;\n    for (let i = 0; i < workflow.damageRoll.terms.length; i++)\n        if (workflow.damageRoll.terms[i]?.faces) healingRollMax = healingRollMax + (workflow.damageRoll.terms[i].faces * workflow.damageRoll.terms[i].number);\n        else if (workflow.damageRoll.terms[i]?.number) healingRollMax = healingRollMax + workflow.damageRoll.terms[i].number;\n    let bonusHealing = (healingRollMax - workflow.damageRoll.total);\n    await setProperty(workflow, \"BonusHealing\", bonusHealing);\n\n    return;\n\n} else if (args[0].tag === \"DamageBonus\") {\n    console.log(\"MACRO | bonus healing application\");\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    const actorUuid = workflow.tokenUuid;\n    const actorToken = canvas.tokens.get(workflow.tokenId);\n    let bonusHealing = await getProperty(workflow, \"BonusHealing\");\n\n    // Bonus Healing\n    if (bonusHealing > 0) {\n        await setProperty(workflow, \"BonusHealing\", 0);\n        return { damageRoll: `${bonusHealing}[healing]`, flavor: \"Circle of Mortality Bonus Healing\" };\n    } else return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"core":{"sourceId":"Item.edUabd3mcVcUaLtm"},"cf":{"id":"temp_92357bvnxs9"}}}
{"_id":"vHRCjv9s7z5CZ4bZ","name":"Channel Divinity: Turn Undead","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.4 August 13 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB p194","activation":{"type":"action","cost":1,"condition":"undead"},"duration":{"value":null,"units":"inst"},"target":{"value":30,"width":null,"units":"ft","type":"creature"},"range":{"value":null,"long":null,"units":"spec"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":null},"ability":"","actionType":"other","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"3adv1867dmy3nrmn","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.\"Channel Divinity: Turn Undead\",all","priority":"1"}],"disabled":false,"duration":{"startTime":null,"seconds":60},"icon":"systems/dnd5e/icons/skills/yellow_19.jpg","label":"Channel Divinity: Turn Undead","origin":"Actor.4okcHmPmM1iBwyFs.Item.0Gd8ADfg2sOZyTyq","transfer":false,"flags":{"core":{"statusId":"true"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false,"selfTarget":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"d867b58edfb30baa756149a8ecda979c6fbed5bb","sourceId":"Item.Ssp4UDxq20tX43xo"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false,"forceCEOff":false,"onUseMacroName":"[all]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.r5SIR5IwtjxLYHvO"},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Turn Undead","type":"script","author":"KBnld8ZLhMcDSTkg","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nCleric: Turn Undead\n\nUSEAGE : ACTIVATE TO CHANNEL DIVINITY : TURN UNDEAD\nClick on this item to activate the turn undead.  \nPlease remember to setup usage consumption in the itme itself.  \n\nThis Macro requires a GAME LEVEL MACRO: MAKE DEAD \n\nv1.4 August 13 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n// if (!game.modules.get(\"warpgate\")?.active) return ui.notifications.error(\"Turn Undead requires warpgate module\");\n\nif (args[0].macroPass === \"preambleComplete\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    // I am stealing the activation condition as a string for the creature type I want to hit\n    const activationCondition = args[0].itemData.data.activation.condition.toLowerCase();\n    let immunity = [\"Turn Immunity\"];\n    for (let target of workflow.targets) {\n        let creatureType = target.actor.data.data.details.type;\n        // remove targets that are not creatures (aka PCs etc)\n        if ((creatureType === null) || (creatureType === undefined)) {\n            workflow.targets.delete(target);\n        }\n        // remove creatures that are not undead \n        else if (!([creatureType.value.toLowerCase(), creatureType.subtype.toLowerCase()].includes(activationCondition.toLowerCase()))) {\n            workflow.targets.delete(target);\n        }\n        // remove creatures with turn immunity\n        else if (target.actor.items.find(i => immunity.includes(i.name))) {\n            workflow.targets.delete(target);\n        }\n\n        // check for i, if so give advanatage on tragets next save\n        let resistance = [\"Turn Resistance\"];\n        if (target.actor.items.find(i => resistance.includes(i.name))) {\n            // add resistance to next save \n            await markTurnResistance(target.actor, args);\n        }\n\n        game.user.updateTokenTargets(Array.from(workflow.targets).map(t => t.id));\n    }\n} else if (args[0].macroPass === \"postSave\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const pcActor = workflow.actor;\n\n    let crDestroy = 0.0;\n    if (workflow.targets.size === 0) return;\n    let actorClass = pcActor.classes.cleric.data.data.levels;\n    if (actorClass > 16) crDestroy = 4;\n    else if (actorClass > 13) crDestroy = 3;\n    else if (actorClass > 10) crDestroy = 2;\n    else if (actorClass > 7) crDestroy = 1;\n    else if (actorClass > 4) crDestroy = 0.5;\n\n    // set HP = 0 for all targets of the CR or less that have been turned\n    for (let target of workflow.failedSaves) {\n        if (target.actor.data.data.details.cr < crDestroy) {\n            //let target = failedSave.actor;\n            let maxHP = Number(target.actor.data.data.attributes.hp.max);\n            let updates = {\n                actor: { \"data.attributes.hp.value\": 0, \"data.attributes.hp.max\": maxHP }\n            };\n            let mutateCallbacks = \"\";\n            await warpgate.mutate(target.document, updates, mutateCallbacks, { permanent: true });\n        } else {\n            // set frightened for all those undead above the CR that were not destoryed\n            console.log(\"MACRO TEST | target actor: %O\", target.actor);\n            console.log(\"MACRO TEST | add frightened: %O\", target);\n            let thisActor = target.uuid;\n            game.dfreds.effectInterface.addEffect({ effectName: 'Frightened', thisActor });\n        }\n    }\n    return;\n}\n\n// if the character has resistance to the new damage type, set vulnerability to negate it\nasync function markTurnResistance(target, args) {\n    const effectData = {\n        label: \"Turn Resistance\",\n        icon: \"systems/dnd5e/icons/skills/affliction_21.jpg\",\n        origin: args.uuid,\n        changes: [{\n            \"key\": \"flags.midi-qol.advantage.ability.check.wis\",\n            \"value\": 1,\n            \"mode\": 0,\n            \"priority\": 20\n        }],\n        disabled: false,\n        flags: {\n            dae: {\n                specialDuration: [\"isSave\"]\n            }\n        }\n    }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: target.uuid, effects: [effectData] });\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"testWorld","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"cf":{"id":"temp_92357bvnxs9","path":"Class Features","color":"#0000ff"},"favtab":{"isFavorite":true},"ddbimporter":{"pack":"world.ddb-override","id":"74143","entityTypeId":"222216831","componentId":110,"componentTypeId":12168134,"class":"Cleric","subclass":"Grave Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1},{"level":null,"uses":1}]},"importId":"h0fgg2cviptcizbi","originalItemName":"Channel Divinity: Turn Undead","replaced":true},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}}}}
{"_id":"9RmEoC4scNvqbhMM","name":"Divine Fury","type":"feat","img":"icons/magic/fire/projectile-wave-arrow.webp","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 May 7 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"XGtE p11","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Barbarian Zealot Path","recharge":{"value":null,"charged":false},"attunement":0,"equipped":true},"effects":[{"_id":"YJK1tQQIV2Ycrqy0","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Divine Fury","priority":"30"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/magic/fire/projectile-wave-arrow.webp","label":"Divine Fury","origin":"Item.5PUe0GiheEHUomoR","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"a0b62e160e6eaab7dc788375c8e37fea2445d3ba","sourceId":"Item.0dRSE8s0hW8havkd"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Divine Fury","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nDivine Fury | Auto Divine Fury  [there are two items to make this function]\n\nNOTE: I used Tom Posney's MIDI-QOL Sneak Attack / Auto Sneak Attack as a templete for this\n\nUSEAGE : PASSIVE\nPlease place these two items on a Barbarian Zealot the rest is automated\n \nv1.1 August 6 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif ([\"mwak\", \"rwak\"].includes(args[0].item.data.actionType)) {\n    let pcActor = token.actor;\n\n    // Test Class\n    let pcBarbarian = pcActor.getRollData().classes?.barbarian;\n    if (pcBarbarian === null) {\n        ui.notifications.error(\"You are not a Barbarian!\");\n        return;\n    }\n\n    // Test Subclass\n    let pcBarbarianSubclass = pcActor.getRollData().classes.barbarian?.subclass.identifier;\n    if (pcBarbarianSubclass != \"path-of-the-zealot\") {\n        ui.notifications.error(\"You are not a Barbarian Zealot!\");\n        return;\n    }\n\n    // Test if rage is active\n    let effect = await findEffect(token, \"Rage\");\n    if (!effect) {\n        ui.notifications.error(\"You are not Raging!\");\n        return;\n    }\n\n    // Check to see if you have already made a divine fury attack this round\n    if (game.combat) {\n        const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn / 100}`;\n        const lastTime = actor.getFlag(\"midi-qol\", \"divineFuryTime\");\n        if (combatTime === lastTime) return {};  // already used divine fury this round\n    }\n\n    // check to see if autoDivineFury is active, if it is skip the prompt\n    let useDivineFury = getProperty(actor.data, \"flags.dae.autoDivineFury\");\n    if (!useDivineFury) {\n        console.log(\"MACRO | prompt user with dialog to use Divine Fury\");\n        let dialog = new Promise((resolve, reject) => {\n            new Dialog({\n                // localize this text\n                title: \"Conditional Damage\",\n                content: `<p>Use Divine Fury?</p>`,\n                buttons: {\n                    one: {\n                        icon: '<i class=\"fas fa-check\"></i>',\n                        label: \"Confirm\",\n                        callback: () => resolve(true)\n                    },\n                    two: {\n                        icon: '<i class=\"fas fa-times\"></i>',\n                        label: \"Cancel\",\n                        callback: () => { resolve(false) }\n                    }\n                },\n                default: \"two\"\n            }).render(true);\n        });\n        useDivineFury = await dialog;\n    }\n    if (!useDivineFury) return {};  // do not use divine fury\n\n    // the player wants to use divine fury or autoDivineFury is active\n    const diceMult = args[0].isCritical ? 2 : 1;\n    const baseDice = 1;\n    const baseBonus = Math.ceil(pcBarbarian.levels / 2);\n\n    if (game.combat) {\n        const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn / 100}`;\n        const lastTime = actor.getFlag(\"midi-qol\", \"divineFuryTime\");\n        if (combatTime !== lastTime) {\n            await actor.setFlag(\"midi-qol\", \"divineFuryTime\", combatTime)\n        }\n    }\n    return { damageRoll: `${baseDice * diceMult}d6 + ${baseBonus}`, flavor: \"Divine Fury\" };\n}\n\n// Function to test for an effect\nasync function findEffect(target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef => ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.5PUe0GiheEHUomoR"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.269","systemVersion":"1.5.7"},"cf":{"id":"temp_92357bvnxs9","path":"DDB Override#/CF_SEP/Class Features","color":"#000000"},"midi-qol":{"onUseMacroName":""},"midiProperties":{},"ddbimporter":{"pack":"world.ddb-override","id":"1479249","entityTypeId":"222216831","action":true,"componentId":241,"componentTypeId":258900837,"class":"Barbarian","subclass":"Path of the Zealot","importId":"lbsrtmgv1xbfzi20","originalItemName":"Divine Fury","replaced":true}}}
{"_id":"0bI5GyZGnTjmInmA","name":"Preserve Life","type":"feat","img":"systems/dnd5e/icons/skills/green_09.jpg","data":{"description":{"value":"<p>[PLACE YOUR DESCRIPTION HERE]</p>\n<p> </p>\n<p><strong>SETUP:</strong></p>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<p> </p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 August 17 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB p194","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":"","type":"lr"},"consume":{"type":"","target":"","amount":5},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"Preserve Life","critical":{"threshold":null,"damage":null},"damage":{"parts":[["5","healing"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Cleric: Life Domain","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10},"attunement":0},"effects":[],"folder":null,"sort":0,"permission":{"ldRsJ6Yp5qPydWA1":3,"default":0},"flags":{"_sheetTab":"description","entityorder":{"order":161},"dynamiceffects":{"effects":[],"alwaysActive":false,"equipActive":false},"favtab":{"isFavourite":true,"isFavorite":true},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Preserve Life","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nPreserve Life\n\nUSE: use this feature AFTER channel divinity: Preserve Life is triggered to create a healing pool\n\nNOTE: PARTS OF THIS AUTOMATION WERE TAKEN FROM \"MidiQOL Sample Items\" SPELL: LAY ON HANDS\nBy Author: Tim Poseney   https://gitlab.com/tposney/midi-qol\n\nv1.0 August 17 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"preItemRoll\") {\n    // get healthpool if not available send a notification\n    let lifehealingpool = actor.getFlag(\"dae\", \"lifehealingpool\");\n    if ((!lifehealingpool) || (!lifehealingpool > 0)) {\n        ui.notifications.warn(\"You either have no healing pool left or you have not used Channel Divinity: Preserve Life...\");\n        return false;\n    }\n\n    // check to make sure there is a target to heal and only one is selected\n    let theTarget = args[0].targets[0];\n    if ((!theTarget) || (args[0].targets.length > 1)) {\n        ui.notifications.warn(\"Please select a target to heal with Preserve Life\");\n        return false;\n    }\n\n    // does not work on undead/constructs - not sure if this is RAW but makes sense given Preserve Life \n    let invalid = [\"undead\", \"construct\"].some(type => (theTarget?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\n    if (invalid) {\n        ui.notifications.warn(\"Preserve Life can't affect undead/constructs\")\n        return false;\n    }\n\n    let targetToken = await fromUuid(args[0].targetUuids[0]);\n    let targetActor = targetToken.actor;\n    //Target can only be healed up to half their HP\n    let targetDamage = ((targetActor.data.data.attributes.hp.max / 2) - targetActor.data.data.attributes.hp.value);\n\n    if (targetDamage <= 0) {\n        ui.notifications.warn(\"Target is at or above half health\");\n        return false;    \n    }\n\n    // prompt for how much to use...\n    let d = new Promise((resolve, reject) => {\n        let theDialog = new Dialog({\n            title: \"Preserve Life\",\n            content: `<p>Your targets current damage level: ${targetDamage}</p>\n                    <p>How many points to use? ${lifehealingpool} left in your Healing Pool<input id=\"mqlohpoints\" type=\"number\" min=\"0\" step=\"1.0\" max=\"${lifehealingpool}\"></input></p>`,\n            buttons: {\n                heal: {\n                    icon: '<p></p><img src = \"icons/magic/life/heart-cross-blue.webp\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>HEAL</p>\",\n                    callback: (html) => { resolve(Math.clamped(Math.floor(Number(html.find('#mqlohpoints')[0].value) / 2), 0, lifehealingpool)); }\n                },\n                abort: {\n                    icon: '<p></p><img src = \"icons/svg/cancel.svg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>CANCEL</p>\",\n                    callback: () => { resolve(false) }\n                },\n            },\n            default: \"abort\",\n        }).render(true);\n    });\n    const consumed = await d;\n    if (!consumed) return false;\n\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const theItem = workflow.item;\n    let updates;\n    if (consumed > 0) {\n        updates = {\n            \"data.consume.amount\": Math.abs(consumed),\n            \"data.damage.parts\": [[`${Math.max(0, consumed)}`, \"healing\"]],\n            \"data.chatFlavor\": \"Preserve Life\"\n        };\n    }\n\n    // remove consumed from pool\n    lifehealingpool = lifehealingpool - consumed;\n    actor.setFlag(\"dae\", \"lifehealingpool\", lifehealingpool);\n\n    return theItem.update(updates);\n}\nreturn true;","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.IM2UCUasJLD5J7Fw"},"scene-packer":{"sourceId":"Item.XxRNblPj8DUHIGvv","hash":"1770f008e89f95032902e1fb641d044b2eaca1c7"},"cf":{"id":"temp_ovon30cu8t"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}}}
