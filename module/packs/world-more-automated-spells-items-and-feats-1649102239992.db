{"name":"Maneuvers: Lunging Attack","type":"feat","img":"systems/dnd5e/icons/skills/yellow_37.jpg","data":{"description":{"value":"<p>When you make a melee weapon attack on your turn, you can expend one superiority die to increase your reach for that attack by 5 feet. If you hit, you add the superiority die to the attack’s damage roll.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong><span style=\"color:#169179\">ACTIVATE BEFORE ATTACK</span></summary>\n<p>*** This maneuver does not work with MIDI-QOL Range checking, awaiting patch ***</p>\n<p>This Maneuver must be activated BEFORE the character makes an attack.  This will setup any bonuses and effects on the TARGET character.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.8 March 15 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"51gy6rzi5b0s0bws","changes":[{"key":"data.bonuses.mwak.damage","mode":2,"value":"@flags.dae.SuperiorityDie","priority":"1"},{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Maneuvers: Lunging Attack,preItemRoll","priority":"10"}],"disabled":false,"duration":{"rounds":1,"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_37.jpg","label":"Maneuvers: Lunging Attack","origin":"Actor.67GUmdTadYmGXD8W.Item.hkchEm8jxUTaR2Ng","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Attack:mwak"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.bonuses.mwak.damage","flags.midi-qol.onUseMacroName"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"86f36af221c43319a4f3b0a98ea3253dd8a89c4c","sourceId":"Item.BVBc1irRInxd6Ubu"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Lunging Attack","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nFighter Battlemaster Maneuvers: Lunging Attack\n\n*** AWAITING SOLUTION FROM MIDI TO GET THIS TO WORK WITH RANGE CHECKING ***\n\nUSEAGE : ACTIVATE BEFORE ATTACK\nThis Maneuver must be activated BEFORE the character makes an attack.  \nThis will setup any bonuses and effects on the TARGET character.  \nA Superiority Die will be expended immediately.\n \nMANEUVER DESCRIPTION:\nWhen you make a melee weapon attack on your turn, you can expend one \nsuperiority die to increase your reach for that attack by 5 feet. \nIf you hit, you add the superiority die to the attack’s damage roll.\n\nv0.4 March 31 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\n// Activate on preActiveEffects\nif (args[0].macroPass === \"preItemRoll\") {\n    \n    // Item itself defining the workflow \n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    \n    // make sure the attempted hit was made with a melee weapon attack\n    if ((theItem != null) && (theItem.name != \"Maneuvers: Lunging Attack\")) {\n        if (![\"mwak\"].includes(args[0].item.data.actionType)) {\n            ui.notifications.error(\"Lunging Attack only works with a melee weapon attack\");  \n            await incrementResource (pcActor, \"Superiority Dice\", 1);\n            return;       \n        }\n        else {\n            let range = theItem.data.data.range.value;\n            theItem.data.data.range.value = (range + 5);\n        }\n    }\n}\nreturn;\n\n//---------------------------------- MY FUNCTIONS -------------------------------------------\n\n// Increment available resource\nasync function incrementResource (testActor, resourceName, numValue) {\n    let actorDup = duplicate(testActor.data._source);\n    let resources = Object.values(actorDup.data.resources);\n    let foundResource = resources.find(i => i.label.toLowerCase() === resourceName.toLowerCase());\n    if (foundrResource) {\n        foundResource.value = foundResource.value + numValue;\n        await testActor.update(actorDup); \n    } else ui.notifications.error(\"You have not setup a Superiority Dice resource.\");\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"2YIkrUcGe2x01dvV"}
{"name":"Maneuvers: Ambush","type":"feat","img":"systems/dnd5e/icons/skills/shadow_11.jpg","data":{"description":{"value":"<p>When you make a Dexterity (<a class=\"tooltip-hover skill-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/using-ability-scores#Stealth\" data-tooltip-href=\"//www.dndbeyond.com/skills/5-tooltip?disable-webm=1&amp;disable-webm=1\">Stealth</a>) check or an initiative roll, you can expend one superiority die and add the die to the roll, provided you aren’t <a class=\"tooltip-hover condition-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/appendix-a-conditions#Incapacitated\" data-tooltip-href=\"//www.dndbeyond.com/conditions/7-tooltip?disable-webm=1&amp;disable-webm=1\">incapacitated</a>.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE ANYTIME</span></summary>\n<p>This is a utility Maneuver and can be used whenever your character can take an action.  This will setup any bonuses and effects on the TARGET actor.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 24 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"TCoE p42","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"8mjpwr1wsce7hnw0","changes":[{"key":"data.attributes.init.bonus","mode":2,"value":"+ @flags.dae.SuperiorityDie","priority":"1"},{"key":"data.skills.ste.bonuses.check","mode":2,"value":"+ @flags.dae.SuperiorityDie","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/shadow_11.jpg","label":"Maneuvers: Ambush","origin":"Actor.67GUmdTadYmGXD8W.Item.0RU6a1fysK70I7Zy","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnStart","isSkill.ste"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.attributes.init.bonus","data.skills.ste.bonuses.check"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"5d5bd9a6bef4565deeddfccb2b978b42c35ffad4","sourceId":"Item.Be8MCRs13BHXx24W"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Brace","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"2wE7ugAbR6bC93Cr"}
{"name":"Maneuvers: Sweeping Attack","type":"feat","img":"systems/dnd5e/icons/skills/yellow_37.jpg","data":{"description":{"value":"<p>When you hit a creature with a melee weapon attack, you can expend one superiority die to attempt to damage another creature with the same attack. Choose another creature within 5 feet of the original target and within your reach. If the original attack roll would hit the second creature, it takes damage equal to the number you roll on your superiority die. The damage is of the same type dealt by the original attack.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE BEFORE ATTACK</span></summary>\n<p>This Maneuver must be activated BEFORE the character makes an attack.  This will setup any bonuses and effects on the TARGET character.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.  After the first to hit, target the second Target and activate this Maneuver to apply the damage.  To Hit on the second target is manual.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.8 March 23 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"util","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["0 + @flags.dae.SuperiorityDie[Superiority]",""]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"31a9be3c635eb3b1e3cec86f3d1ceabb5e7a3d3b","sourceId":"Item.5me1pDstKTkmvSVp"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Brace","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"4RDG6CSjhjRfLHE2"}
{"name":"Superiority Die","type":"feat","img":"systems/dnd5e/icons/items/inventory/dice.jpg","data":{"description":{"value":"<p>You learn maneuvers that are fueled by superiority dice. Maneuvers enhance an attack in some way. You have 5d8 superiority dice per short rest.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">PASSIVE</span></summary>\n<p>This item must be on the character for Manuevers to function.  It does not do anything directly but is a helper effect to determine the Battle Master Hit Die (d8, d10, d12) based on level.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 15 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"You learn maneuvers that are fueled by superiority dice. Maneuvers enhance an attack in some way. You have 5d8 superiority dice per short rest.","unidentified":""},"source":"PHB p74","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"UgB9349LhJU4nKsd","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":"20"}],"disabled":false,"duration":{"startTime":null,"startRound":121,"startTurn":3},"icon":"systems/dnd5e/icons/items/inventory/dice.jpg","label":"Superiority Die","origin":"Item.H14LgNk3j1O3e3FV","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"1023","entityTypeId":"222216831","componentId":209,"componentTypeId":12168134,"class":"Fighter","subclass":"Battle Master","dndbeyond":{"levelScale":{"id":12,"level":7,"description":"d8","dice":{"diceCount":5,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"5d8"},"fixedValue":null},"levelScales":[{"id":11,"level":1,"description":"d8","dice":{"diceCount":4,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"4d8"},"fixedValue":null},{"id":12,"level":7,"description":"d8","dice":{"diceCount":5,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"5d8"},"fixedValue":null},{"id":13,"level":10,"description":"d10","dice":{"diceCount":5,"diceValue":10,"diceMultiplier":null,"fixedValue":null,"diceString":"5d10"},"fixedValue":null},{"id":14,"level":15,"description":"d10","dice":{"diceCount":6,"diceValue":10,"diceMultiplier":null,"fixedValue":null,"diceString":"6d10"},"fixedValue":null},{"id":15,"level":18,"description":"d12","dice":{"diceCount":6,"diceValue":12,"diceMultiplier":null,"fixedValue":null,"diceString":"6d12"},"fixedValue":null}],"limitedUse":[{"level":null,"uses":1}]},"importId":"ye6nz9f4x9n3v7lu","ignoreIcon":true,"ignoreItemImport":true,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"scene-packer":{"hash":"13603ca38394d51222bd93b412aa5902d357a18c","sourceId":"Item.WN2QuTIsdGblH38o"},"core":{"sourceId":"Item.8gdA6c8j5GnkX33K"},"itemacro":{"macro":{"data":{"_id":null,"name":"Superiority Die","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nFighter Battlemaster : Superiority Die\n\nUSEAGE : PASSIVE\nThis item must be on the character for Manuevers to function.  \nIt does not do anything directly but is a helper effect to determine the Battle Master Hit Die (d8, d10, d12) based on level.\n \nMANEUVER DESCRIPTION:\nYou learn maneuvers that are fueled by superiority dice. \nManeuvers enhance an attack in some way. You have 5d8 superiority dice per short rest.\n\nv0.6 March 25 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0] === \"on\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    let fighterLevel = testClass (pcActor, \"fighter\", \"Battle Master\", 3)?.levels ?? 0;\n    if (!fighterLevel) {\n        ui.notifications.error(\"You are not a fighter battle master of at least 3rd level.\");\n        return;\n    }\n    let flagData;\n    if (fighterLevel > 17) flagData = \"+ 1d12\";\n    else if (fighterLevel > 9) flagData = \"+ 1d10\";\n    else if (fighterLevel > 0) flagData = \"+ 1d8\";\n    pcActor.setFlag(\"dae\", \"SuperiorityDie\", flagData)    \n\n} else if (args[0] === \"off\") {\n    pcActor.unsetFlag(\"dae\", \"SuperiorityDie\");\n}\n\n// Test PC Class, Subclass and Class Level\n// RETURN the class object (TRUE) or null (FALSE)\nfunction testClass (testActor, className, subClassName, levels) {\n    let theClass = testActor.data.data.classes[className] ;\n    if (theClass) {\n        if ((levels > 0) && (theClass.levels >= levels)) {\n            if (subClassName === null || (theClass.subclass === subClassName)) {\n                return theClass;\n            }\n        }\n    }\n    return null;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"saltmarsh","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"favtab":{"isFavorite":true},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"8tVHSXYQgDjZLM2o"}
{"name":"Maneuvers: Feinting Attack","type":"feat","img":"systems/dnd5e/icons/skills/yellow_37.jpg","data":{"description":{"value":"<p>You can expend one superiority die and use a bonus action on your turn to feint, choosing one creature within 5 feet of you as your target. You have <a href=\"https://www.dndbeyond.com/sources/basic-rules/using-ability-scores#AdvantageandDisadvantage\" data-tooltip-href=\"//www.dndbeyond.com/rules/96-tooltip?disable-webm=1&amp;disable-webm=1\">advantage</a> on your next attack roll against that creature this turn. If that attack hits, add the superiority die to the attack’s damage roll.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong><span style=\"color:#169179\">ACTIVATE BEFORE ATTACK</span></summary>\n<p>This Maneuver must be activated BEFORE the character makes an attack.  This will setup any bonuses and effects on the TARGET character.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 18 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"tyr9bqr24wew5lex","changes":[{"key":"flags.midi-qol.advantage.attack.mwak","mode":0,"value":"1","priority":"0"},{"key":"data.bonuses.mwak.damage","mode":2,"value":"@flags.dae.SuperiorityDie","priority":"5"}],"disabled":false,"duration":{"startTime":null,"rounds":1},"icon":"systems/dnd5e/icons/skills/yellow_37.jpg","label":"Maneuvers: Feinting Attack","origin":"Actor.67GUmdTadYmGXD8W.Item.EbURPL9F8boGsK20","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Attack:mwak"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.advantage.attack.mwak","data.bonuses.mwak.damage"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"13bcdd7ca655d753c4fa7d019e2830efcc5f8f42","sourceId":"Item.Nn4yNXkMfro80H43"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Brace","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"B5EAZcCXkzhLYyp3"}
{"name":"Maneuvers: Riposte","type":"feat","img":"systems/dnd5e/icons/skills/yellow_37.jpg","data":{"description":{"value":"<p>When a creature misses you with a melee attack, you can use your reaction and expend one superiority die to make a melee weapon attack against the creature. If you hit, you add the superiority die to the attack’s damage roll.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE BEFORE ATTACK</span></summary>\n<p>This Maneuver must be activated BEFORE the character makes an attack.  This will setup any bonuses and effects on the TARGET character.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 22 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"When a creature misses you with a melee attack, you can use your reaction and expend one superiority die to make a melee weapon attack against it (add the superiority die to the attack’s damage roll on hit).\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>When a creature misses you with a melee attack, you can use your reaction and expend one superiority die to make a melee weapon attack against the creature. If you hit, you add the superiority die to the attack’s damage roll.</p>\n  <p></p>\n</details>","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"w2qe6rnd1i9b1wch","changes":[{"key":"data.bonuses.mwak.damage","mode":2,"value":"@flags.dae.SuperiorityDie","priority":"20"},{"key":"data.bonuses.rwak.damage","mode":2,"value":"@flags.dae.SuperiorityDie","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":1},"icon":"systems/dnd5e/icons/skills/yellow_37.jpg","label":"Maneuvers: Riposte","origin":"Actor.67GUmdTadYmGXD8W.Item.bym5FEbnUSgBlVvn","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Attack:mwak","1Attack:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.bonuses.mwak.damage","data.bonuses.rwak.damage"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53568","entityTypeId":"222216831","componentId":20,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"2fa32f821eff86e04664967dfc70c55a53430ac1","sourceId":"Item.sJywZ6yVHMiKuz1s"},"favtab":{"isFavorite":true},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Riposte","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.UEksWqqwtvXm3oXs"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"C0WKqWhs2kGDnuM5"}
{"name":"Maneuvers: Grappling Strike","type":"feat","img":"systems/dnd5e/icons/skills/red_13.jpg","data":{"description":{"value":"<p>Immediately after you hit a creature with a melee attack on your turn, you can expend one superiority die and then try to grapple the target as a bonus action (see the <em><a class=\"sourcebook\" title=\"Player’s Handbook\" href=\"https://www.dndbeyond.com/sources/phb\">Player’s Handbook</a></em> for rules on <a title=\"grappling\" href=\"https://www.dndbeyond.com/sources/phb/combat#Grappling\" data-content-chunk-id=\"256dfd56-6e59-42de-8827-3c1dc108fa5c\">grappling</a>). Add the superiority die to your Strength (<a class=\"tooltip-hover skill-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/using-ability-scores#Athletics\" data-tooltip-href=\"//www.dndbeyond.com/skills/2-tooltip?disable-webm=1&amp;disable-webm=1\">Athletics</a>) check.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE AFTER ATTACK</span></summary>\n<p>This Maneuver must be activated AFTER the character makes an attack and knows that a HIT was successful.  This will activate any bonuses, saves, effects and extra damage to the TARGET.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 27 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to knock the target down. You add the superiority die to the attack’s damage roll, and if the target is Large or smaller, it must make a Strength saving throw. On a failed save, you knock the target @Compendium[dnd5e.rules.ZkXz0qdkNBkKE6tN]{prone}.</p><h3>Summary</h3>When you hit with a weapon attack, you can expend one superiority die to add the total to the damage roll, and if the target is Large or smaller, it must make a STR saving throw (DC +16). On failure, you knock the target @Compendium[dnd5e.rules.Prone]{prone}.","unidentified":""},"source":"TCoE p42","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"str","actionType":"save","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"str","dc":null,"scaling":"flat"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"z6c1xhx4agrwbd3z","changes":[{"key":"data.attributes.movement.all","mode":0,"value":"0","priority":"5"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/dfreds-convenient-effects/images/grappled.svg","label":"Grappled","origin":"Actor.67GUmdTadYmGXD8W.Item.uIJSbACjp9yNcSdf","transfer":false,"flags":{"core":{"statusId":"Convenient Effect: Grappled"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.movement.all"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53570","entityTypeId":"222216831","componentId":22,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"ye6nz9f4x9n3v7lu","ignoreIcon":true,"ignoreItemImport":true,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[all]ItemMacro","overTimeSkillRoll":"ath"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Grappling Strike","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nFighter Battlemaster Maneuvers: Grappling Strike\n\nUSEAGE : ACTIVATE AFTER ATTACK\nThis Maneuver must be activated AFTER the character makes an attack and knows that a HIT was successful.  \nThis will activate any bonuses, saves, effects and extra damage to the TARGET.  \nA Superiority Die will be expended immediately.\n\n \nMANEUVER DESCRIPTION:\nImmediately after you hit a creature with a melee attack on your turn, you can expend one superiority die \nand then try to grapple the target as a bonus action (see the Player’s Handbook for rules on grappling). \nAdd the superiority die to your Strength (Athletics) check.\n\nv0.5 March 31 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"preSave\")  {\n\n    // define Actor, Target and Item\n    const pcActor = MidiQOL.MQfromActorUuid(args[0].actorUuid);\n    const targetActor = args[0].targets[0].actor;\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n\n    // check to make sure only one target is selected\n    if ((args[0].targetUuids.length < 1) || (args[0].targetUuids.length > 1)) {\n        ui.notifications.error(\"You need to select a single target.\");\n        await incrementResource (pcActor, \"Superiority Dice\", 1);\n        return;\n    }\n\n    let superiorityDie = pcActor.getFlag(\"dae\", \"SuperiorityDie\");\n    if (superiorityDie === null) {\n        ui.notifications.error(\"Superiority Die feature is missing on the character sheet.\");\n        await incrementResource (pcActor, \"Superiority Dice\", 1);\n        return;\n    }\n\n    // Set the DC and setup the saving throw\n    let pcAthSkillTotal = pcActor.data.data.skills[\"ath\"].total;\n    const roll = await (new Roll(`1d20 + ${pcAthSkillTotal} + ${superiorityDie}`)).roll(); \n    theItem.data.data.save.dc = roll.total;\n    theItem.data.data.save.scaling = \"flat\";\n\n    let skill = \"acr\";\n    if (targetActor.data.data.skills.ath.passive > targetActor.data.data.skills.acr.passive) skill = \"ath\";\n    setProperty(theItem.data.flags, \"midi-qol.overTimeSkillRoll\", skill);\n\n} else if (args[0].macroPass === \"postActiveEffects\") {\n    const item = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    item.data.data.save.ability = \"str\";\n}\nreturn; \n\n//---------------------------------- MY FUNCTIONS -------------------------------------------\n\n// Increment available resource\nasync function incrementResource (testActor, resourceName, numValue) {\n    let actorDup = duplicate(testActor.data._source);\n    let resources = Object.values(actorDup.data.resources);\n    let foundResource = resources.find(i => i.label.toLowerCase() === resourceName.toLowerCase());\n    if (foundrResource) {\n        foundResource.value = foundResource.value + numValue;\n        await testActor.update(actorDup); \n    } else ui.notifications.error(\"You have not setup a Superiority Dice resource.\");\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"scene-packer":{"hash":"b5beca67d32ff288d71ac15be41d25a9279337d1","sourceId":"Item.sFySEZz1tKM5dXU1"},"core":{"sourceId":"Item.bpSu08y0CydFPHEi"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"D4sDKeGCIv6fCUwH"}
{"name":"Maneuvers: Tactical Assessment","type":"feat","img":"systems/dnd5e/icons/skills/shadow_11.jpg","data":{"description":{"value":"<p>When you make an Intelligence (<a class=\"tooltip-hover skill-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/using-ability-scores#Investigation\" data-tooltip-href=\"//www.dndbeyond.com/skills/8-tooltip?disable-webm=1&amp;disable-webm=1\">Investigation</a>), an Intelligence (<a class=\"tooltip-hover skill-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/using-ability-scores#History\" data-tooltip-href=\"//www.dndbeyond.com/skills/7-tooltip?disable-webm=1&amp;disable-webm=1\">History</a>), or a Wisdom (<a class=\"tooltip-hover skill-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/using-ability-scores#Insight\" data-tooltip-href=\"//www.dndbeyond.com/skills/12-tooltip?disable-webm=1&amp;disable-webm=1\">Insight</a>) check, you can expend one superiority die and add the superiority die to the ability check.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE ANYTIME</span></summary>\n<p>This is a utility Maneuver and can be used whenever your character can take an action.  This will setup any bonuses and effects on the TARGET actor.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 28 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"TCoE p42","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"8mjpwr1wsce7hnw0","changes":[{"key":"data.skills.inv.bonuses.check","mode":2,"value":"@flags.dae.SuperiorityDie","priority":"1"},{"key":"data.skills.his.bonuses.check","mode":2,"value":"@flags.dae.SuperiorityDie","priority":"1"},{"key":"data.skills.ins.bonuses.check","mode":2,"value":"@flags.dae.SuperiorityDie","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/shadow_11.jpg","label":"Tactical Assessment","origin":"Actor.67GUmdTadYmGXD8W.Item.0RU6a1fysK70I7Zy","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["isSkill.his","isSkill.ins","isSkill.inv"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.skills.inv.bonuses.check","data.skills.his.bonuses.check","data.skills.ins.bonuses.check"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"f0808e9e61d4e7b78569740f68b0c7bf0bbfb953","sourceId":"Item.uv6KR7Us9J1QcKnG"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Brace","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"DWOaZZKsha8p0HzH"}
{"name":"Maneuvers: Maneuvering Attack","type":"feat","img":"systems/dnd5e/icons/skills/red_13.jpg","data":{"description":{"value":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to maneuver one of your comrades into a more advantageous position. You add the superiority die to the attack’s damage roll, and you choose a friendly creature who can see or hear you. That creature can use its reaction to move up to half its speed without provoking opportunity attacks from the target of your attack.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE AFTER ATTACK<br /></span></summary>\n<p>This Maneuver must be activated AFTER the character makes an attack and knows that a HIT was successful.  This will activate any bonuses, saves, effects and extra damage to the TARGET.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.  This provides half normal movement bonus so the target of the REACTION can move half thier movement manually without disrupting thier movement on their turn.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.8 March 19 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"51gy6rzi5b0s0bws","changes":[{"key":"data.attributes.movement.walk","mode":1,"value":"1.5","priority":"20"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"systems/dnd5e/icons/skills/armor_01.jpg","label":"Maneuvers: Maneuvering Attack","origin":"Actor.67GUmdTadYmGXD8W.Item.hkchEm8jxUTaR2Ng","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.movement.walk"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"48bb752cf6925e1f4916a98d8c5df38f0edadbcb","sourceId":"Item.xM250tBuUPl94QKi"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Brace","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"DZZ9Nn0VLv5ovpM6"}
{"name":"Maneuvers: Brace","type":"feat","img":"systems/dnd5e/icons/skills/yellow_37.jpg","data":{"description":{"value":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE BEFORE ATTACK</span></summary>\n<p>This Maneuver must be activated BEFORE the character makes an attack.  This will setup any bonuses and effects on the TARGET character.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 26 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"TCoE p42","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"wkpprdr3mk9xsqnb","changes":[{"key":"data.bonuses.mwak.damage","mode":2,"value":"@flags.dae.SuperiorityDie","priority":"20"},{"key":"data.bonuses.rwak.damage","mode":2,"value":"@flags.dae.SuperiorityDie","priority":"20"}],"disabled":false,"duration":{"rounds":1,"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_37.jpg","label":"Maneuvers: Brace","origin":"Actor.67GUmdTadYmGXD8W.Item.5iFlJVD10sudUgOQ","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Attack:mwak","1Attack:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.bonuses.mwak.damage","data.bonuses.rwak.damage"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"89c0fcc0218a8585bf4004a01c921c5bb3461f38","sourceId":"Item.QB4f7PkoPm2xwC3S"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Brace","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.BYW8Ciw9YoYj97zI"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"LQRvBRdV0nkEY9tj"}
{"name":"Maneuvers: Bait and Switch","type":"feat","img":"systems/dnd5e/icons/skills/shadow_11.jpg","data":{"description":{"value":"<p data-content-chunk-id=\"ea1fee30-2970-4771-9e19-721665eca895\">When you’re within 5 feet of a creature on your turn, you can expend one superiority die and switch places with that creature, provided you spend at least 5 feet of movement and the creature is willing and isn’t <a class=\"tooltip-hover condition-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/appendix-a-conditions#Incapacitated\" data-tooltip-href=\"//www.dndbeyond.com/conditions/7-tooltip?disable-webm=1&amp;disable-webm=1\">incapacitated</a>. This movement doesn’t provoke opportunity attacks.</p>\n<p data-content-chunk-id=\"e5aa2a4b-d177-4931-b779-72ad821935e8\">Roll the superiority die. Until the start of your next turn, you or the other creature (your choice) gains a bonus to AC equal to the number rolled.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE ANYTIME</span></summary>\n<p>This is a utility Maneuver and can be used whenever your character can take an action.  This will setup any bonuses and effects on the TARGET actor.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 26 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"TCoE p42","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"7502b026befa40be7dafd72333c4136efab744ba","sourceId":"Item.dZoXoHIbQwJZVgPb"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Bait and Switch","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nFighter Battlemaster Maneuver: Bait and Switch\n\nUSEAGE : ACTIVATE ANYTIME\nThis is a utility Maneuver and can be used whenever your character can take an action.  \nThis will setup any bonuses and effects on the TARGET actor.  \nA Superiority Die will be expended immediately.\n\nMANEUVER DESCRIPTION:\nWhen you’re within 5 feet of a creature on your turn, you can expend one superiority die and switch places with that creature, \nprovided you spend at least 5 feet of movement and the creature is willing and isn’t incapacitated. \nThis movement doesn’t provoke opportunity attacks.  Roll the superiority die. Until the start of your next turn, \nyou or the other creature (your choice) gains a bonus to AC equal to the number rolled.\n\nv0.7 March 26 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\n// Activate on preActiveEffects\nif (args[0].macroPass === \"preActiveEffects\") {\n\n    // define Actor, Target and Workflow\n    const pcActor = MidiQOL.MQfromActorUuid(args[0].actorUuid);\n    const targetActor = args[0].targets[0].actor;\n    let pcToken = token;\n    let targetToken = await fromUuid(args[0].hitTargetUuids[0]);\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n\n    // check to make sure only one target is selected\n    if ((args[0].targetUuids.length < 1) || (args[0].targetUuids.length > 1)) {\n        ui.notifications.error(\"You need to select a single target.\");\n        await incrementResource (pcActor, \"Superiority Dice\", 1);\n        return;\n    }\n\n    // check to make sure target is not incapacitated\n    console.log(\"MACRO TEST | targetActor: %O\", targetActor);\n    if (!(targetActor.data.data.attributes.hp.value > 0)) {\n        ui.notifications.error(\"Your target must be conscious!\");\n        await incrementResource (pcActor, \"Superiority Dice\", 1);\n        return;\n    }\n\n    let superiorityDie = pcActor.getFlag(\"dae\", \"SuperiorityDie\");\n    if (superiorityDie === null) {\n        ui.notifications.error(\"You are not a fighter battlemaster of at least level 3!\");\n        await incrementResource (pcActor, \"Superiority Dice\", 1);\n        return;\n    }\n\n    // Roll superiority die for AC Bonus result\n    const acBonusRoll = await (new Roll(`${superiorityDie}`)).roll();    \n  \n    //prompt for who gets the AC bonus\n    let dialog = new Promise((resolve, reject) => {\n        new Dialog({\n        // localize this text\n        title: \"Battle Master: Bait and Switch\",\n        content: \"<p>Who gets the AC bonus for 1 turn You or Target?</p>\",\n        buttons: {\n            one: {\n                icon: '<p> </p><img src = \"systems/dnd5e/icons/skills/water_09.jpg\" width=\"60\" height=\"60\"></>',\n                label: \"<p>You</p>\",\n                callback: () => resolve(\"YOU\")\n            },\n            two: {\n                icon: '<p> </p><img src = \"systems/dnd5e/icons/skills/shadow_19.jpg\" width=\"60\" height=\"60\"></>',\n                label: \"<p>Target</p>\",\n                callback: () => {resolve(\"TARGET\")}\n            }\n        },\n        default: \"two\"\n        }).render(true);\n        });\n    \n    let choiceACBonus = await dialog;\n                \n    if (choiceACBonus === \"YOU\") {\n        // Set Actor Active Effect for AC bonus\n        await pcActor.createEmbeddedDocuments(\"ActiveEffect\", [{\n            \"changes\":  [{\"key\":\"data.attributes.ac.bonus\",\"mode\":2,\"value\": `${acBonusRoll.total}`,\"priority\":\"20\"}],\n            \"label\": \"Bait and Switch AC Bonus\",\n            \"duration\": {seconds: 0, rounds: 0, turns: 1},\n            \"origin\": args[0].itemUuid,\n            \"icon\": \"systems/dnd5e/icons/skills/gray_10.jpg\",\n        }]);\n    } else {\n        // Set Target Active Effect for AC bonus\n        await targetActor.createEmbeddedDocuments(\"ActiveEffect\", [{\n            \"changes\":  [{\"key\":\"data.attributes.ac.bonus\",\"mode\":2,\"value\": `${acBonusRoll.total}`,\"priority\":\"20\"}],\n            \"label\": \"Bait and Switch AC Bonus\",\n            \"duration\": {seconds: 0, rounds: 0, turns: 1},\n            \"origin\": args[0].itemUuid,\n            \"icon\": \"systems/dnd5e/icons/skills/gray_10.jpg\",\n        }]);\n    }\n\n    // Swap the token positions positions on the canvas\n    await SwapTokens(pcToken, targetToken, canvas);\n}\nreturn;\n\n//---------------------------------- MY FUNCTIONS -------------------------------------------\n\nasync function SwapTokens(pcMoveToken, targetMoveToken, thisCanvas) {\n    let targetCenter = targetMoveToken.object.center;\n    let pcCenter = pcMoveToken.center;\n    let snappedPosition = null;\n\n    thisCanvas.grid.diagonalRule = \"EUCL\";\n    const diagonalRule = canvas.grid.diagonRule;\n    \n    // Move Actor to OLD Target Location\n    let travelRay = new Ray(pcCenter, targetCenter); //  create a ray to measure the angle to travel\n    let angle = travelRay.angle;\n    travelRay = Ray.fromAngle(pcMoveToken.data.x, pcMoveToken.data.y, angle, travelRay.distance);\n    snappedPosition = canvas.grid.getSnappedPosition(travelRay.B.x,travelRay.B.y);\n    canvas.grid.diagonalRule = diagonalRule;\n    await pcMoveToken.document.update(canvas.grid.getSnappedPosition(travelRay.B.x, travelRay.B.y));\n\n    // Move Target to OLD Actor Location\n    travelRay = new Ray(targetCenter, pcCenter); //  create a ray to measure the angle to travel\n    angle = travelRay.angle;\n    travelRay = Ray.fromAngle(targetMoveToken.data.x, targetMoveToken.data.y, angle, travelRay.distance);\n    snappedPosition = canvas.grid.getSnappedPosition(travelRay.B.x,travelRay.B.y);\n    canvas.grid.diagonalRule = diagonalRule;\n    await targetMoveToken.data.document.update(canvas.grid.getSnappedPosition(travelRay.B.x, travelRay.B.y));\n\n    return;\n}\n\n// Increment available resource\nasync function incrementResource (testActor, resourceName, numValue) {\n    let actorDup = duplicate(testActor.data._source);\n    let resources = Object.values(actorDup.data.resources);\n    let foundResource = resources.find(i => i.label.toLowerCase() === resourceName.toLowerCase());\n    if (foundrResource) {\n        foundResource.value = foundResource.value + numValue;\n        await testActor.update(actorDup); \n    } else ui.notifications.error(\"You have not setup a Superiority Dice resource.\");\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"QmIRccBMSXZ1gkn1"}
{"name":"Maneuvers: Distracting Strike","type":"feat","img":"systems/dnd5e/icons/skills/red_13.jpg","data":{"description":{"value":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to distract the creature, giving your allies an opening. You add the superiority die to the attack’s damage roll. The next attack roll against the target by an attacker other than you has <a class=\"tooltip-hover rule-tooltip\" href=\"https://www.dndbeyond.com/sources/basic-rules/using-ability-scores#AdvantageandDisadvantage\" data-tooltip-href=\"//www.dndbeyond.com/rules/96-tooltip?disable-webm=1&amp;disable-webm=1\">advantage</a> if the attack is made before the start of your next turn.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong><span style=\"color:#169179\">ACTIVATE AFTER ATTACK</span></summary>\n<p>This Maneuver must be activated AFTER the character makes an attack and knows that a HIT was successful.  This will activate any bonuses, saves, effects and extra damage to the TARGET.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 18 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to knock the target down. You add the superiority die to the attack’s damage roll, and if the target is Large or smaller, it must make a Strength saving throw. On a failed save, you knock the target @Compendium[dnd5e.rules.ZkXz0qdkNBkKE6tN]{prone}.</p><h3>Summary</h3>When you hit with a weapon attack, you can expend one superiority die to add the total to the damage roll, and if the target is Large or smaller, it must make a STR saving throw (DC +16). On failure, you knock the target @Compendium[dnd5e.rules.Prone]{prone}.","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"util","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["0 + @flags.dae.SuperiorityDie[Superiority]",""]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"str"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"z6c1xhx4agrwbd3z","changes":[{"key":"flags.midi-qol.grants.advantage.attack.all","mode":5,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"systems/dnd5e/icons/skills/yellow_01.jpg","label":"Maneuvers: Distracting Strike","origin":"Actor.67GUmdTadYmGXD8W.Item.uIJSbACjp9yNcSdf","transfer":false,"flags":{"core":{"statusId":"Convenient Effect: Advantage"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["isHit"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.grants.advantage.attack.all"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53570","entityTypeId":"222216831","componentId":22,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"ye6nz9f4x9n3v7lu","ignoreIcon":true,"ignoreItemImport":true,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Trip Attack","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"scene-packer":{"hash":"46ecd6df1e6cfed55861a3df21c7fb416286c6d0","sourceId":"Item.f1vDGo00JHeNRwHz"},"core":{"sourceId":"Item.bpSu08y0CydFPHEi"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"SB0QXAG2H25eYUGP"}
{"name":"Maneuvers: Parry","type":"feat","img":"systems/dnd5e/icons/skills/blue_10.jpg","data":{"description":{"value":"<p>When another creature damages you with a melee attack, you can use your reaction and expend one superiority die to reduce the damage by the number you roll on your superiority die + your Dexterity modifier.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">AUTOMATED</span></summary>\n<p>This is a automated Maneuver, place it on the character sheet and it will come up in the MIDI-QOL reaction workflow without manual activation.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 19 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When another creature damages you with a melee attack, you can use your reaction and expend one superiority die to reduce the damage by the number you roll on your superiority die + your Dexterity modifier.</p><h3>Summary</h3>When another creature damages you with a melee attack, you can use your reaction and expend one superiority die to reduce the damage by the number you roll on your superiority die +2.","unidentified":""},"source":"PHB p74","activation":{"type":"reactiondamage","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"hh9G9bIo7PnCBcco","changes":[{"key":"flags.midi-qol.DR.all","mode":2,"value":"[[@flags.dae.SuperiorityDie + @abilities.dex.mod]]","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/blue_10.jpg","label":"Parry","origin":"Item.7129rM93Fl9drjmu","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Reaction"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"flags.midi-qol.DR.all"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53564","entityTypeId":"222216831","componentId":16,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"ye6nz9f4x9n3v7lu"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"favtab":{"isFavorite":true},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Parry","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"scene-packer":{"hash":"e6b2057e6e7d880220e4d75dac9373e61d8e6041","sourceId":"Item.42mK4UySvKpGrBuB"},"core":{"sourceId":"Item.7129rM93Fl9drjmu"},"exportSource":{"world":"saltmarsh","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"TQapmUPNu1FGB1Kq"}
{"name":"Maneuvers: Trip Attack","type":"feat","img":"systems/dnd5e/icons/skills/red_13.jpg","data":{"description":{"value":"<p>When you hit with a weapon attack, you can expend one superiority die to add the total to the damage roll, and if the target is Large or smaller, it must make a STR saving throw (DC +16). On failure, you knock the target @Compendium[dnd5e.rules.Prone]{prone}.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE AFTER ATTACK</span></summary>\n<p>This Maneuver must be activated AFTER the character makes an attack and knows that a HIT was successful.  This will activate any bonuses, saves, effects and extra damage to the TARGET.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 23 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to knock the target down. You add the superiority die to the attack’s damage roll, and if the target is Large or smaller, it must make a Strength saving throw. On a failed save, you knock the target @Compendium[dnd5e.rules.ZkXz0qdkNBkKE6tN]{prone}.</p><h3>Summary</h3>When you hit with a weapon attack, you can expend one superiority die to add the total to the damage roll, and if the target is Large or smaller, it must make a STR saving throw (DC +16). On failure, you knock the target @Compendium[dnd5e.rules.Prone]{prone}.","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"dex","actionType":"save","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["0 + @flags.dae.SuperiorityDie[Superiority]",""]],"versatile":""},"formula":"","save":{"ability":"str","dc":null,"scaling":"str"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"i4g2r9vxpxdcpg2f","changes":[{"key":"flags.midi-qol.grants.advantage.attack.mwak","mode":0,"value":"1","priority":"0"},{"key":"flags.midi-qol.grants.advantage.attack.msak","mode":0,"value":"1","priority":"0"},{"key":"flags.midi-qol.grants.disadvantage.attack.rwak","mode":0,"value":"1","priority":"0"},{"key":"flags.midi-qol.grants.disadvantage.attack.rsak","mode":0,"value":"1","priority":"0"},{"key":"flags.midi-qol.disadvantage.attack.all","mode":0,"value":"1","priority":"0"},{"key":"data.attributes.movement.all","mode":0,"value":"*0.5","priority":"5"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/combat-utility-belt/icons/prone.svg","label":"Prone","origin":"Actor.67GUmdTadYmGXD8W.Item.HvWHb09XxW9i1QDj","transfer":false,"flags":{"core":{"statusId":"Convenient Effect: Prone"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.grants.advantage.attack.mwak","flags.midi-qol.grants.advantage.attack.msak","flags.midi-qol.grants.disadvantage.attack.rwak","flags.midi-qol.grants.disadvantage.attack.rsak","flags.midi-qol.disadvantage.attack.all","data.attributes.movement.all"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53570","entityTypeId":"222216831","componentId":22,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"ye6nz9f4x9n3v7lu","ignoreIcon":true,"ignoreItemImport":true,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":true,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Trip Attack","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"scene-packer":{"hash":"5d078a65e1cf22bab4e9b6baa10f99789509e3c8","sourceId":"Item.KNXEmMA7AdpsDd7p"},"core":{"sourceId":"Item.bpSu08y0CydFPHEi"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"WBfzRFKzTm6JoMLh"}
{"name":"Maneuvers: Disarming Attack","type":"feat","img":"systems/dnd5e/icons/skills/red_13.jpg","data":{"description":{"value":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to disarm the target, forcing it to drop one item of your choice that it’s holding. You add the superiority die to the attack’s damage roll, and the target must make a Strength saving throw. On a failed save, it drops the object you choose. The object lands at its feet.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong><span style=\"color:#169179\">ACTIVATE AFTER ATTACK</span></summary>\n<p>This Maneuver must be activated AFTER the character makes an attack and knows that a HIT was successful.  On a failed save, this item will put a marker on the target to remind the GM the actor has been disarmed, since there is no disarmed convenient effect .  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 15 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to knock the target down. You add the superiority die to the attack’s damage roll, and if the target is Large or smaller, it must make a Strength saving throw. On a failed save, you knock the target @Compendium[dnd5e.rules.ZkXz0qdkNBkKE6tN]{prone}.</p><h3>Summary</h3>When you hit with a weapon attack, you can expend one superiority die to add the total to the damage roll, and if the target is Large or smaller, it must make a STR saving throw (DC +16). On failure, you knock the target @Compendium[dnd5e.rules.Prone]{prone}.","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"str","actionType":"save","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["0 + @flags.dae.SuperiorityDie[Superiority]",""]],"versatile":""},"formula":"","save":{"ability":"str","dc":null,"scaling":"str"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"z6c1xhx4agrwbd3z","changes":[],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/weapon_04.jpg","label":"Maneuvers: Disarming Attack","origin":"Actor.67GUmdTadYmGXD8W.Item.uIJSbACjp9yNcSdf","transfer":false,"flags":{"core":{"statusId":"Convenient Effect: Disarmed"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.cargo.crew"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53570","entityTypeId":"222216831","componentId":22,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"ye6nz9f4x9n3v7lu","ignoreIcon":true,"ignoreItemImport":true,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":true,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Trip Attack","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"scene-packer":{"hash":"7038f5ad7f5ff4a0789d63807b54ff84bfa7d725","sourceId":"Item.BFjeQRFom9wZ3A05"},"core":{"sourceId":"Item.bpSu08y0CydFPHEi"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"WCsOffeON8z66KUB"}
{"name":"Maneuvers: Goading Attack","type":"feat","img":"systems/dnd5e/icons/skills/red_13.jpg","data":{"description":{"value":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to goad the target into attacking you. You add the superiority die to the attack’s damage roll, and the target must make a Wisdom saving throw. On a failed save, the target has <a class=\"tooltip-hover rule-tooltip\" href=\"https://www.dndbeyond.com/sources/basic-rules/using-ability-scores#AdvantageandDisadvantage\" data-tooltip-href=\"//www.dndbeyond.com/rules/98-tooltip?disable-webm=1&amp;disable-webm=1\">disadvantage</a> on all attack rolls against targets other than you until the end of your next turn.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong><span style=\"color:#169179\">ACTIVATE AFTER ATTACK</span></summary>\n<p>*** This Maneuver is incomplete ***</p>\n<p>This Maneuver must be activated AFTER the character makes an attack and knows that a HIT was successful.  This will activate any bonuses, saves, effects and extra damage to the TARGET.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.  If the target fails the WIS save, an empty effect will be placed on the TARGET.  This effect is to remind the GM that attacks against all but the goading actor are at disadvantage. </p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.1 March 18 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to knock the target down. You add the superiority die to the attack’s damage roll, and if the target is Large or smaller, it must make a Strength saving throw. On a failed save, you knock the target @Compendium[dnd5e.rules.ZkXz0qdkNBkKE6tN]{prone}.</p><h3>Summary</h3>When you hit with a weapon attack, you can expend one superiority die to add the total to the damage roll, and if the target is Large or smaller, it must make a STR saving throw (DC +16). On failure, you knock the target @Compendium[dnd5e.rules.Prone]{prone}.","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"str","actionType":"save","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["0 + @flags.dae.SuperiorityDie[Superiority]",""]],"versatile":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"str"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"z6c1xhx4agrwbd3z","changes":[],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"icons/skills/wounds/injury-face-impact-orange.webp","label":"Maneuvers: Goading Attack","origin":"Actor.67GUmdTadYmGXD8W.Item.uIJSbACjp9yNcSdf","transfer":false,"flags":{"core":{"statusId":"Convenient Effect: Taunted"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.cargo.crew"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53570","entityTypeId":"222216831","componentId":22,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"ye6nz9f4x9n3v7lu","ignoreIcon":true,"ignoreItemImport":true,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":true,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Trip Attack","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"scene-packer":{"hash":"0569c7de2dabc07f823ad44c9169bb0aafd66df0","sourceId":"Item.4vseBFWcTmEnMUEE"},"core":{"sourceId":"Item.bpSu08y0CydFPHEi"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"XyBzpvCIXAcmNGbm"}
{"name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff","name":"Battlemaster Maneuvers","children":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"folderPath":[]},"scene-packer":{"hash":"8c456a0921cadc3052adeed3c4c5154724513533"}},"_id":"dYgbsUNfOrmIp6Hc"}
{"name":"Maneuvers: Precision Attack","type":"feat","img":"systems/dnd5e/icons/skills/yellow_16.jpg","data":{"description":{"value":"<p>When you make a weapon attack roll against a creature, you can expend one superiority die to add it to the roll. You can use this maneuver before or after making the attack roll, but before any effects of the attack are applied.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">AUTOMATED</span></summary>\n<p>This item should be placed on the character that has the Precision Attack Manuever.  This items places an effect on the Actor that allows the rolling of a Superiority Die to be added to the attack Roll before the TO HIT is evaluated.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 25 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"When you make a weapon attack roll, you can expend one superiority die to add it to the roll before or after the roll but before any effects are applied.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>When you make a weapon attack roll against a creature, you can expend one superiority die to add it to the roll. You can use this maneuver before or after making the attack roll, but before any effects of the attack are applied.</p>\n  <p></p>\n</details>","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"og6qejg1f0p7b8ws","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Maneuvers: Precision Attack,preCheckHits","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_16.jpg","label":"Maneuvers: Precision Attack","origin":"Actor.67GUmdTadYmGXD8W.Item.RryNpmf0SaXo2jua","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53565","entityTypeId":"222216831","componentId":17,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"33bb25ceae7629d3018f96fc5081e5d3789ba7f9","sourceId":"Item.IsXhh4XNTwyAc1Hv"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Precision Attack","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nFighter Battlemaster Maneuver: Precision Attack\n\nUSEAGE : PLACE HOLDER\nThis item should be placed on the character that has the Precision Attack Manuever.  \nThis items places an effect on the Actor that allows the rolling of a Superiority Die to \nbe added to the attack Roll before the TO HIT is evaluated.\n \nMANEUVER DESCRIPTION:\nWhen you make a weapon attack roll against a creature, you can expend one superiority die \nto add it to the roll. You can use this maneuver before or after making the attack roll, \nbut before any effects of the attack are applied.\n\nv0.8 March 28 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\nconst workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n\nif (args[0].macroPass === \"preCheckHits\") {\n    const theItem = workflow;\n\n    if ((theItem != null) && (theItem.name != \"Maneuvers: Precision Attack\")) {\n        // define Actor, Target and Item\n        const pcActor = MidiQOL.MQfromActorUuid(args[0].actorUuid);\n        \n        // Find Superiority Dice Resource\n        let resource = await findSheetResource(pcActor, \"Superiority Dice\");\n        if (!resource) { \n            ui.notifications.error(\"Could not find a recource labeled 'Superiority Dice'...\"); \n            return;\n        } \n\n        // No more Superiority Dice\n        let superiorityDice = resource.value;\n        if (superiorityDice < 1) return;\n\n        // check to make sure only one target is selected\n        if ((args[0].targetUuids.length < 1) || (args[0].targetUuids.length > 1)) {\n            ui.notifications.error(\"You need to select a single target.\");\n            return;\n        }\n\n        let superiorityDie = pcActor.getFlag(\"dae\", \"SuperiorityDie\");\n        if (superiorityDie === null) {\n            ui.notifications.error(\"You are not a fighter battle master of at least 3rd level!\");\n            return;\n        }\n\n        // make sure the attempted hit was made with a weapon attack\n        if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) {\n            ui.notifications.error(\"Precision Attack only works with a weapon attack\");  \n            return;       \n        }\n        \n        // create a dialog and prompt to spend a superiority die\n        let useSuperiorityDie = false;        \n        if (superiorityDice > 0) {\n            let dialog = new Promise((resolve, reject) => {\n                new Dialog({\n                    // localize this text\n                    title: \"Battle Master: Precision Attack\",\n                    content: \"<p>Use Precision Attack (cost 1 Superiority Die)?</p>\",\n                    buttons: {\n                        one: {\n                            icon: '<p> </p><img src = \"icons/skills/targeting/crosshair-triple-strike-orange.webp\" width=\"60\" height=\"60\"></>',\n                            label: \"<p>Yes</p>\",\n                            callback: () => resolve(true)\n                        },\n                        two: {\n                            icon: '<p> </p><img src = \"systems/dnd5e/icons/skills/weapon_28.jpg\" width=\"60\" height=\"60\"></>',\n                            label: \"<p>No</p>\",\n                            callback: () => {resolve(false)}\n                        }\n                    },\n                    default: \"two\"\n                }).render(true);\n            });\n            useSuperiorityDie = await dialog;\n        } else return;\n\n        if (!useSuperiorityDie) return;\n\n        // if YES subtract a superiorty die\n        await decrimentSheetResource (pcActor, \"Superiority Dice\", 1);\n\n        console.log(\"MACRO TEST | Workflow: %O\", workflow);\n\n        // get the live MIDI-QOL workflow so we can make changes\n        let newRoll = new  Roll(`${workflow.attackRoll.result} + ${superiorityDie}`, workflow.actor.getRollData());\n        newRoll = await newRoll.evaluate({ async: true });\n        workflow.attackRoll = newRoll;\n        workflow.attackRollTotal = newRoll.total;\n        workflow.attackRollHTML = await workflow.attackRoll.render(newRoll);\n\n        return;\n    }\n}\nreturn;\n\n//---------------------------------- MY FUNCTIONS -------------------------------------\n\n// Test for available resource\n// Return resource object\nasync function findSheetResource (testActor, resourceName) {\n    let resources = Object.values(testActor.data.data.resources);\n    let foundResource = resources.find(i => i.label.toLowerCase() === resourceName.toLowerCase());\n    return foundResource;\n}\n\n// Decriment available resource\nasync function decrimentSheetResource (testActor, resourceName, numValue) {\n    let actorDup = duplicate(testActor.data._source);\n    let resources = Object.values(actorDup.data.resources);\n    let foundResource = resources.find(i => i.label.toLowerCase() === resourceName.toLowerCase());\n    foundResource.value = foundResource.value - numValue;\n    await testActor.update(actorDup); \n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.agdqkK2J5m95X9ww"},"favtab":{"isFavorite":true},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"eJzA32XXN8pdyvTG"}
{"name":"Maneuvers: Menacing Attack","type":"feat","img":"systems/dnd5e/icons/skills/red_13.jpg","data":{"description":{"value":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to frighten the target. You add the superiority die to the attack’s damage roll, and the target must make a Wisdom saving throw. On a failed save, it is <a class=\"tooltip-hover condition-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/appendix-a-conditions#Frightened\" data-tooltip-href=\"//www.dndbeyond.com/conditions/5-tooltip?disable-webm=1&amp;disable-webm=1\">frightened</a> of you until the end of your next turn.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE AFTER ATTACK</span></summary>\n<p>This Maneuver must be activated AFTER the character makes an attack and knows that a HIT was successful.  This will activate any bonuses, saves, effects and extra damage to the TARGET.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 19 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to knock the target down. You add the superiority die to the attack’s damage roll, and if the target is Large or smaller, it must make a Strength saving throw. On a failed save, you knock the target @Compendium[dnd5e.rules.ZkXz0qdkNBkKE6tN]{prone}.</p><h3>Summary</h3>When you hit with a weapon attack, you can expend one superiority die to add the total to the damage roll, and if the target is Large or smaller, it must make a STR saving throw (DC +16). On failure, you knock the target @Compendium[dnd5e.rules.Prone]{prone}.","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"str","actionType":"save","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["0 + @flags.dae.SuperiorityDie[Superiority]",""]],"versatile":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"str"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"z6c1xhx4agrwbd3z","changes":[{"key":"flags.midi-qol.disadvantage.attack.all","mode":0,"value":"1","priority":"0"},{"key":"flags.midi-qol.disadvantage.ability.check.all","mode":0,"value":"1","priority":"0"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"modules/dfreds-convenient-effects/images/frightened.svg","label":"Frightened","origin":"Actor.67GUmdTadYmGXD8W.Item.uIJSbACjp9yNcSdf","transfer":false,"flags":{"core":{"statusId":"Convenient Effect: Frightened"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.disadvantage.attack.all","flags.midi-qol.disadvantage.ability.check.all"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53570","entityTypeId":"222216831","componentId":22,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"ye6nz9f4x9n3v7lu","ignoreIcon":true,"ignoreItemImport":true,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":true,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Trip Attack","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"scene-packer":{"hash":"b3918ff94c4af649f576089856eab77e1ff81d77","sourceId":"Item.g4DTflm66Vux1lKT"},"core":{"sourceId":"Item.bpSu08y0CydFPHEi"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"m1SGy11adzmiQF2M"}
{"name":"Maneuvers: Evasive Footwork","type":"feat","img":"systems/dnd5e/icons/skills/shadow_11.jpg","data":{"description":{"value":"<p>When you move, you can expend one superiority die, rolling the die and adding the number rolled to your <a class=\"tooltip-hover rule-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/step-by-step-characters#ArmorClass\" data-tooltip-href=\"//www.dndbeyond.com/rules/57-tooltip?disable-webm=1&amp;disable-webm=1\">AC</a> until you stop moving.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE ANYTIME</span></summary>\n<p>This is a utility Maneuver and can be used whenever your character can take an action.  This will setup any bonuses and effects on the TARGET actor.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 18 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"8mjpwr1wsce7hnw0","changes":[{"key":"data.attributes.ac.bonus","mode":2,"value":"[[@flags.dae.SuperiorityDie]]","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/shadow_11.jpg","label":"Evasive Footwork","origin":"Actor.67GUmdTadYmGXD8W.Item.0RU6a1fysK70I7Zy","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["isMoved"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.ac.bonus"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"ab5abfe1748842881fec095fad29833b1288c329","sourceId":"Item.3tAewwgdyOdmOUhf"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Brace","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"mciPZq9D09B4YdUR"}
{"name":"Maneuvers: Commanding Presence","type":"feat","img":"systems/dnd5e/icons/skills/shadow_11.jpg","data":{"description":{"value":"<p>When you make a Charisma (<a class=\"tooltip-hover skill-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/using-ability-scores#Intimidation\" data-tooltip-href=\"//www.dndbeyond.com/skills/17-tooltip?disable-webm=1&amp;disable-webm=1\">Intimidation</a>), a Charisma (<a class=\"tooltip-hover skill-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/using-ability-scores#Performance\" data-tooltip-href=\"//www.dndbeyond.com/skills/18-tooltip?disable-webm=1&amp;disable-webm=1\">Performance</a>), or a Charisma (<a class=\"tooltip-hover skill-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/using-ability-scores#Persuasion\" data-tooltip-href=\"//www.dndbeyond.com/skills/19-tooltip?disable-webm=1&amp;disable-webm=1\">Persuasion</a>) check, you can expend one superiority die and add the superiority die to the ability check.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE ANYTIME</span></summary>\n<p>This is a utility Maneuver and can be used whenever your character can take an action.  This will setup any bonuses and effects on the TARGET actor.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 27 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"TCoE p42","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"8mjpwr1wsce7hnw0","changes":[{"key":"data.skills.prf.bonuses.check","mode":2,"value":"+ @flags.dae.SuperiorityDie","priority":"1"},{"key":"data.skills.inv.bonuses.check","mode":2,"value":"+ @flags.dae.SuperiorityDie","priority":"1"},{"key":"data.skills.per.bonuses.check","mode":2,"value":"+ @flags.dae.SuperiorityDie","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/shadow_11.jpg","label":"Commanding Presence","origin":"Actor.67GUmdTadYmGXD8W.Item.0RU6a1fysK70I7Zy","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["isSkill.itm","isSkill.prf","isSkill.per"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["data.skills.prf.bonuses.check","data.skills.inv.bonuses.check","data.skills.per.bonuses.check"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"4825d901ef6c054e10416cb6ca58a68a60ed6fa6","sourceId":"Item.NSoJ5jvNnMquGAKy"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Brace","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"okNht2Yem7Rx789y"}
{"name":"Maneuvers: Commander’s Strike","type":"feat","img":"systems/dnd5e/icons/skills/shadow_11.jpg","data":{"description":{"value":"<p>When you take the <a class=\"tooltip-hover action-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/combat#Attack\" data-tooltip-href=\"//www.dndbeyond.com/actions/1-tooltip?disable-webm=1&amp;disable-webm=1\">Attack</a> action on your turn, you can forgo one of your attacks and use a bonus action to direct one of your companions to strike. When you do so, choose a friendly creature who can see or hear you and expend one superiority die. That creature can immediately use its reaction to make one weapon attack, adding the superiority die to the attack’s damage roll.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE ANYTIME</span></summary>\n<p>This is a utility Maneuver and can be used whenever your character can take an action.  This will setup any bonuses and effects on the TARGET actor.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 15 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"wi6f2h3dq7nvr1yt","changes":[{"key":"data.bonuses.mwak.damage","mode":2,"value":"+ @flags.dae.SuperiorityDie","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/shadow_11.jpg","label":"Maneuvers: Commander’s Strike","origin":"Actor.67GUmdTadYmGXD8W.Item.pGZANlFSKX3g36f8","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Attack:mwak"],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.bonuses.mwak.damage"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"29d57f85d97d9be1e5033054e97fd799a2615b9c","sourceId":"Item.C31tSy4zyvEeWPmh"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Brace","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"pEYq1u6n3zkc4mMj"}
{"name":"Maneuvers: Quick Toss","type":"feat","img":"systems/dnd5e/icons/skills/yellow_37.jpg","data":{"description":{"value":"<p>As a bonus action, you can expend one superiority die and make a ranged attack with a weapon that has the <a href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/equipment#WeaponProperties\" data-tooltip-href=\"//www.dndbeyond.com/weapon-properties/10-tooltip?disable-webm=1&amp;disable-webm=1\">thrown</a> property. You can draw the weapon as part of making this attack. If you hit, add the superiority die to the weapon’s damage roll.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE BEFORE ATTACK</span></summary>\n<p>This Maneuver must be activated BEFORE the character makes an attack.  This will setup any bonuses and effects on the TARGET character.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.  This bonus is added to the next ranged weapon attack, it is up to the player/GM to make sure the weapon is thrown and not shot.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.8 March 28 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"TCoE p42","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"yvrty0152p8tpf0a","changes":[{"key":"data.bonuses.rwak.damage","mode":2,"value":"@flags.dae.SuperiorityDie","priority":"20"}],"disabled":false,"duration":{"rounds":1,"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_37.jpg","label":"Maneuvers: Quick Toss","origin":"Actor.67GUmdTadYmGXD8W.Item.8ehitphcFmvocZ65","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Attack:rwak"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.bonuses.rwak.damage"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"0204ddd11abfc7b83d8e7706e389a0f4fd2b57fa","sourceId":"Item.hqmUXwJgb0wagw79"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Brace","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"pKbXLvdz3eBsOtfQ"}
{"name":"Maneuvers: Rally","type":"feat","img":"systems/dnd5e/icons/skills/shadow_11.jpg","data":{"description":{"value":"<p>On your turn, you can use a bonus action and expend one superiority die to bolster the resolve of one of your companions. When you do so, choose a friendly creature who can see or hear you. That creature gains <a class=\"tooltip-hover rule-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/combat#TemporaryHitPoints\" data-tooltip-href=\"//www.dndbeyond.com/rules/76-tooltip?disable-webm=1&amp;disable-webm=1\">temporary hit points</a> equal to the superiority die roll + your Charisma modifier.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE ANYTIME</span></summary>\n<p>This is a utility Maneuver and can be used whenever your character can take an action.  This will setup any bonuses and effects on the TARGET actor.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 22 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"PHB p74","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":1,"width":null,"units":"","type":"ally"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"8mjpwr1wsce7hnw0","changes":[{"key":"data.attributes.hp.temp","mode":2,"value":"[[@flags.dae.SuperiorityDie + @abilities.cha.mod]]","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/shadow_11.jpg","label":"Rally","origin":"Actor.67GUmdTadYmGXD8W.Item.0RU6a1fysK70I7Zy","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.hp.temp"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"ab4b6d6e04243fe90b043e00af99db410f376621","sourceId":"Item.vUZd7c5UKU7Y3XMs"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Rally","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"ubcvAVuRaq4S299j"}
{"name":"Maneuvers: Pushing Attack","type":"feat","img":"systems/dnd5e/icons/skills/red_13.jpg","data":{"description":{"value":"<p>When you hit a creature with a weapon attack, you can expend one superiority die to attempt to drive the target back. You add the superiority die to the attack’s damage roll, and if the target is Large or smaller, it must make a Strength saving throw. On a failed save, you push the target up to 15 feet away from you.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE AFTER ATTACK</span></summary>\n<p>This Maneuver must be activated AFTER the character makes an attack and knows that a HIT was successful.  This will activate any bonuses, saves, effects and extra damage to the TARGET.  A <span style=\"text-decoration:underline;color:#236fa1\">Superiority Die </span>will be expended immediately.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 22 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"<p>When a creature you can see moves into the reach you have with the melee weapon you’re wielding, you can use your reaction to expend one superiority die and make one attack against the creature, using that weapon. If the attack hits, add the superiority die to the weapon’s damage roll.</p>","unidentified":""},"source":"PHB p74","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"str","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["0 + @flags.dae.SuperiorityDie[Superiority]",""]],"versatile":""},"formula":"","save":{"ability":"str","dc":16,"scaling":"str"},"requirements":"Fighter: Battlemaster","recharge":{"value":null,"charged":false},"attunement":0},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2439086","entityTypeId":"222216831","componentId":1306902,"componentTypeId":258900837,"class":"Fighter","subclass":"Battle Master","importId":"28pyz8r4w0vt0973"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"scene-packer":{"hash":"1e1045d31b2c0880358e118176dcf54bfd3d8e17","sourceId":"Item.l4bndCWKdYVIxwd8"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[all]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Maneuvers: Pushing Attack","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nFighter Battlemaster Maneuvers: Pushing Attack\n\nUSEAGE : ACTIVATE AFTER ATTACK\nThis Maneuver must be activated AFTER the character makes an attack and knows that a \nHIT was successful.  This will activate any bonuses, saves, effects and extra damage \nto the TARGET.  A Superiority Die will be expended immediately.\n \nMANEUVER DESCRIPTION:\nWhen you hit a creature with a weapon attack, you can expend one superiority die to \nattempt to drive the target back. You add the superiority die to the attack’s damage \nroll, and if the target is Large or smaller, it must make a Strength saving throw. \nOn a failed save, you push the target up to 15 feet away from you.\n\nv0.5 March 30 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"postSave\") {\n\n    // check to make sure only one target is selected\n    if ((args[0].targetUuids.length < 1) || (args[0].targetUuids.length > 1)) {\n        ui.notifications.error(\"You need to select a single target.\");\n        await incrementResource (pcActor, \"Superiority Dice\", 1);\n        return;\n    }\n\n    // setup common variables\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const target = await fromUuid(args[0].targetUuids[0]);\n    const diagonalRule = canvas.grid.diagonRule;\n\n    // If save failed\n    if (workflow.failedSaves.size >= 1) {\n        //prompt for push distance\n        let dialog = new Promise((resolve, reject) => {\n            new Dialog({\n            // localize this text\n            title: \"Battle Master: Pushing Attack\",\n            content: \"<p>How far would you like to push the target?</p>\",\n            buttons: {\n                one: {\n                    icon: '<p> </p><img src = \"systems/dnd5e/icons/skills/water_09.jpg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>5 ft.</p>\",\n                    callback: () => resolve(1)\n                },\n                two: {\n                    icon: '<p> </p><img src = \"systems/dnd5e/icons/skills/shadow_19.jpg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>10 ft.</p>\",\n                    callback: () => {resolve(2)}\n                },\n                three: {\n                    icon: '<p> </p><img src = \"systems/dnd5e/icons/skills/fire_02.jpg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>15 ft.</p>\",\n                    callback: () => {resolve(3)}\n                }\n            },\n            default: \"three\"\n            }).render(true);\n            });\n        \n        const distanceTravelled = await dialog;\n\n        //  create a ray to measure the angle to travel\n        canvas.grid.diagonalRule = \"EUCL\";   \n        let travelRay = new Ray(token.center, target.object.center); \n        const angle = travelRay.angle;\n        travelRay.distance = travelRay.dx * distanceTravelled;\n\n        // create a new ray with the same angle but shorter to allow for the token sizes\n        travelRay = Ray.fromAngle(token.x, token.y, angle, \n            Math.floor(travelRay.distance + Math.sqrt(target.object.height ** 2 + target.object.width ** 2)/2));\n        canvas.grid.diagonalRule = diagonalRule;\n        \n        // update the canvas to move the token\n        await target.data.document.update(canvas.grid.getSnappedPosition(travelRay.B.x, travelRay.B.y));\n    }\n}\nreturn;\n\n//---------------------------------- MY FUNCTIONS -------------------------------------------\n\n// Increment available resource\nasync function incrementResource (testActor, resourceName, numValue) {\n    let actorDup = duplicate(testActor.data._source);\n    let resources = Object.values(actorDup.data.resources);\n    let foundResource = resources.find(i => i.label.toLowerCase() === resourceName.toLowerCase());\n    if (foundrResource) {\n        foundResource.value = foundResource.value + numValue;\n        await testActor.update(actorDup); \n    } else ui.notifications.error(\"You have not setup a Superiority Dice resource.\");\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.QCt9G1ryLky9enrK"},"cf":{"id":"temp_8ezrckovl3o","path":"Battlemaster Maneuvers","color":"#0000ff"}},"_id":"v8ayqvSoGMhbU9ia"}
{"name":"Aura of Alacrity","type":"feat","img":"systems/dnd5e/icons/skills/armor_01.jpg","data":{"description":{"value":"<p><em>7th- and 18th-level Oath of Glory feature</em></p>\n<p>You emanate an aura that fills you and your companions with supernatural speed, allowing you to race across a battlefield in formation. Your walking speed increases by 10 feet. In addition, if you aren’t @Compendium[dnd5e.rules.Incapacitated]{incapacitated}, the walking speed of any ally who starts their turn within 5 feet of you increases by 10 feet until the end of that turn.</p>\n<p>When you reach 18th level in this class, the range of the aura increases to 10 feet.</p>","chat":"<p><em>7th- and 18th-level Oath of Glory feature</em></p>\n<p>You emanate an aura that fills you and your companions with supernatural speed, allowing you to race across a battlefield in formation. Your walking speed increases by 10 feet. In addition, if you aren’t @Compendium[dnd5e.rules.Incapacitated]{incapacitated}, the walking speed of any ally who starts their turn within 5 feet of you increases by 10 feet until the end of that turn.</p>\n<p>When you reach 18th level in this class, the range of the aura increases to 10 feet.</p>","unidentified":""},"source":"","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Paladin : Oath of Glory","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"2clgap6djsy9eun2","changes":[{"key":"data.attributes.movement.walk","mode":2,"value":"10","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/armor_01.jpg","label":"Aura of Alacrity","origin":"Actor.XhIWoWzMyMzFK5FU.Item.8TLpbFnPykVWRRwa","transfer":true,"flags":{"core":{"statusId":"1"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":true,"aura":"Allies","radius":5,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.movement.walk"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":2203086,"type":"class","dndbeyond":{"requiredLevel":7,"displayOrder":3,"levelScale":{"id":266710,"level":7,"description":"Aura of Alacrity (Range 5 feet)","dice":null,"fixedValue":5},"levelScales":[{"id":266710,"level":7,"description":"Aura of Alacrity (Range 5 feet)","dice":{"diceCount":null,"diceValue":null,"diceMultiplier":null,"fixedValue":null,"diceString":null},"fixedValue":5},{"id":266711,"level":18,"description":"Aura of Alacrity (range 10 feet)","dice":{"diceCount":null,"diceValue":null,"diceMultiplier":null,"fixedValue":null,"diceString":null},"fixedValue":10}],"limitedUse":[],"class":"Paladin : Oath of Glory"},"class":"Paladin","subclass":"Oath of Glory","importId":"lkdgypqhrbwo10lx"},"obsidian":{"source":{"type":"class","text":"Paladin"}},"scene-packer":{"hash":"4184a2ab9dbe9a4b32022c59d63138e9f644dd82","sourceId":"Item.CPeO36Ox7J472TD5"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.IymI4xM6Du0DvYhg"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"GQn5cLw3yMZzrPUO"}
{"name":"Auto Divine Fury","type":"feat","img":"icons/magic/fire/projectile-wave-arrow.webp","data":{"description":{"value":"<p>Adding this feature to an actor will cause Divine Fury to be auto used at the first opportunity, rather than showing a confirmation dialog. </p>\n<details>\n<summary>VERSION INFO</summary>\n<p>v0.3 March 27 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"XGtE p11","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Barbarian Zealot Path","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"BPyKtcWCBpuwouN9","changes":[{"key":"flags.dae","mode":0,"value":"autoDivineFury 1","priority":"10"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/magic/fire/projectile-wave-arrow.webp","label":"Auto Divine Fury","origin":"Item.x0Obbisd7EriI1UU","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dae"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"},"core":{"sourceId":"Compendium.midi-qol.midiqol-sample-items.uvRQayOyn61L6vOV"},"scene-packer":{"hash":"f8b9c0fae12deb950d0e292d0743b12845ae2ecc","sourceId":"Item.OIwRwEi4Lqpik1qW"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"}},"_id":"CdbakTzv9NECGWAc"}
{"name":"Channel Divinity: Inspiring Smite","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>Inspiring Smite. Immediately after you deal damage to a creature with your Divine Smite feature, you can use your Channel Divinity as a bonus action and distribute temporary hit points to creatures of your choice within 30 feet of you, which can include you. The total number of temporary hit points equals 2d8 + your level in this class, divided among the chosen creatures however you like.</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.1 April 13 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"MOoT p.29","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Paladin: Oath of Glory","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"mj8jXTYFLF8zANxn","changes":[{"key":"macro.itemMacro","mode":0,"value":"ItemMacro","priority":"50"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"icons/magic/life/heart-cross-blue.webp","label":"Inspiring Smite Healing Pool","origin":"Item.D5SPoopIkNLJ3PyB","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"e51bd02cacc971b04f5d5aecd66b864a986cd5de","sourceId":"Item.rI4zp4wKLsN9CjlR"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.D5SPoopIkNLJ3PyB"},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Inspiring Smite","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nChannel Divinity: Inspiring Smite\nImmediately after you deal damage to a creature with your Divine Smite feature, you can use your Channel Divinity\nas a bonus action and distribute temporary hit points to creatures of your choice within 30 feet of you, which \ncan include you. The total number of temporary hit points equals 2d8 + your level in this class, divided among \nthe chosen creatures however you like.\n\nUSE: Manually triggered after to hit with divine smite\nCreate a healing pool - roll 2d8 + class level\nStore the healing pool on the character in a DAE variable that terminates at the end of the actors turn\n\nv0.1 April 13 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0] === \"on\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    \n    const paladinClass = testClass (pcActor, \"paladin\", \"Oath of Glory\", 3);\n    console.log (\"MACRO TEST | PALADIN CLASS: %O\", paladinClass);\n    if (!paladinClass) {\n        ui.notifications.error(\"You are not a Oath of Glory Paladin of at least 3rd level.\");\n        return;    \n    }\n    \n    //roll 2d8 + paladinClass.levels and store result in flag.dae.healingPool\n    const roll = await (new Roll(`2d8 + ${paladinClass.levels}`)).roll();\n    pcActor.setFlag(\"dae\", \"healingpool\", roll.total);\n    return;\n\n} else if (args[0] === \"off\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    pcActor.unsetFlag(\"dae\", \"healingpool\");\n    return;\n}\n\n// Test PC Class, Subclass and Class Level, RETURN the class object or null\nfunction testClass (testActor, className, subClassName, levels) {\n    let theClass = testActor.data.data.classes[className] ;\n    if (theClass) {\n        if ((levels > 0) && (theClass.levels >= levels)) {\n            if (subClassName === null || (theClass.subclass === subClassName)) {\n                return theClass;\n            }\n        }\n    }\n    return null;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"jAoIys93jU8AqHsm"}
{"name":"Channel Divinity: Path of the Grave","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>Starting at 2nd level, you can use your Channel Divinity to mark another creature’s life force for termination.</p>\n<p>As an action, you choose one creature you can see within 30 feet of you, cursing it until the end of your next turn. The next time you or an ally of yours hits the cursed creature with an attack, the creature has vulnerability to all of that attack’s damage, and then the curse ends.</p>\n<p> </p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.5 March 29 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"creature"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric: Grave Domain","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"Xkk83MdPGWwWb2yX","changes":[{"key":"data.traits.dv.all","mode":0,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/magic/death/grave-tombstone-glow-teal.webp","label":"Path to the Grave","origin":"Item.xJ3uiHOSl6ZDElTz","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["isDamaged"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.traits.dv.all"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":216,"data":{"id":216,"name":"Remarkable Athlete","prerequisite":null,"description":"<p class=\"compendium-hr\">Starting at 7th level, you can add half your proficiency bonus (round up) to any Strength, Dexterity, or Constitution check you make that doesn’t already use your proficiency bonus.</p>\r\n<p class=\"Core-Styles_Core-Body\">In addition, when you make a running long jump, the distance you can cover increases by a number of feet equal to your Strength modifier.</p>","requiredLevel":7,"displayOrder":2},"version":"2.9.8","featureId":216,"requiredLevel":7,"prerequisite":null,"class":"Champion","classId":16,"subClass":"Champion"},"obsidian":{"source":{"type":"class","text":"Champion"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.world.ddb-class-features.7rTzj1cBRBDKOb7R"},"scene-packer":{"hash":"9b96970abda3cc2865aa16a3e5b754b2db1af2be","sourceId":"Item.KBaJEwMAnwyIWAad"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"mM3BZnfD9ODb4CuQ"}
{"name":"Channel Divinity: Peerless Athlete","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p>As a bonus action, you can use your Channel Divinity to augment your athleticism. For the next 10 minutes, you have advantage on Strength (<a href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/using-ability-scores#Athletics\" data-tooltip-href=\"//www.dndbeyond.com/skills/2-tooltip?disable-webm=1&amp;disable-webm=1\">Athletics</a>) and Dexterity (<a href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/using-ability-scores#Acrobatics\" data-tooltip-href=\"//www.dndbeyond.com/skills/3-tooltip?disable-webm=1&amp;disable-webm=1\">Acrobatics</a>) checks; you can carry, push, drag, and lift twice as much weight as normal; and the distance of your long and high jumps increases by 10 feet (this extra distance costs movement as normal).</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.5 March 29 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"MOoT p.29","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Paladin Oath of Glory","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"Xkk83MdPGWwWb2yX","changes":[{"key":"flags.midi-qol.advantage.skill.acr","mode":5,"value":"1","priority":"20"},{"key":"flags.midi-qol.advantage.skill.ath","mode":5,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null,"seconds":600},"icon":"systems/dnd5e/icons/skills/blue_23.jpg","label":"Peerless Athlete","origin":"Item.xJ3uiHOSl6ZDElTz","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.advantage.skill.acr","flags.midi-qol.advantage.skill.ath"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":216,"data":{"id":216,"name":"Remarkable Athlete","prerequisite":null,"description":"<p class=\"compendium-hr\">Starting at 7th level, you can add half your proficiency bonus (round up) to any Strength, Dexterity, or Constitution check you make that doesn’t already use your proficiency bonus.</p>\r\n<p class=\"Core-Styles_Core-Body\">In addition, when you make a running long jump, the distance you can cover increases by a number of feet equal to your Strength modifier.</p>","requiredLevel":7,"displayOrder":2},"version":"2.9.8","featureId":216,"requiredLevel":7,"prerequisite":null,"class":"Champion","classId":16,"subClass":"Champion"},"obsidian":{"source":{"type":"class","text":"Champion"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.world.ddb-class-features.7rTzj1cBRBDKOb7R"},"scene-packer":{"hash":"85532482930e9a748a13290e9b94cc294c7315dc","sourceId":"Item.NCcm6daO1Jkn5vXH"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"m9hKr1NIpAjIuPjX"}
{"name":"Channel Divinity: Radiance of the Dawn","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"As an action, you can use Channel Divinity and present your holy symbol to dispel any magical darkness within 30 ft. Each hostile creature (that doesn't have total cover) within 30 ft. must make a CON saving throw (DC +15) or take 2d10 +10 radiant damage (half damage on success).\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>Starting at 2nd level, you can use your Channel Divinity to harness sunlight, banishing darkness and dealing radiant damage to your foes.</p>\n<p>As an action, you present your holy symbol, and any magical darkness within 30 feet of you is dispelled. Additionally, each hostile creature within 30 feet of you must make a Constitution saving throw. A creature takes radiant damage equal to 2d10 + your cleric level on a failed saving throw, and half as much damage on a successful one. A creature that has total cover from you is not affected.</p>\n  <p></p>\n</details>","chat":"As an action, you can use Channel Divinity and present your holy symbol to dispel any magical darkness within 30 ft. Each hostile creature (that doesn't have total cover) within 30 ft. must make a CON saving throw (DC +15) or take 2d10 +10 radiant damage (half damage on success).\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>Starting at 2nd level, you can use your Channel Divinity to harness sunlight, banishing darkness and dealing radiant damage to your foes.</p>\n<p>As an action, you present your holy symbol, and any magical darkness within 30 feet of you is dispelled. Additionally, each hostile creature within 30 feet of you must make a Constitution saving throw. A creature takes radiant damage equal to 2d10 + your cleric level on a failed saving throw, and half as much damage on a successful one. A creature that has total cover from you is not affected.</p>\n  <p></p>\n</details>","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"enemy"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["2d10[radiant] + @classes.cleric.levels","radiant"]],"versatile":"","value":""},"formula":"","save":{"ability":"con","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"attunement":null},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53344","entityTypeId":"222216831","componentId":138,"componentTypeId":12168134,"class":"Cleric","subclass":"Light Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"cjwzq7lf48igj2ev","ignoreIcon":false,"ignoreItemImport":false,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"f3d4a8b6495410c0538c26918c525771e5193607","sourceId":"Item.bRTDkQAywbR5uJQE"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":true,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.BvxA3rBt3nvjgMti"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.266","systemVersion":"1.5.7"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"IDispfexeWR3awzF"}
{"name":"Channel Divinity: Turn Undead","type":"feat","img":"icons/magic/holy/barrier-shield-winged-blue.webp","data":{"description":{"value":"<p data-content-chunk-id=\"c555ff21-2d21-4512-af3e-64d83e2424c7\">As an action, you present your holy symbol and speak a prayer censuring the undead. Each undead that can see or hear you within 30 feet of you must make a Wisdom saving throw. If the creature fails its saving throw, it is turned for 1 minute or until it takes any damage.</p>\n<p data-content-chunk-id=\"160cc2d8-290d-41a4-9d8b-2cad06f691cd\">A turned creature must spend its turns trying to move as far away from you as it can, and it can’t willingly move to a space within 30 feet of you. It also can’t take reactions. For its action, it can use only the <a class=\"tooltip-hover action-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/combat#Dash\" data-tooltip-href=\"//www.dndbeyond.com/actions/4-tooltip?disable-webm=1&amp;disable-webm=1\">Dash</a> action or try to escape from an effect that prevents it from moving. If there’s nowhere to move, the creature can use the <a class=\"tooltip-hover action-tooltip\" href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/combat#Dodge\" data-tooltip-href=\"//www.dndbeyond.com/actions/6-tooltip?disable-webm=1&amp;disable-webm=1\">Dodge</a> action.</p>\n<p data-content-chunk-id=\"a9da483d-3673-4ec3-a835-25db85a1ab54\">Starting at 5th level, when an undead fails its saving throw against your Turn Undead feature, the creature is instantly destroyed if its challenge rating is at or below a certain threshold, as shown in the Destroy Undead table.</p>\n<div class=\"table-overflow-wrapper\">\n<table class=\"table-compendium table--left-col2\" style=\"width:100%\" data-content-chunk-id=\"35a0a521-3137-432c-af7b-2dee8086cb32\"><caption id=\"DestroyUndeadTable\" class=\"compendium-hr heading-anchor\">Destroy Undead</caption>\n<thead>\n<tr>\n<th style=\"width:32.13%\">Cleric Level</th>\n<th style=\"width:67.87%\">Destroys Undead of CR...</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"width:32.13%\">5th</td>\n<td style=\"width:67.87%\">1/2 or lower</td>\n</tr>\n<tr>\n<td style=\"width:32.13%\">8th</td>\n<td style=\"width:67.87%\">1 or lower</td>\n</tr>\n<tr>\n<td style=\"width:32.13%\">11th</td>\n<td style=\"width:67.87%\">2 or lower</td>\n</tr>\n<tr>\n<td style=\"width:32.13%\">14th</td>\n<td style=\"width:67.87%\">3 or lower</td>\n</tr>\n<tr>\n<td style=\"width:32.13%\">17th</td>\n<td style=\"width:67.87%\">4 or lower</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"DivineIntervention\" class=\"compendium-hr heading-anchor\" data-content-chunk-id=\"80ac5852-a984-4e93-a31d-5a0a61f7bf34\"></h3>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.8 April 4 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB p194","activation":{"type":"action","cost":1,"condition":"undead"},"duration":{"value":null,"units":"inst"},"target":{"value":30,"width":null,"units":"ft","type":"creature"},"range":{"value":null,"long":null,"units":"spec"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"spell"},"requirements":"Cleric","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"3adv1867dmy3nrmn","changes":[],"disabled":false,"duration":{"startTime":null,"seconds":60},"icon":"systems/dnd5e/icons/skills/yellow_19.jpg","label":"Channel Divinity: Turn Undead","origin":"Actor.4okcHmPmM1iBwyFs.Item.0Gd8ADfg2sOZyTyq","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"b90c34046fe33ab96aaac10b89e8a04146883758","sourceId":"Item.rrThGAVfh4DuJyIN"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false,"forceCEOff":false,"onUseMacroName":"[all]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.r5SIR5IwtjxLYHvO"},"itemacro":{"macro":{"data":{"_id":null,"name":"Channel Divinity: Turn Undead","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nCleric: Turn Undead\n\nUSEAGE : ACTIVATE TO CHANNEL DIVINITY : TURN UNDEAD\nClick on this item to activate the turn undead.  \nPlease remember to setup usage consumption in the itme itself.  \n \nMANEUVER DESCRIPTION:\nAs an action, you present your holy symbol and speak a prayer censuring the undead. Each undead that \ncan see or hear you within 30 feet of you must make a Wisdom saving throw. If the creature fails its \nsaving throw, it is turned for 1 minute or until it takes any damage.\n\nA turned creature must spend its turns trying to move as far away from you as it can, and it can’t \nwillingly move to a space within 30 feet of you. It also can’t take reactions. For its action, it \ncan use only the Dash action or try to escape from an effect that prevents it from moving. If there’s \nnowhere to move, the creature can use the Dodge action.\n\nStarting at 5th level, when an undead fails its saving throw against your Turn Undead feature, the \ncreature is instantly destroyed if its challenge rating is at or below a certain \nthreshold, as shown in the Destroy Undead algorithm below:\n\nif cleric level > 16 ... CR <= 4 DEAD else\n    if cleric level > 13 ... CR <= 3 DEAD else\n        if cleric level > 10 ... CR <= 2 DEAD else\n            if cleric level > 7 ... CR <= 1 DEAD else\n                if cleric level >4 ... CR <= 1/2 DEAD\n                        \nv0.8 April 4 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"preambleComplete\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    console.log (\"MACRO TEST | STARTING TARGETS: %O\",workflow.targets);\n    // I am stealing the activation condition as a string for the creature type I want to hit\n    const activationCondition = args[0].itemData.data.activation.condition.toLowerCase();\n    for (let target of workflow.targets) {\n        let creatureType = target.actor.data.data.details.type;\n        if ((creatureType === null) || (creatureType === undefined))    // that is not a creature\n            workflow.targets.delete(target);\n        else if (!([creatureType.value.toLowerCase(), creatureType.subtype.toLowerCase()].includes(activationCondition.toLowerCase()))) {\n            console.log (\"MACRO TEST | REMOVE TARGET: %O %s\", target, creatureType);\n            workflow.targets.delete(target);\n        }\n        game.user.updateTokenTargets(Array.from(workflow.targets).map(t=>t.id));\n    }\n} else if (args[0].macroPass === \"postActiveEffects\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const pcActor = workflow.actor;\n    console.log (\"MACRO TEST | REMOVED ALL NON UNDEAD TARGETS: %O\",workflow.targets);\n\n    // set CR to destory\n    let crDestroy = 0.0;\n    if (workflow.targets.size === 0) return;\n    const actorClass = testClass(pcActor, \"cleric\", null, 1);\n    if (!actorClass) return;\n    if (actorClass.levels > 16) crDestroy = 4;\n        else if (actorClass.levels > 13) crDestroy = 3;\n            else if (actorClass.levels > 10) crDestroy = 2;\n                else if (actorClass.levels > 7) crDestroy = 1;\n                    else if (actorClass.levels > 4) crDestroy = 0.5;\n    \n    // set HP = 0 for all targets of the CR or less\n    let target = null;\n    for (target of workflow.targets) \n        if (target.document._actor.data._source.data.details.cr <= crDestroy) {\n            console.log (\"MACRO TEST | DESTROY TARGET: %O %d\",target, target.document._actor.data._source.data.details.cr);\n            await target.actor.update({\"data.attributes.hp.value\": 0});\n        }\n} \n\n// Test PC Class, Subclass and Class Level, RETURN the class object or null\nfunction testClass (testActor, className, subClassName, levels) {\n    let theClass = testActor.data.data.classes[className] ;\n    if (theClass) {\n        if ((levels > 0) && (theClass.levels >= levels)) {\n            if (subClassName === null || (theClass.subclass === subClassName)) {\n                return theClass;\n            }\n        }\n    }\n    return null;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"testWorld","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"lioqfhZuE4q4zQQ7"}
{"name":"Circle of Mortality","type":"feat","img":"systems/dnd5e/icons/skills/affliction_10.jpg","data":{"description":{"value":"You restore maximum possible HP on each dice (instead of rolling) with healing spells to a creature with 0 HP. You learn the spare the dying cantrip, can cast it as a bonus action, and it has a range of 30 ft.","chat":"You restore maximum possible HP on each dice (instead of rolling) with healing spells to a creature with 0 HP. You learn the spare the dying cantrip, can cast it as a bonus action, and it has a range of 30 ft.","unidentified":""},"source":"PHB","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric: Grave Domain","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"1jud0luaqrwjayvy","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Circle of Mortality,all","priority":"10"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/affliction_10.jpg","label":"Circle of Mortality","origin":"Actor.Uv8E8r17bCEb1o2e.Item.3aDwBUf6nDcPVKz7","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53464","entityTypeId":"222216831","componentId":664,"componentTypeId":12168134,"class":"Cleric","subclass":"Grave Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"qr5dq6rdmr31r67m"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"9322f8190b691078484ac5bb8fb1f73e45aabde8","sourceId":"Item.rmIlA4EpUQtohU26"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"itemacro":{"macro":{"data":{"_id":null,"name":"Circle of Mortality","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nCircle of Mortality\nAt 1st level, you gain the ability to manipulate the line between life and death. When you would normally \nroll one or more dice to restore hit points with a spell to a creature at 0 hit points, you instead \nuse the highest number possible for each die.\n\nv0.5 April 13 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"postDamageRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    const actorUuid = workflow.tokenUuid;\n    const actorToken = canvas.tokens.get(workflow.tokenId);\n    const thisItem = actorToken.actor.items.find(i=> i.name === \"Circle of Mortality\")?.data;\n    let targetTokenUuid = args[0].hitTargetUuids[0];\n    let targetToken = await fromUuid(targetTokenUuid);\n    let targetActor = targetToken.actor;\n\n    // if Target HP > 0 return \n    if (targetActor.data.data.attributes.hp.value != 0) return;\n\n    // check to make sure only one target is selected\n    if ((args[0].targetUuids.length < 1) || (args[0].targetUuids.length > 1)) {\n        ui.notifications.error(\"You need to select a single target.\");\n        return;\n    }\n\n    // compute maximum healing for the spell cast\n    let healingRollMax = 0;\n    for (let i = 0; i < workflow.damageRoll.terms.length; i++) \n        if (workflow.damageRoll.terms[i]?.faces) healingRollMax = healingRollMax+(workflow.damageRoll.terms[i].faces*workflow.damageRoll.terms[i].number);\n            else if (workflow.damageRoll.terms[i]?.number) healingRollMax = healingRollMax+workflow.damageRoll.terms[i].number; \n    let bonusHealing = (healingRollMax - workflow.damageRoll.total); \n    await setProperty(workflow, \"BonusHealing\", bonusHealing);\n\n    // trigger BonusDamage to apply the extra damage / adjustments outside of the normal damage roll\n    let effectData = {\n        label : \"Healing Mortality\",\n        changes: [ {key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.Circle of Mortality,all`, priority: 20} ],\n        icon : thisItem.img,\n        origin: thisItem.uuid,\n        duration: {turns: 1}\n    };    \n    \n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: actorUuid, effects: [effectData]}); \n    return; \n\n} else if(args[0].tag === \"DamageBonus\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    const actorUuid = workflow.tokenUuid;\n    const actorToken = canvas.tokens.get(workflow.tokenId);\n    let bonusHealing = await getProperty(workflow, \"BonusHealing\");\n\n    // remove extra damage effect \n    let effect = await findEffect(actorToken, \"Healing Mortality\");\n    await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: actorUuid, effects:[effect.id]});\n    \n    // Bonus Healing\n    return {damageRoll: `${bonusHealing}[healing]`, flavor: \"Circle of Morality Bonus Healing\"}; \n}\n\n// Function to test for an effect\nasync function findEffect (target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef=> ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":true},"core":{"sourceId":"Item.edUabd3mcVcUaLtm"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"YdeK2DceKXU46q1K"}
{"name":"Divine Fury","type":"feat","img":"icons/magic/fire/projectile-wave-arrow.webp","data":{"description":{"value":"<p>Starting when you choose the Zealot Path at 3rd level, you can channel divine fury into your weapon strikes. While you’re raging, the first creature you hit on each of your turns with a weapon attack takes extra damage equal to 1d6 + half your barbarian level. The extra damage is necrotic or radiant; you choose the type of damage when you gain this feature.</p>\n<p> </p>\n<details>\n<summary>VERSION INFO</summary>\n<p>v0.3 March 27 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"XGtE p11","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Barbarian Zealot Path","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"YJK1tQQIV2Ycrqy0","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Divine Fury","priority":"30"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/magic/fire/projectile-wave-arrow.webp","label":"Divine Fury","origin":"Item.5PUe0GiheEHUomoR","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.DamageBonusMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"83b465844b4c30f51cab0eded01ba808d96a4265","sourceId":"Item.BzNypQFhCZMcT34V"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Divine Fury","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nDivine Fury | Auto Divine Fury  [there are two items to make this function]\n\nNOTE: I used Tom Posney's MIDI-QOL Sneak Attack / Auto Sneak Attack as a templete for this\n\nUSEAGE : PASSIVE\nPlease place these two items on a Barbarian Zealot\n \nMANEUVER DESCRIPTION:\nStarting when you choose this path at 3rd level, you can channel divine fury into your \nweapon strikes. While you’re raging, the first creature you hit on each of your turns \nwith a weapon attack takes extra damage equal to 1d6 + half your barbarian level. \nThe extra damage is necrotic or radiant; you choose the type of damage when you gain this feature.\n\nv0.3 March 27 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif ([\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) {\n    let pcActor = token.actor;\n    const pcBarbarian = testClass (pcActor, \"barbarian\", \"Path of the Zealot\", 3);\n    if (testClass === null) ui.notifications.error(\"You are not a Barbarian Zealot of at least level 3!\");\n        else {\n            let n = actor.effects._source.length;\n            let rageEffect = false;\n            for (let i = 0; i < n; i++) {\n                if (actor.effects._source[i].label === \"Rage\") rageEffect = true;\n            }\n            if (!rageEffect) return;\n\n            // Ceck to see if you have already made a divine fury attack this round\n            if (game.combat) {\n                const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n                const lastTime = actor.getFlag(\"midi-qol\", \"divineFuryTime\");\n                if (combatTime === lastTime) return {};  // already used divine fury this round\n            }\n \n            // check to see if autoDivineFury is active, if it is skip the prompt\n            let useDivineFury = getProperty(actor.data, \"flags.dae.autoDivineFury\");\n            if (!useDivineFury) {\n                console.log(\"MACRO | prompt user with dialog to use Divine Fury\");\n                let dialog = new Promise((resolve, reject) => {\n                new Dialog({\n                // localize this text\n                title: \"Conditional Damage\",\n                content: `<p>Use Divine Fury?</p>`,\n                buttons: {\n                    one: {\n                        icon: '<i class=\"fas fa-check\"></i>',\n                        label: \"Confirm\",\n                        callback: () => resolve(true)\n                    },\n                    two: {\n                        icon: '<i class=\"fas fa-times\"></i>',\n                        label: \"Cancel\",\n                        callback: () => {resolve(false)}\n                    }\n                },\n                default: \"two\"\n                }).render(true);\n                });\n                useDivineFury = await dialog;\n            }\n            if (!useDivineFury) return {};  // do not use divine fury\n\n            // the player wants to use divine fury or autoDivineFury is active\n            const diceMult = args[0].isCritical ? 2: 1;\n            const baseDice = 1; \n            const baseBonus = Math.ceil(pcBarbarian.levels/2);\n\n            if (game.combat) {\n                const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n                const lastTime = actor.getFlag(\"midi-qol\", \"divineFuryTime\");\n                if (combatTime !== lastTime) {\n                    await actor.setFlag(\"midi-qol\", \"divineFuryTime\", combatTime)\n                }\n            }\n            return {damageRoll: `${baseDice * diceMult}d6 + ${baseBonus}`, flavor: \"Divine Fury\"};\n        }\n}  \n\n// Test PC Class, Subclass and Class Level\n// RETURN the class object (TRUE) or null (FALSE)\nfunction testClass (testActor, className, subClassName, levels) {\n    let theClass = testActor.data.data.classes[className] ;\n    if (theClass) {\n        if ((levels > 0) && (theClass.levels >= levels)) {\n            if (subClassName === null || (theClass.subclass === subClassName)) {\n                return theClass;\n            }\n        }\n    }\n    return null;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.5PUe0GiheEHUomoR"},"exportSource":{"world":"test","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"YdxJogfwUBdn9l4U"}
{"name":"Eyes of Night","type":"feat","img":"systems/dnd5e/icons/skills/shadow_17.jpg","data":{"description":{"value":"<p>You can see through the deepest gloom. You have darkvision out to a range of 300 feet. In that radius, you can see in dim light as if it were bright light and in darkness as if it were dim light. </p>\n<details>\n<summary>VERSION INFO</summary>\n<p>v0.5 April 2 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"As an action, you can share your 300 ft. @Compendium[dnd5e.rules.Darkvision]{darkvision} with up to +4 willing creatures you can see within 10 ft. of you, lasting for 1 hour. Once you share it, you can’t do so again until you finish a long rest, unless you expend a spell slot of any level to share it again.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p><em>1st-level Twilight Domain feature</em></p>\n<p>You can see through the deepest gloom. You have @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} out to a range of 300 feet. In that radius, you can see in dim light as if it were bright light and in darkness as if it were dim light.</p>\n<p>As an action, you can magically share the @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} of this feature with willing creatures you can see within 10 feet of you, up to a number of creatures equal to your Wisdom modifier (minimum of one creature). The shared @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} lasts for 1 hour. Once you share it, you can’t do so again until you finish a long rest, unless you expend a spell slot of any level to share it again.</p>\n  <p></p>\n</details>","unidentified":""},"source":"TCoE p34","activation":{"type":"none","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric Twilight Domain","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"WysKNsnpbFv2ZWLB","changes":[{"key":"ATL.dimSight","mode":2,"value":"300","priority":"40"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/shadow_17.jpg","label":"Eyes of Night","origin":"Item.BsbEEhiIUMijPdYz","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"ATL.dimSight"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2409717","entityTypeId":"222216831","componentId":2996540,"componentTypeId":12168134,"class":"Cleric","subclass":"Twilight Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"iyl0evwnfwrvm9lh"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"d6ccd861eb98099e5f11b0064de7676cf5507064","sourceId":"Item.PCAu9fa2ZxyDpBxZ"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Eyes of Night","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.BsbEEhiIUMijPdYz"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"poAFfXFx6o6n9weu"}
{"name":"Fey Presence","type":"feat","img":"systems/dnd5e/icons/spells/evil-eye-eerie-3.jpg","data":{"description":{"value":"<p data-content-chunk-id=\"8311fd28-6b27-4a6f-a8df-1c330de651bf\">Starting at 1st level, your patron bestows upon you the ability to project the beguiling and fearsome presence of the fey. As an action, you can cause each creature in a 10-foot cube originating from you to make a Wisdom saving throw against your warlock spell save DC. The creatures that fail their saving throws are all <a href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/appendix-a-conditions#Charmed\" data-tooltip-href=\"//www.dndbeyond.com/conditions/2-tooltip?disable-webm=1&amp;disable-webm=1\">charmed</a> or <a href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/appendix-a-conditions#Frightened\" data-tooltip-href=\"//www.dndbeyond.com/conditions/5-tooltip?disable-webm=1&amp;disable-webm=1\">frightened</a> by you (your choice) until the end of your next turn.</p>\n<p data-content-chunk-id=\"1e9c2965-b5dc-4d9e-86eb-5e73e0c8004\">Once you use this feature, you can’t use it again until you finish a short or long rest.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">ACTIVATE ANYTIME</span></summary>\n<p>You may activate this effect as an action when your character gets to act.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.3 April 11 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"Once per short rest, as an action, you can cause each creature in a 10-ft. cube from you to make a WIS saving throw (DC +14) or become @Compendium[dnd5e.rules.Charmed]{charmed} or @Compendium[dnd5e.rules.Frightened]{frightened} by you (your choice) until the end of your next turn.","unidentified":""},"source":"PHB","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":10,"width":null,"units":"ft","type":"creature"},"range":{"value":null,"long":null,"units":"spec"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"spell"},"requirements":"Warlock: Fey Patron","recharge":{"value":null,"charged":false},"quantity":1,"weight":null,"price":null},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"1035","entityTypeId":"222216831","componentId":396,"componentTypeId":12168134,"class":"Warlock","subclass":"The Archfey","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"py0qw85udlapktp3"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Warlock"}},"link-item-resource-5e":{"resource-link":"primary"},"scene-packer":{"hash":"06942a8bf2751d885908af4e4cb30ed7c953b684","sourceId":"Item.GKuI0kasaWJjhUF3"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[all]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Fey Presence","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nFey Presence\n\nOnce per short rest, as an action, you can cause each creature in a 10-ft. cube \nfrom you to make a WIS saving throw (DC +14) or become charmed or frightened by \nyou (your choice) until the end of your next turn.\n\n- target evertything in a ten foot cube \nv0.3 April 11 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"preambleComplete\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    // prompt user for the fightened or charmed effect, store on the workflow as feyPresenceEffect \n    let dialog = new Promise((resolve) => {\n        new Dialog({\n            // localize this text\n            title: \"Fey Presence:\",\n            content: \"<p>Select the desired effect fightened or charmed?</p>\",\n            buttons: {\n                one: {\n                    icon: '<p> </p><img src = \"modules/dfreds-convenient-effects/images/frightened.svg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>Frightened</p>\",\n                    callback: () => resolve(\"Frightened\")\n                },\n                two: {\n                    icon: '<p> </p><img src = \"modules/dfreds-convenient-effects/images/charmed.svg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>Charmed</p>\",\n                    callback: () => {resolve(\"Charmed\")}\n                }\n            },\n            default: \"one\"\n        }).render(true);\n    });\n    let selectedEffect = await dialog;\n    await setProperty(workflow, \"feyPresenceEffect\", selectedEffect);\n\n} else if (args[0].macroPass === \"postActiveEffects\") {\n    let workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    //for every target the failed the saving throw apply the selected feyPresenceEffect\n    let effect = getProperty(workflow, \"feyPresenceEffect\");\n    if (effect)\n        for (target of args[0].failedSaves) {\n            let targetActor = target.actor;\n            if (effect === \"Frightened\") await applyFrightenedEffect(targetActor, args);\n                else if (effect === \"Charmed\") await applyCharmedEffect(targetActor, args);\n                else ui.notifications.error(\"An error occured applying the effect.\");\n        }\n} return;\n\n// Apply the fightened effect to the target\nasync function applyFrightenedEffect(target, args) {\n    let effectData = {\n        label : \"Frightened\",\n        icon : \"modules/dfreds-convenient-effects/images/frightened.svg\",\n        origin: args.uuid,\n        changes: [\n            { \"key\": \"flags.midi-qol.disadvantage.attack.all\", \"value\": `1`, \"mode\": 0, \"priority\": 20 },\n            { \"key\": \"flags.midi-qol.disadvantage.ability.check.all\", \"value\": `1`, \"mode\": 0, \"priority\": 20 }\n        ],\n        disabled: false,\n        flags: {\n                dae: {specialDuration: [\"turnEndSource\"]},\n                core: {statusId: \"Convenient Effect: Frightened\"}\n               }\n       }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n}\n\n// Apply the charmed effect to the target\nasync function applyCharmedEffect(target, args) {\n    let effectData = {\n        label : \"Charmed\",\n        icon : \"modules/dfreds-convenient-effects/images/charmed.svg\",\n        origin: args.uuid,\n        disabled: false,\n        flags: {\n                dae: {specialDuration: [\"turnEndSource\"]},\n                core: {statusId: \"Convenient Effect: Charmed\"}\n               }\n    }   \n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"rs6o4cNwjQAbRdql"}
{"name":"Gift of the Eyes of Night","type":"feat","img":"systems/dnd5e/icons/skills/shadow_17.jpg","data":{"description":{"value":"<p>You can see through the deepest gloom. You have darkvision out to a range of 300 feet. In that radius, you can see in dim light as if it were bright light and in darkness as if it were dim light.</p>\n<p>As an action, you can magically share the darkvision of this feature with willing creatures you can see within 10 feet of you, up to a number of creatures equal to your Wisdom modifier (minimum of one creature). The shared darkvision lasts for 1 hour. Once you share it, you can’t do so again until you finish a long rest, unless you expend a spell slot of any level to share it again.</p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.5 April 2 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>\n<p> </p>","chat":"As an action, you can share your 300 ft. @Compendium[dnd5e.rules.Darkvision]{darkvision} with up to +4 willing creatures you can see within 10 ft. of you, lasting for 1 hour. Once you share it, you can’t do so again until you finish a long rest, unless you expend a spell slot of any level to share it again.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p><em>1st-level Twilight Domain feature</em></p>\n<p>You can see through the deepest gloom. You have @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} out to a range of 300 feet. In that radius, you can see in dim light as if it were bright light and in darkness as if it were dim light.</p>\n<p>As an action, you can magically share the @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} of this feature with willing creatures you can see within 10 feet of you, up to a number of creatures equal to your Wisdom modifier (minimum of one creature). The shared @Compendium[dnd5e.rules.10RNSKCH2hTja3DG]{darkvision} lasts for 1 hour. Once you share it, you can’t do so again until you finish a long rest, unless you expend a spell slot of any level to share it again.</p>\n  <p></p>\n</details>","unidentified":""},"source":"TCoE p34","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":4,"width":null,"units":"","type":"creature"},"range":{"value":10,"long":10,"units":"ft"},"uses":{"value":1,"max":"1","per":"lr"},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric Twilight Domain","recharge":{"value":null,"charged":false}},"effects":[{"_id":"eh177mjwrheqqh5w","changes":[{"key":"ATL.dimSight","mode":2,"value":"300","priority":"40"}],"disabled":false,"duration":{"startTime":null,"seconds":3600},"icon":"systems/dnd5e/icons/skills/shadow_17.jpg","label":"Eyes of Night","origin":"Actor.4okcHmPmM1iBwyFs.Item.lpKBbM6Rsla8ZL64","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"ATL.dimSight"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"2409717","entityTypeId":"222216831","componentId":2996540,"componentTypeId":12168134,"class":"Cleric","subclass":"Twilight Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"iyl0evwnfwrvm9lh"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"scene-packer":{"hash":"4655a7fac8ab8ec2e61e7ea9f5786436d3b9e02f","sourceId":"Item.FuzyG18iZvJMi4Uj"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Eyes of Night","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.yLmIyy87Eh8dzywq"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"3pGDxx5z2Y6FLinD"}
{"name":"Incisive Sense","type":"feat","img":"icons/equipment/back/cloak-hooded-green-gold.webp","data":{"description":{"value":"<p>You have advantage on Intelligence (@Compendium[dnd5e.rules.Using Each Ability]{Investigation}) and Wisdom (@Compendium[dnd5e.rules.Using Each Ability]{Insight}) checks.</p>","chat":"<p>You have advantage on Intelligence (@Compendium[dnd5e.rules.Using Each Ability]{Investigation}) and Wisdom (@Compendium[dnd5e.rules.Using Each Ability]{Insight}) checks.</p>","unidentified":""},"source":"Explorer's Guide to Wildemount pg 163","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"f50j8dfdk7sz7lfe","changes":[{"key":"flags.midi-qol.advantage.skill.ins","mode":5,"value":"1","priority":"20"},{"key":"flags.midi-qol.advantage.skill.inv","mode":5,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"icons/equipment/back/cloak-hooded-green-gold.webp","label":"Incisive Sense","origin":"Actor.6OUbrDvzBaKBNRuA.Item.VPKVVTDdrss5Yi0f","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.advantage.skill.ins","flags.midi-qol.advantage.skill.inv"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":2821775,"type":"race","entityTypeId":1960452172,"dndbeyond":{"displayOrder":200},"importId":"8i3k4hbim8bho1dm"},"obsidian":{"source":{"type":"race"}},"scene-packer":{"hash":"5de62dc4c815d3ec1140e76ea64d4ccff54adb31","sourceId":"Item.qSAhMNWngLTJD6nO"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.266","systemVersion":"1.5.7"},"core":{"sourceId":"Item.1AgaCsP9EpGaadae"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"HbsHA2DxLSEYBgyw"}
{"name":"Inspiring Smite","type":"feat","img":"icons/magic/life/heart-cross-blue.webp","data":{"description":{"value":"<p>Immediately after you deal damage to a creature with your Divine Smite feature, you can use your Channel Divinity as a bonus action and distribute temporary hit points to creatures of your choice within 30 feet of you, which can include you. The total number of temporary hit points equals 2d8 + your level in this class, divided among the chosen creatures however you like.</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to use Channel Divinity: Inspiring Smite first, after you deal smite damage.</p>\n<p> </p>\n</details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.1 April 13 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"MOoT p.29","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":"","type":"lr"},"consume":{"type":"","target":"","amount":8},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"Inspiring Smite","critical":{"threshold":null,"damage":null},"damage":{"parts":[["8","healing"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin: Oath of Glory","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10},"attunement":0},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"_sheetTab":"description","entityorder":{"order":161},"dynamiceffects":{"effects":[],"alwaysActive":false,"equipActive":false},"favtab":{"isFavourite":true,"isFavorite":true},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Inspiring Smite","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nInspiring Smite\nImmediately after you deal damage to a creature with your Divine Smite feature, you can use your Channel Divinity\nas a bonus action and distribute temporary hit points to creatures of your choice within 30 feet of you, which \ncan include you. The total number of temporary hit points equals 2d8 + your level in this class, divided among \nthe chosen creatures however you like.\n\nUSE: Must Manually triggered after channel divinity: Inspiring Smite to distribute healing pool\nCheck to make sure Channel Divinity: Inspiring Smite created a healing pool > 0\nCheck to make sure one target is targeted\n    - display dialog how much of the pool is left\n    - display dialog how much the target actor needs healing\n    - allow them to type in the amount (default max to heal target)\n    - [heal] [cancel]\n    - Apply healing if requested to the target\n\nNOTE: PARTS OF THIS AUTOMATION WERE TAKEN FROM \"MidiQOL Sample Items\" SPELL: LAY ON HANDS\nBy Author: Tim Poseney   https://gitlab.com/tposney/midi-qol\n\nv0.1 April 13 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"preItemRoll\") {\n    // get healthpool if not available send a notification\n    let healingPool = actor.getFlag(\"dae\",\"healingpool\");\n    if ((!healingPool) || (!healingPool > 0)) {\n        ui.notifications.warn(\"You either have no healing pool left or you have not used Channel Divinity: Inspiring Smite...\");\n        return false;\n    }\n    \n    // check to make sure there is a target to heal and only one is selected\n    let theTarget = args[0].targets[0];\n    if ((!theTarget) || (args[0].targets.length > 1)) {\n        ui.notifications.warn(\"Please select a target to heal with Inspiring Smite\");\n        return false;\n    }\n  \n    // does not work on undead/constructs - not sure if this is RAW but makes sense given Inspiring Smite \n    let invalid = [\"undead\", \"construct\"].some(type => (theTarget?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\n    if (invalid) {\n        ui.notifications.warn(\"Inspiring Smite can't affect undead/constructs\")\n        return false;\n    }\n\n    let targetToken = await fromUuid(args[0].targetUuids[0]);\n    let targetActor = targetToken.actor;\n    let targetDamage = targetActor.data.data.attributes.hp.max - targetActor.data.data.attributes.hp.value;\n\n    // prompt for how much to use...\n    let d = new Promise((resolve, reject) => {\n      let theDialog = new Dialog({\n        title: \"Inspiring Smite\",\n        content: `<p>Your targets current damage level: ${targetDamage}</p>\n                  <p>How many points to use? ${healingPool} left in your Healing Pool<input id=\"mqlohpoints\" type=\"number\" min=\"0\" step=\"1.0\" max=\"${healingPool}\"></input></p>`,\n        buttons: {\n          heal: {\n            icon: '<p></p><img src = \"icons/magic/life/heart-cross-blue.webp\" width=\"60\" height=\"60\"></>',\n            label: \"<p>HEAL</p>\",\n            callback: (html) => { resolve(Math.clamped(Math.floor(Number(html.find('#mqlohpoints')[0].value)), 0, healingPool)); }\n          },\n          abort: {\n            icon: '<p></p><img src = \"icons/svg/cancel.svg\" width=\"60\" height=\"60\"></>',\n            label: \"<p>CANCEL</p>\",\n            callback: () => { resolve(false) }\n          },\n        },\n        default: \"abort\",\n      }).render(true);\n    });\n    const consumed = await d;\n    if (!consumed) return false;\n\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const theItem = workflow.item;\n    let updates;\n    if (consumed > 0) {\n      updates = {\n        \"data.consume.amount\": Math.abs(consumed),\n        \"data.damage.parts\": [[`${Math.max(0, consumed)}`, \"healing\"]],\n        \"data.chatFlavor\": \"Inspiring Smite\"\n      };\n    } \n\n    // remove consumed from pool\n    healingPool = healingPool - consumed;\n    actor.setFlag(\"dae\",\"healingpool\",healingPool);\n\n    return theItem.update(updates);\n  }\n  return true;","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.IM2UCUasJLD5J7Fw"},"scene-packer":{"sourceId":"Item.btYfM4eeeuXQ5k45","hash":"4343a6b852c6f8fea3c33823073d773ab1270386"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"_id":"V40vvtPpMVLUs5Lt"}
{"name":"Misty Escape","type":"feat","img":"systems/dnd5e/icons/spells/wind-grasp-air-1.jpg","data":{"description":{"value":"<p>Starting at 6th level, you can vanish in a puff of mist in response to harm. When you take damage, you can use your reaction to turn <a href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/appendix-a-conditions#Invisible\" data-tooltip-href=\"//www.dndbeyond.com/conditions/8-tooltip?disable-webm=1&amp;disable-webm=1\">invisible</a> and teleport up to 60 feet to an unoccupied space you can see. You remain <a href=\"https://www.dndbeyond.com/compendium/rules/basic-rules/appendix-a-conditions#Invisible\" data-tooltip-href=\"//www.dndbeyond.com/conditions/8-tooltip?disable-webm=1&amp;disable-webm=1\">invisible</a> until the start of your next turn or until you attack or cast a spell.</p>\n<p>Once you use this feature, you can’t use it again until you finish a short or long rest.</p>\n<p><br /><br /></p>\n<p> </p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"reactiondamage","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Warlock: The Archfey","recharge":{"value":null,"charged":false},"attunement":null},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"d603fe95057ceb195b456eb11261a619f3e1128f","sourceId":"Item.T6ro4mJIxfNXLxvg"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Misty Escape","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nMisty Escape\nStarting at 6th level, you can vanish in a puff of mist in response to harm. When you take damage, \nyou can use your reaction to turn invisible and teleport up to 60 feet to an unoccupied space you \ncan see. You remain invisible until the start of your next turn or until you attack or cast a spell.\nOnce you use this feature, you can’t use it again until you finish a short or long rest.\n\nNOTE: PARTS OF THIS AUTOMATION WERE TAKEN FROM \"MIDI-SRD\" SPELL: MISTY STEP\nBy Author: Kandashi   https://github.com/kandashi/Dynamic-Effects-SRD\n\nv0.1 April 11 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git\n*****/\n\nif (args[0].macroPass === \"preItemRoll\") {\n    let pcToken = token;\n    let pcActor = token.actor.data.data;\n    const target = canvas.tokens.get(pcToken.tokenId) || token;\n\n    let range = canvas.scene.createEmbeddedDocuments(\"MeasuredTemplate\", [{\n        t: \"circle\",\n        user: game.user._id,\n        x: target.x + canvas.grid.size / 2,\n        y: target.y + canvas.grid.size / 2,\n        direction: 0,\n        distance: 60,\n        borderColor: \"#FF0000\",\n        flags: { DAESRD: { MistyEscape: { ActorId: pcActor.id } } }\n    }]);\n\n    range.then(result => {\n        let templateData = {\n            t: \"rect\",\n            user: game.user._id,\n            distance: 7.5,\n            direction: 45,\n            x: 0,\n            y: 0,\n            fillColor: game.user.color,\n            flags: { DAESRD: { MistyEscape: { ActorId: pcActor.id } } }\n        };\n\n        Hooks.once(\"createMeasuredTemplate\", deleteTemplatesAndMove);\n        let doc = new CONFIG.MeasuredTemplate.documentClass(templateData, { parent: canvas.scene });\n        let template = new game.dnd5e.canvas.AbilityTemplate(doc);\n        template.actorSheet = pcActor.sheet;\n        template.drawPreview();\n\n        // make character invisible with custom effect\n        applyTempInvisibilityEffect(actor, actor);\n\n        async function deleteTemplatesAndMove(template) {\n            let removeTemplates = canvas.templates.placeables.filter(i => i.data.flags.DAESRD?.MistyEscape?.ActorId === pcActor.id);\n            let templateArray = removeTemplates.map(function (w) { return w.id });\n            await target.data.document.update(canvas.grid.getSnappedPosition(template.data.x, template.data.y));\n            if (removeTemplates) await canvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", templateArray);\n        };\n    });\n} return;\n\n// Mark the character invisible until the start of thier next turn \n// or when the character attacks or casts a spell\nasync function applyTempInvisibilityEffect(target, actor) {\n    let effectData = {\n        label : \"Invisible\",\n        icon : \"modules/dfreds-convenient-effects/images/invisible.svg\",\n        origin: actor.uuid,\n        changes: [\n            { \"key\": \"flags.midi-qol.advantage.attack.all\", \"value\": `1`, \"mode\": 0, \"priority\": 20 },\n            { \"key\": \"flags.midi-qol.grants.disadvantage.attack.all\", \"value\": `1`, \"mode\": 0, \"priority\": 20 }\n        ],\n        disabled: false,\n        flags: {\n                dae: {specialDuration: [\"turnStartSource\",\"1Attack\"]},\n                core: {statusId: \"Convenient Effect: Invisible\"}\n               }\n       }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.snMxepltm5UWo5KL"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"o5qighsdvthIwHXb"}
{"name":"Psionic Die","type":"feat","img":"systems/dnd5e/icons/items/inventory/dice.jpg","data":{"description":{"value":"<p>This energy is represented by your Psionic Energy dice, which are each a d6. You have a number of these dice equal to twice your proficiency bonus, and they fuel various psionic powers you have, which are detailed below.<br /><br />Some of your powers expend the Psionic Energy die they use, as specified in a power’s description, and you can’t use a power if it requires you to use a die when your dice are all expended. You regain all your expended Psionic Energy dice when you finish a long rest. In addition, as a bonus action, you can regain one expended Psionic Energy die, but you can’t do so again until you finish a short or long rest.<br /><br />When you reach certain levels in this class, the size of your Psionic Energy dice increases: at 5th level (d8), 11th level (d10), and 17th level (d12). The powers below use your Psionic Energy dice.</p>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">PASSIVE</span></summary>\n<p>This item must be on the character for Manuevers to function.  It does not do anything directly but is a helper effect to determine the Battle Master Hit Die (d8, d10, d12) based on level.</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v1.0 March 15 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"You learn maneuvers that are fueled by superiority dice. Maneuvers enhance an attack in some way. You have 5d8 superiority dice per short rest.","unidentified":""},"source":"PHB","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Rogue: Soulknife","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"UgB9349LhJU4nKsd","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/items/inventory/dice.jpg","label":"Psionic Die","origin":"Item.H14LgNk3j1O3e3FV","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null,"selectedKey":"macro.itemMacro"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"1023","entityTypeId":"222216831","componentId":209,"componentTypeId":12168134,"class":"Fighter","subclass":"Battle Master","dndbeyond":{"levelScale":{"id":12,"level":7,"description":"d8","dice":{"diceCount":5,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"5d8"},"fixedValue":null},"levelScales":[{"id":11,"level":1,"description":"d8","dice":{"diceCount":4,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"4d8"},"fixedValue":null},{"id":12,"level":7,"description":"d8","dice":{"diceCount":5,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"5d8"},"fixedValue":null},{"id":13,"level":10,"description":"d10","dice":{"diceCount":5,"diceValue":10,"diceMultiplier":null,"fixedValue":null,"diceString":"5d10"},"fixedValue":null},{"id":14,"level":15,"description":"d10","dice":{"diceCount":6,"diceValue":10,"diceMultiplier":null,"fixedValue":null,"diceString":"6d10"},"fixedValue":null},{"id":15,"level":18,"description":"d12","dice":{"diceCount":6,"diceValue":12,"diceMultiplier":null,"fixedValue":null,"diceString":"6d12"},"fixedValue":null}],"limitedUse":[{"level":null,"uses":1}]},"importId":"ye6nz9f4x9n3v7lu","ignoreIcon":true,"ignoreItemImport":true,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Fighter"}},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"scene-packer":{"hash":"06bb26ed3b0fcf4b44be8fe0156512b55c02d072","sourceId":"Item.1SZLgIr42Rn2kwZ1"},"core":{"sourceId":"Item.8gdA6c8j5GnkX33K"},"itemacro":{"macro":{"data":{"_id":null,"name":"Psionic Die","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nPsionic Power: Psionic Power\n\nUSEAGE : PASSIVE\nThis energy is represented by your Psionic Energy dice, which are each a d6. \nYou have a number of these dice equal to twice your proficiency bonus, and \nthey fuel various psionic powers you have, which are detailed below.\n\nSome of your powers expend the Psionic Energy die they use, as specified \nin a power’s description, and you can’t use a power if it requires you to \nuse a die when your dice are all expended. You regain all your expended Psionic \nEnergy dice when you finish a long rest. In addition, as a bonus action, you \ncan regain one expended Psionic Energy die, but you can’t do so again until you \nfinish a short or long rest.\n\nWhen you reach certain levels in this class, the size of your Psionic Energy \ndice increases: at 5th level (d8), 11th level (d10), and 17th level (d12). T\nhe powers below use your Psionic Energy dice.\n\nv0.1 April 15 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0] === \"on\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    let rogueLevel = testClass (pcActor, \"rogue\", \"Soulknife\", 3)?.levels ?? 0;\n    if (!rogueLevel) {\n        ui.notifications.error(\"You are not a Rogue: Soulknife of at least 3rd level.\");\n        return;\n    }\n    let flagData;\n    if (rogueLevel > 16) flagData = \"+ 1d12\";\n    else if (rogueLevel > 10) flagData = \"+ 1d10\";\n    else if (rogueLevel > 4) flagData = \"+ 1d8\";\n    else if (rogueLevel > 0) flagData = \"+ 1d6\";\n    pcActor.setFlag(\"dae\", \"PsionicDie\", flagData)    \n\n} else if (args[0] === \"off\") {\n    const pcActor = await fromUuid(args[args.length - 1].actorUuid);\n    pcActor.unsetFlag(\"dae\", \"PsionicDie\");\n}\n\n// Test PC Class, Subclass and Class Level\n// RETURN the class object (TRUE) or null (FALSE)\nfunction testClass (testActor, className, subClassName, levels) {\n    let theClass = testActor.data.data.classes[className] ;\n    if (theClass) {\n        if ((levels > 0) && (theClass.levels >= levels)) {\n            if (subClassName === null || (theClass.subclass === subClassName)) {\n                return theClass;\n            }\n        }\n    }\n    return null;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"exportSource":{"world":"saltmarsh","system":"dnd5e","coreVersion":"9.266","systemVersion":"1.5.7"},"favtab":{"isFavorite":true},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"zqArUFIMr0wMIGGa"}
{"name":"Shadow Step","type":"feat","img":"systems/dnd5e/icons/spells/wind-grasp-air-1.jpg","data":{"description":{"value":"<p>At 6th level, you gain the ability to step from one shadow into another. When you are in dim light or darkness, as a bonus action you can teleport up to 60 feet to an unoccupied space you can see that is also in dim light or darkness. You then have <a href=\"https://www.dndbeyond.com/sources/basic-rules/using-ability-scores#AdvantageandDisadvantage\" data-tooltip-href=\"//www.dndbeyond.com/rules/96-tooltip?disable-webm=1&amp;disable-webm=1\">advantage</a> on the first melee attack you make before the end of the turn.</p>\n<p> </p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Monk: Way of the Shadow","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"Maol11OcLygv28wa","changes":[{"key":"flags.midi-qol.advantage.attack.all","mode":0,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null,"turns":1},"icon":"systems/dnd5e/icons/spells/wind-grasp-air-1.jpg","label":"Shadow Step","origin":"Item.B2VMCdTeSXIiKeZJ","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["1Attack"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.advantage.attack.all"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"6c0eef2c3b2a5fe32a7b712719da8db1d6c45c46","sourceId":"Item.xff9TJ7gDc7pxQdF"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Shadow Step","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nShadow Step\nAt 6th level, you gain the ability to step from one shadow into another. \nWhen you are in dim light or darkness, as a bonus action you can teleport \nup to 60 feet to an unoccupied space you can see that is also in dim light \nor darkness. You then have advantage on the first melee attack you make \nbefore the end of the turn.\n\nNOTE: PARTS OF THIS AUTOMATION WERE TAKEN FROM \"MIDI-SRD\" SPELL: MISTY STEP\nBy Author: Kandashi   https://github.com/kandashi/Dynamic-Effects-SRD\n\nv0.2 April 12 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git\n*****/\n\nif (args[0].macroPass === \"preItemRoll\") {\n    let pcToken = token;\n    let pcActor = token.actor.data.data;\n    const target = canvas.tokens.get(pcToken.tokenId) || token;\n\n    let range = canvas.scene.createEmbeddedDocuments(\"MeasuredTemplate\", [{\n        t: \"circle\",\n        user: game.user._id,\n        x: target.x + canvas.grid.size / 2,\n        y: target.y + canvas.grid.size / 2,\n        direction: 0,\n        distance: 60,\n        borderColor: \"#FF0000\",\n        flags: { DAESRD: { MistyEscape: { ActorId: pcActor.id } } }\n    }]);\n\n    range.then(result => {\n        let templateData = {\n            t: \"rect\",\n            user: game.user._id,\n            distance: 7.5,\n            direction: 45,\n            x: 0,\n            y: 0,\n            fillColor: game.user.color,\n            flags: { DAESRD: { MistyEscape: { ActorId: pcActor.id } } }\n        };\n\n        Hooks.once(\"createMeasuredTemplate\", deleteTemplatesAndMove);\n        let doc = new CONFIG.MeasuredTemplate.documentClass(templateData, { parent: canvas.scene });\n        let template = new game.dnd5e.canvas.AbilityTemplate(doc);\n        template.actorSheet = pcActor.sheet;\n        template.drawPreview();\n\n        async function deleteTemplatesAndMove(template) {\n            let removeTemplates = canvas.templates.placeables.filter(i => i.data.flags.DAESRD?.MistyEscape?.ActorId === pcActor.id);\n            let templateArray = removeTemplates.map(function (w) { return w.id });\n            await target.data.document.update(canvas.grid.getSnappedPosition(template.data.x, template.data.y));\n            if (removeTemplates) await canvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", templateArray);\n        };\n    });\n} return;","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.snMxepltm5UWo5KL"},"favtab":{"isFavorite":true},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"Ft3JEzQVMpT4SvJy"}
{"name":"Steps of Night","type":"feat","img":"systems/dnd5e/icons/spells/wind-grasp-air-1.jpg","data":{"description":{"value":"<p>You can draw on the mystical power of night to rise into the air. As a bonus action when you are in dim light or darkness, you can magically give yourself a flying speed equal to your walking speed for 1 minute. You can use this bonus action a number of times equal to your proficiency bonus, and you regain all expended uses when you finish a long rest.</p>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>Please remember to link the use of this ability to a character sheet resource under the item details Resource Consumption dropdown.</p>\n<img src=\"https://user-images.githubusercontent.com/76136571/161775726-fb67bb97-5fd1-45c5-8301-bbb17e2d0f1d.png\" width=\"569\" /></details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.5 April 2 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"TCoE p34","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"attribute","target":"","amount":1},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric Twilight Domain","recharge":{"value":null,"charged":false}},"effects":[{"_id":"ioxb7mkofb3lhcvi","changes":[{"key":"data.attributes.movement.fly","mode":2,"value":"@data.attributes.movement.walk","priority":"20"}],"disabled":false,"duration":{"startTime":null,"seconds":60},"icon":"systems/dnd5e/icons/spells/wind-grasp-air-1.jpg","label":"Steps of Night","origin":"Actor.4okcHmPmM1iBwyFs.Item.smt73dN8B1zU5F8r","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"data.attributes.movement.fly"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"b2d1bd43b49ecafe6c2c56185ae49a5d811ff2dd","sourceId":"Item.AEFtWjLARYnAULjR"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.ii0ZfozCkVZ5vtpD"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"j7WhJfknEJLTpBDq"}
{"name":"Stunning Strike","type":"feat","img":"systems/dnd5e/icons/skills/yellow_08.jpg","data":{"description":{"value":"When you hit with a melee weapon attack, you can spend 1 ki point to make the target @Compendium[dnd5e.rules.Stunned]{stunned} until the end of your next turn if it fails a CON saving throw (DC +14).","chat":"When you hit with a melee weapon attack, you can spend 1 ki point to make the target @Compendium[dnd5e.rules.Stunned]{stunned} until the end of your next turn if it fails a CON saving throw (DC +14).","unidentified":""},"source":"","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"touch","type":"creature"},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"con","dc":null,"scaling":"wis"},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"_id":"36l6rpnrn6pnifja","changes":[{"key":"flags.midi-qol.fail.ability.save.dex","mode":0,"value":"1","priority":"20"},{"key":"flags.midi-qol.fail.ability.save.str","mode":0,"value":"1","priority":"20"},{"key":"flags.midi-qol.grants.advantage.attack.all","mode":0,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"modules/dfreds-convenient-effects/images/stunned.svg","label":"Stunned","origin":"Actor.0VGsg2mP5ntj0F1K.Item.SOmjuGeXM3tOoCcQ","transfer":false,"flags":{"core":{"statusId":"Convenient Effect: Stunned"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnEndSource"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.fail.ability.save.dex","flags.midi-qol.fail.ability.save.str","flags.midi-qol.grants.advantage.attack.all"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"53367","entityTypeId":"222216831","componentId":235,"componentTypeId":12168134,"class":"Monk","subclass":"Way of the Open Hand","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"sf7t9giix783op3r"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Monk"}},"scene-packer":{"hash":"8bac122fb2882e41a8c0ff85e9caa5749a1998c8","sourceId":"Item.7UVhuwVTNWH7AgSm"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"NBYGMYQNhvy5P4zE"}
{"name":"Vigilant Blessing","type":"feat","img":"systems/dnd5e/icons/skills/light_06.jpg","data":{"description":{"value":"<p>The night has taught you to be vigilant. As an action, you give one creature you touch (including possibly yourself) advantage on the next initiative roll the creature makes. This benefit ends immediately after the roll or if you use this feature again.</p>\n<details>\n<summary>VERSION INFO</summary>\n<p>v0.5 April 2 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"TCoE p34","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Cleric Twilight Domain","recharge":{"value":null,"charged":false}},"effects":[{"_id":"7BtDouaCOCQRMIQi","changes":[{"key":"flags.dnd5e.initiativeAdv","mode":0,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/light_06.jpg","label":"Vigilant Blessing","origin":"Item.ece8DHmOzO5m70tX","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnStartSource"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.dnd5e.initiativeAdv"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":2996547,"data":{"id":2996547,"name":"Vigilant Blessing","prerequisite":null,"description":"<p><em>1st-level Twilight Domain feature</em></p>\r\n<p>The night has taught you to be vigilant. As an action, you give one creature you touch (including possibly yourself) advantage on the next initiative roll the creature makes. This benefit ends immediately after the roll or if you use this feature again.</p>","requiredLevel":1,"displayOrder":4},"version":"2.9.8","featureId":2996547,"requiredLevel":1,"prerequisite":null,"class":"Twilight Domain","classId":654582,"subClass":"Twilight Domain"},"obsidian":{"source":{"type":"class","text":"Twilight Domain"}},"core":{"sourceId":"Compendium.world.ddb-class-features.M3GMQIicjInJPUhD"},"scene-packer":{"hash":"a9fcaa7aacd987568f8e37960118c414edf1ae75","sourceId":"Item.IML9DQXEKmLWsAiu"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"9BRYFzbHs0MPUqDk"}
{"name":"Wrath of the Storm","type":"feat","img":"systems/dnd5e/icons/spells/lightning-orange-3.jpg","data":{"description":{"value":"When a creature within 5 ft. that you can see hits you with an attack, you can use your reaction to cause the creature to make a DEX saving throw (DC +14 or it takes 2d8 lightning or thunder damage (your choice), half damage on success).\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>Also at 1st level, you can thunderously rebuke attackers. When a creature within 5 feet of you that you can see hits you with an attack, you can use your reaction to cause the creature to make a Dexterity saving throw. The creature takes 2d8 lightning or thunder damage (your choice) on a failed saving throw, and half as much damage on a successful one.</p>\n<p>You can use this feature a number of times equal to your Wisdom modifier (a minimum of once). You regain all expended uses when you finish a long rest.</p>\n  <p></p>\n</details>","chat":"When a creature within 5 ft. that you can see hits you with an attack, you can use your reaction to cause the creature to make a DEX saving throw (DC +14 or it takes 2d8 lightning or thunder damage (your choice), half damage on success).\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>Also at 1st level, you can thunderously rebuke attackers. When a creature within 5 feet of you that you can see hits you with an attack, you can use your reaction to cause the creature to make a Dexterity saving throw. The creature takes 2d8 lightning or thunder damage (your choice) on a failed saving throw, and half as much damage on a successful one.</p>\n<p>You can use this feature a number of times equal to your Wisdom modifier (a minimum of once). You regain all expended uses when you finish a long rest.</p>\n  <p></p>\n</details>","unidentified":""},"source":"","activation":{"type":"reaction","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"enemy"},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":2,"max":"2","per":"lr"},"consume":{"type":"charges","target":"","amount":1},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["2d8[lightning]","lightning"]],"versatile":""},"formula":"","save":{"ability":"dex","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"attunement":null},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"1018","entityTypeId":"222216831","componentId":149,"componentTypeId":12168134,"class":"Cleric","subclass":"Tempest Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"sqffc9kk1ucpsf5y","ignoreIcon":false,"ignoreItemImport":false,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"link-item-resource-5e":{"resource-link":""},"scene-packer":{"hash":"9775013053b92e9a4352bafae9b661f724ce63f8","sourceId":"Item.sgX39YcOTQ19eA4i"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":true,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.Fvl2VJyfemTViUHw"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.266","systemVersion":"1.5.7"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"IPMzvlNBsfqfGrS2"}
{"name":"Zealous Presence","type":"feat","img":"systems/dnd5e/icons/skills/yellow_14.jpg","data":{"description":{"value":"Once per long rest as a bonus action, you unleash a battle cry and up to 10 other creatures of your choice within 60 feet of you that can hear you gain advantage on attack rolls and saving throws until the start of your next turn.","chat":"Once per long rest as a bonus action, you unleash a battle cry and up to 10 other creatures of your choice within 60 feet of you that can hear you gain advantage on attack rolls and saving throws until the start of your next turn.","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":10,"width":null,"units":"","type":"ally"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"lr"},"consume":{"type":"charges","target":"juMtQeO7Dyz3rDlO","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"xrxfjgozwcowrenv","changes":[{"key":"flags.midi-qol.advantage.attack.all","mode":0,"value":"1","priority":"20"},{"key":"flags.midi-qol.advantage.ability.save.all","mode":0,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/yellow_14.jpg","label":"Zealous Presence","origin":"Actor.uQOmYSCbRfODlmLf.Item.juMtQeO7Dyz3rDlO","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnStartSource"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.advantage.attack.all","flags.midi-qol.advantage.ability.save.all"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":"5181","entityTypeId":"222216831","componentId":647,"componentTypeId":12168134,"class":"Barbarian","subclass":"Path of the Zealot","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"pmwzriev72c0n6wr","ignoreIcon":false,"ignoreItemImport":false,"retainResourceConsumption":true},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Barbarian"}},"link-item-resource-5e":{"resource-link":"secondary"},"scene-packer":{"hash":"042c03c5d13731fcc49a3d73ee2a85547aceaf83","sourceId":"Item.XGrcyW4DQeVeDMlF"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.Kjv6xBCHzbdiD9uE"},"exportSource":{"world":"stormkings","system":"dnd5e","coreVersion":"9.266","systemVersion":"1.5.7"},"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff"}},"_id":"HiKWvZf0RIUexTAf"}
{"name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"cf":{"id":"temp_bw9jtupqlwp","path":"Class Features","color":"#0000ff","name":"Class Features","children":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"folderPath":[]},"scene-packer":{"hash":"a87684aaffe1d3e8d2bf2ac4707e9fd18d569adb"}},"_id":"vVbdVes9QhlKhQ98"}
{"name":"Elemental Adept (Acid)","type":"feat","img":"systems/dnd5e/icons/skills/affliction_20.jpg","data":{"description":{"value":"<p>When you gain this feat, choose one of the following damage types: <strong>acid</strong>, cold, fire, lightning, or thunder.</p>\n<ul>\n<li>Spells you cast ignore resistance to damage of the chosen type.</li>\n<li>When you roll damage for a spell you cast that deals damage of that type, you can treat any 1 on a damage die as a 2.</li>\n<li>You can select this feat multiple times. Each time you do so, you must choose a different damage type.</li>\n</ul>\n<div>Prerequisite: The ability to cast at least one spell</div>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">AUTOMATED</span></summary>\nSpells must be properly configured with the damage type assigned.</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>This item should be placed on the character that has the Elemental Adept Feat (damage type).</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.8 April 10 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"Spells you cast ignore resistance to acid damage, and when you roll damage for a spell you cast that deals acid damage, you can treat any 1 on a damage die as a 2.\n\n","unidentified":""},"source":"Player's Handbook","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"The ability to cast at least one spell","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"HlLfTD8QAW6eXGd9","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Elemental Adept (Acid),all","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/affliction_20.jpg","label":"Elemental Adept (Acid)","origin":"Item.W1CFtJ3Hs6z20Gw9","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"featId":53,"version":"2.9.8","prerequisites":[{"description":"The ability to cast at least one spell","prerequisiteMappings":[{"id":38,"entityId":null,"entityTypeId":null,"type":"custom-value","subType":"the-ability-to-cast-at-least-one-spell","value":null,"friendlyTypeName":"Custom Value","friendlySubTypeName":"The ability to cast at least one spell"}]}]},"obsidian":{"source":{"type":"feat"}},"core":{"sourceId":"Compendium.world.ddb-feats.aYmO2viJd9HdlSvF"},"scene-packer":{"hash":"c0d8a73e7f80b95dda1244302718dd575697043a","sourceId":"Item.We1FRbzmgNviJz92"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Elemental Adept (Acid)","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nElemental Adept \n\nWhen you gain this feat, choose one of the following damage types: acid, cold, fire, lightning, or thunder.\n    - Spells you cast ignore resistance to damage of the chosen type. \n    - In addition, when you roll damage for a spell you cast that deals damage of that type, you can treat any 1 on a damage die as a 2.\nYou can select this feat multiple times. Each time you do so, you must choose a different damage type.\n\nBefore you roll for spell damage:\n    - retreive the damage type fromt thew DAE variable = damageType \n    - duplicate the ITEM on the workflow as OriginalItem\n    - search through all damage on the workfolow ITEM for the given damage type\n    - if found add \"min2\" to all damages\n    - test all targets for resistance to damageType\n    - for every target with resistance set vulnerability\n    - CLEANUP: restore the item and remove the vulnerability form all target(s)\n\nv0.7 April 10 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\n// make sure the attempted hit was made with a spell attack of some type\nif (![\"msak\",\"rsak\",\"save\"].includes(args[0].item.data.actionType)) return;       \nconst damageType = \"acid\";\n\nif (args[0].macroPass === \"preItemRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    const targets = args[0].targets;\n\n    // backup the whole original item as a property on the workflow\n    let backupItem = theItem.clone();\n    await setProperty(workflow, \"originalItem\", backupItem);\n\n    // mark all targets that are resistant to this damage type now vulnerable to cancel the resistance\n    // replace this later with a .map function  \n    for (let i = 0; i < targets.length; i++) {\n        let targetActor = targets[i].actor;\n        const match = targetActor.data.data.traits.dr.value.find(element => {\n            if (element.includes(damageType)) markTargetVulnerable(targetActor, damageType, args[0]); });\n    }\n\n} else if (args[0].macroPass === \"preambleComplete\") {\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    let itemData = theItem.data.data;\n\n    // strip damage type in [] from the originalDamage if it exists and add \"min2\" and the damage type back in []\n    // replace this later with a .map function \n    for (let i=0; i < itemData.damage.parts.length; i++) {\n        let oldDamage = itemData.damage.parts[i][1];\n        let oldDice   = itemData.damage.parts[i][0];\n        if (oldDamage === damageType) {\n            let index = oldDice.indexOf('[');\n            if (index !== -1) oldDice = oldDice.slice(0, index); // remove everything after the first open bracket '['\n            itemData.damage.parts[i][1] = damageType;\n            itemData.damage.parts[i][0] = oldDice+\"min2\"+\"[\"+damageType+\"]\";\n            itemData.scaling.formula = itemData.scaling.formula+\"min2\";\n        }\n    }\n\n} else if (args[0].macroPass === \"postActiveEffects\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    let theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    const targets = args[0].targets;\n\n    // remove any vulnerability previously set on target(s)\n    // replace this later with a .map function \n    for (let i = 0; i < targets.length; i++) {\n        let targetActor = targets[i].actor;\n        let effect = await findEffect(targets[i], \"EAVulnerability\");\n        if (effect) await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: targetActor.uuid, effects:[effect.id]});\n    }\n\n    // restore original spell damage and scaling from the backup item\n    let backupItem = await getProperty(workflow, \"originalItem\");\n    // replace this later with a .map function \n    for (let i = 0; i < backupItem.data.data.damage.parts.length; i++) theItem.data.data.damage.parts[i] = backupItem.data.data.damage.parts[i];\n    theItem.data.data.scaling = backupItem.data.data.scaling;\n\n} return; \n\n// if the character has resistance to the new damage type, set vulnerability to negate it\nasync function markTargetVulnerable(target, damageType, args) {\n    const effectData = {\n        label : \"EAVulnerability\",\n        icon : \"icons/magic/defensive/barrier-shield-dome-deflect-blue.webp\",\n        origin: args.uuid,\n        changes: [{\n          \"key\": \"data.traits.dv.value\",        \n          \"value\": `${damageType}`,\n          \"mode\": 2,\n          \"priority\": 20\n          }],\n         disabled: false\n       }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n}\n\n// Function to test for an effect\nasync function findEffect (target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef=> ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_edvfne668p7","path":"Feats","color":"#0000ff"}},"_id":"FjDFCOQ0RCwgCqFS"}
{"name":"Elemental Adept (Cold)","type":"feat","img":"systems/dnd5e/icons/skills/ice_09.jpg","data":{"description":{"value":"<p>When you gain this feat, choose one of the following damage types: acid,<strong> cold </strong>, fire, lightning, or thunder.</p>\n<ul>\n<li>Spells you cast ignore resistance to damage of the chosen type.</li>\n<li>When you roll damage for a spell you cast that deals damage of that type, you can treat any 1 on a damage die as a 2.</li>\n<li>You can select this feat multiple times. Each time you do so, you must choose a different damage type.</li>\n</ul>\n<div>Prerequisite: The ability to cast at least one spell</div>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">AUTOMATED</span></summary>\nSpells must be properly configured with the damage type assigned.</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>This item should be placed on the character that has the Elemental Adept Feat (damage type).</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.8 April 10 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"Spells you cast ignore resistance to cold damage, and when you roll damage for a spell you cast that deals cold damage, you can treat any 1 on a damage die as a 2.\n\n","unidentified":""},"source":"Player's Handbook","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"The ability to cast at least one spell","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"JqR0VfQcqj7o2sC4","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Elemental Adept (Cold),all","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/ice_09.jpg","label":"Elemental Adept (Cold)","origin":"Item.7Y7UQFlA6C65Hb7n","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"featId":54,"version":"2.9.8","prerequisites":[{"description":"The ability to cast at least one spell","prerequisiteMappings":[{"id":39,"entityId":null,"entityTypeId":null,"type":"custom-value","subType":"the-ability-to-cast-at-least-one-spell","value":null,"friendlyTypeName":"Custom Value","friendlySubTypeName":"The ability to cast at least one spell"}]}]},"obsidian":{"source":{"type":"feat"}},"core":{"sourceId":"Compendium.world.ddb-feats.spxwZqUg9ypdgEug"},"scene-packer":{"hash":"adae6cdb989b3803a1abbff878e85576c590a040","sourceId":"Item.if8IOf9bKgUpIAjw"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Elemental Adept (Cold)","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nElemental Adept \n\nWhen you gain this feat, choose one of the following damage types: acid, cold, fire, lightning, or thunder.\n    - Spells you cast ignore resistance to damage of the chosen type. \n    - In addition, when you roll damage for a spell you cast that deals damage of that type, you can treat any 1 on a damage die as a 2.\nYou can select this feat multiple times. Each time you do so, you must choose a different damage type.\n\nBefore you roll for spell damage:\n    - retreive the damage type fromt thew DAE variable = damageType \n    - duplicate the ITEM on the workflow as OriginalItem\n    - search through all damage on the workfolow ITEM for the given damage type\n    - if found add \"min2\" to all damages\n    - test all targets for resistance to damageType\n    - for every target with resistance set vulnerability\n    - CLEANUP: restore the item and remove the vulnerability form all target(s)\n\nv0.7 April 10 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\n// make sure the attempted hit was made with a spell attack of some type\nif (![\"msak\",\"rsak\",\"save\"].includes(args[0].item.data.actionType)) return;       \nconst damageType = \"cold\";\n\nif (args[0].macroPass === \"preItemRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    const targets = args[0].targets;\n\n    // backup the whole original item as a property on the workflow\n    let backupItem = theItem.clone();\n    await setProperty(workflow, \"originalItem\", backupItem);\n\n    // mark all targets that are resistant to this damage type now vulnerable to cancel the resistance\n    // replace this later with a .map function  \n    for (let i = 0; i < targets.length; i++) {\n        let targetActor = targets[i].actor;\n        const match = targetActor.data.data.traits.dr.value.find(element => {\n            if (element.includes(damageType)) markTargetVulnerable(targetActor, damageType, args[0]); });\n    }\n\n} else if (args[0].macroPass === \"preambleComplete\") {\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    let itemData = theItem.data.data;\n\n    // strip damage type in [] from the originalDamage if it exists and add \"min2\" and the damage type back in []\n    // replace this later with a .map function \n    for (let i=0; i < itemData.damage.parts.length; i++) {\n        let oldDamage = itemData.damage.parts[i][1];\n        let oldDice   = itemData.damage.parts[i][0];\n        if (oldDamage === damageType) {\n            let index = oldDice.indexOf('[');\n            if (index !== -1) oldDice = oldDice.slice(0, index); // remove everything after the first open bracket '['\n            itemData.damage.parts[i][1] = damageType;\n            itemData.damage.parts[i][0] = oldDice+\"min2\"+\"[\"+damageType+\"]\";\n            itemData.scaling.formula = itemData.scaling.formula+\"min2\";\n        }\n    }\n\n} else if (args[0].macroPass === \"postActiveEffects\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    let theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    const targets = args[0].targets;\n\n    // remove any vulnerability previously set on target(s)\n    // replace this later with a .map function \n    for (let i = 0; i < targets.length; i++) {\n        let targetActor = targets[i].actor;\n        let effect = await findEffect(targets[i], \"EAVulnerability\");\n        if (effect) await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: targetActor.uuid, effects:[effect.id]});\n    }\n\n    // restore original spell damage and scaling from the backup item\n    let backupItem = await getProperty(workflow, \"originalItem\");\n    // replace this later with a .map function \n    for (let i = 0; i < backupItem.data.data.damage.parts.length; i++) theItem.data.data.damage.parts[i] = backupItem.data.data.damage.parts[i];\n    theItem.data.data.scaling = backupItem.data.data.scaling;\n\n} return; \n\n// if the character has resistance to the new damage type, set vulnerability to negate it\nasync function markTargetVulnerable(target, damageType, args) {\n    const effectData = {\n        label : \"EAVulnerability\",\n        icon : \"icons/magic/defensive/barrier-shield-dome-deflect-blue.webp\",\n        origin: args.uuid,\n        changes: [{\n          \"key\": \"data.traits.dv.value\",        \n          \"value\": `${damageType}`,\n          \"mode\": 2,\n          \"priority\": 20\n          }],\n         disabled: false\n       }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n}\n\n// Function to test for an effect\nasync function findEffect (target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef=> ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_edvfne668p7","path":"Feats","color":"#0000ff"}},"_id":"GVRmceTHqi8cH3p8"}
{"name":"Elemental Adept (Fire)","type":"feat","img":"systems/dnd5e/icons/skills/fire_10.jpg","data":{"description":{"value":"<p>When you gain this feat, choose one of the following damage types: acid, cold, <strong>fire</strong>, lightning, or thunder.</p>\n<ul>\n<li>Spells you cast ignore resistance to damage of the chosen type.</li>\n<li>When you roll damage for a spell you cast that deals damage of that type, you can treat any 1 on a damage die as a 2.</li>\n<li>You can select this feat multiple times. Each time you do so, you must choose a different damage type.</li>\n</ul>\n<div>Prerequisite: The ability to cast at least one spell</div>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">AUTOMATED</span></summary>\nSpells must be properly configured with the damage type assigned.</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>This item should be placed on the character that has the Elemental Adept Feat (damage type).</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.8 April 10 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"Spells you cast ignore resistance to fire damage, and when you roll damage for a spell you cast that deals fire damage, you can treat any 1 on a damage die as a 2.\n\n","unidentified":""},"source":"Player's Handbook","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"The ability to cast at least one spell","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"6pZRLDO4MLABT5r8","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Elemental Adept (Fire),all","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/fire_10.jpg","label":"Elemental Adept (Fire)","origin":"Item.c7fTdFwzwAGUSo2w","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"featId":55,"version":"2.9.8","prerequisites":[{"description":"The ability to cast at least one spell","prerequisiteMappings":[{"id":40,"entityId":null,"entityTypeId":null,"type":"custom-value","subType":"the-ability-to-cast-at-least-one-spell","value":null,"friendlyTypeName":"Custom Value","friendlySubTypeName":"The ability to cast at least one spell"}]}]},"obsidian":{"source":{"type":"feat"}},"core":{"sourceId":"Compendium.world.ddb-feats.p2Wr0BPOrQ1FxCfv"},"scene-packer":{"hash":"3f0ebccfd710b65980f7d0074b27adf5ef595a7f","sourceId":"Item.C8j3ufeem7tE4pvh"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Elemental Adept (Fire)","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nElemental Adept \n\nWhen you gain this feat, choose one of the following damage types: acid, cold, fire, lightning, or thunder.\n    - Spells you cast ignore resistance to damage of the chosen type. \n    - In addition, when you roll damage for a spell you cast that deals damage of that type, you can treat any 1 on a damage die as a 2.\nYou can select this feat multiple times. Each time you do so, you must choose a different damage type.\n\nBefore you roll for spell damage:\n    - retreive the damage type fromt thew DAE variable = damageType \n    - duplicate the ITEM on the workflow as OriginalItem\n    - search through all damage on the workfolow ITEM for the given damage type\n    - if found add \"min2\" to all damages\n    - test all targets for resistance to damageType\n    - for every target with resistance set vulnerability\n    - CLEANUP: restore the item and remove the vulnerability form all target(s)\n\nv0.7 April 10 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\n// make sure the attempted hit was made with a spell attack of some type\nif (![\"msak\",\"rsak\",\"save\"].includes(args[0].item.data.actionType)) return;       \nconst damageType = \"fire\";\n\nif (args[0].macroPass === \"preItemRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    const targets = args[0].targets;\n\n    // backup the whole original item as a property on the workflow\n    let backupItem = theItem.clone();\n    await setProperty(workflow, \"originalItem\", backupItem);\n\n    // mark all targets that are resistant to this damage type now vulnerable to cancel the resistance\n    // replace this later with a .map function  \n    for (let i = 0; i < targets.length; i++) {\n        let targetActor = targets[i].actor;\n        const match = targetActor.data.data.traits.dr.value.find(element => {\n            if (element.includes(damageType)) markTargetVulnerable(targetActor, damageType, args[0]); });\n    }\n\n} else if (args[0].macroPass === \"preambleComplete\") {\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    let itemData = theItem.data.data;\n\n    // strip damage type in [] from the originalDamage if it exists and add \"min2\" and the damage type back in []\n    // replace this later with a .map function \n    for (let i=0; i < itemData.damage.parts.length; i++) {\n        let oldDamage = itemData.damage.parts[i][1];\n        let oldDice   = itemData.damage.parts[i][0];\n        if (oldDamage === damageType) {\n            let index = oldDice.indexOf('[');\n            if (index !== -1) oldDice = oldDice.slice(0, index); // remove everything after the first open bracket '['\n            itemData.damage.parts[i][1] = damageType;\n            itemData.damage.parts[i][0] = oldDice+\"min2\"+\"[\"+damageType+\"]\";\n            itemData.scaling.formula = itemData.scaling.formula+\"min2\";\n        }\n    }\n\n} else if (args[0].macroPass === \"postActiveEffects\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    let theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    const targets = args[0].targets;\n\n    // remove any vulnerability previously set on target(s)\n    // replace this later with a .map function \n    for (let i = 0; i < targets.length; i++) {\n        let targetActor = targets[i].actor;\n        let effect = await findEffect(targets[i], \"EAVulnerability\");\n        if (effect) await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: targetActor.uuid, effects:[effect.id]});\n    }\n\n    // restore original spell damage and scaling from the backup item\n    let backupItem = await getProperty(workflow, \"originalItem\");\n    // replace this later with a .map function \n    for (let i = 0; i < backupItem.data.data.damage.parts.length; i++) theItem.data.data.damage.parts[i] = backupItem.data.data.damage.parts[i];\n    theItem.data.data.scaling = backupItem.data.data.scaling;\n\n} return; \n\n// if the character has resistance to the new damage type, set vulnerability to negate it\nasync function markTargetVulnerable(target, damageType, args) {\n    const effectData = {\n        label : \"EAVulnerability\",\n        icon : \"icons/magic/defensive/barrier-shield-dome-deflect-blue.webp\",\n        origin: args.uuid,\n        changes: [{\n          \"key\": \"data.traits.dv.value\",        \n          \"value\": `${damageType}`,\n          \"mode\": 2,\n          \"priority\": 20\n          }],\n         disabled: false\n       }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n}\n\n// Function to test for an effect\nasync function findEffect (target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef=> ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_edvfne668p7","path":"Feats","color":"#0000ff"}},"_id":"ylUhMeN9fhWks1uW"}
{"name":"Elemental Adept (Lightning)","type":"feat","img":"systems/dnd5e/icons/skills/blue_21.jpg","data":{"description":{"value":"<p>When you gain this feat, choose one of the following damage types: acid, cold, fire, <strong>lightning</strong>, or thunder.</p>\n<ul>\n<li>Spells you cast ignore resistance to damage of the chosen type.</li>\n<li>When you roll damage for a spell you cast that deals damage of that type, you can treat any 1 on a damage die as a 2.</li>\n<li>You can select this feat multiple times. Each time you do so, you must choose a different damage type.</li>\n</ul>\n<div>Prerequisite: The ability to cast at least one spell</div>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">AUTOMATED</span></summary>\nSpells must be properly configured with the damage type assigned.</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>This item should be placed on the character that has the Elemental Adept Feat (damage type). </p>\n</details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.8 April 10 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"Spells you cast ignore resistance to lightning damage, and when you roll damage for a spell you cast that deals lightning damage, you can treat any 1 on a damage die as a 2.\n\n","unidentified":""},"source":"Player's Handbook","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"The ability to cast at least one spell","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"0SBwS29D7tWLF8Yk","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Elemental Adept (Lightning),all","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/blue_21.jpg","label":"Elemental Adept (Lightning)","origin":"Item.lEyT5M1i5szqhLsu","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"featId":56,"version":"2.9.8","prerequisites":[{"description":"The ability to cast at least one spell","prerequisiteMappings":[{"id":41,"entityId":null,"entityTypeId":null,"type":"custom-value","subType":"the-ability-to-cast-at-least-one-spell","value":null,"friendlyTypeName":"Custom Value","friendlySubTypeName":"The ability to cast at least one spell"}]}]},"obsidian":{"source":{"type":"feat"}},"core":{"sourceId":"Compendium.world.ddb-feats.s72265V0lwRI4Q42"},"scene-packer":{"hash":"f6f009cc2b91b917b15d1f8bfbf6acf2de9cdfe6","sourceId":"Item.XU7VhRo3F0qtU7Fh"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Elemental Adept (Lightning)","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nElemental Adept \n\nWhen you gain this feat, choose one of the following damage types: acid, cold, fire, lightning, or thunder.\n    - Spells you cast ignore resistance to damage of the chosen type. \n    - In addition, when you roll damage for a spell you cast that deals damage of that type, you can treat any 1 on a damage die as a 2.\nYou can select this feat multiple times. Each time you do so, you must choose a different damage type.\n\nBefore you roll for spell damage:\n    - retreive the damage type fromt thew DAE variable = damageType \n    - duplicate the ITEM on the workflow as OriginalItem\n    - search through all damage on the workfolow ITEM for the given damage type\n    - if found add \"min2\" to all damages\n    - test all targets for resistance to damageType\n    - for every target with resistance set vulnerability\n    - CLEANUP: restore the item and remove the vulnerability form all target(s)\n\nv0.7 April 10 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\n// make sure the attempted hit was made with a spell attack of some type\nif (![\"msak\",\"rsak\",\"save\"].includes(args[0].item.data.actionType)) return;       \nconst damageType = \"lightning\";\n\nif (args[0].macroPass === \"preItemRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    const targets = args[0].targets;\n\n    // backup the whole original item as a property on the workflow\n    let backupItem = theItem.clone();\n    await setProperty(workflow, \"originalItem\", backupItem);\n\n    // mark all targets that are resistant to this damage type now vulnerable to cancel the resistance\n    // replace this later with a .map function  \n    for (let i = 0; i < targets.length; i++) {\n        let targetActor = targets[i].actor;\n        const match = targetActor.data.data.traits.dr.value.find(element => {\n            if (element.includes(damageType)) markTargetVulnerable(targetActor, damageType, args[0]); });\n    }\n\n} else if (args[0].macroPass === \"preambleComplete\") {\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    let itemData = theItem.data.data;\n\n    // strip damage type in [] from the originalDamage if it exists and add \"min2\" and the damage type back in []\n    // replace this later with a .map function \n    for (let i=0; i < itemData.damage.parts.length; i++) {\n        let oldDamage = itemData.damage.parts[i][1];\n        let oldDice   = itemData.damage.parts[i][0];\n        if (oldDamage === damageType) {\n            let index = oldDice.indexOf('[');\n            if (index !== -1) oldDice = oldDice.slice(0, index); // remove everything after the first open bracket '['\n            itemData.damage.parts[i][1] = damageType;\n            itemData.damage.parts[i][0] = oldDice+\"min2\"+\"[\"+damageType+\"]\";\n            itemData.scaling.formula = itemData.scaling.formula+\"min2\";\n        }\n    }\n\n} else if (args[0].macroPass === \"postActiveEffects\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    let theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    const targets = args[0].targets;\n\n    // remove any vulnerability previously set on target(s)\n    // replace this later with a .map function \n    for (let i = 0; i < targets.length; i++) {\n        let targetActor = targets[i].actor;\n        let effect = await findEffect(targets[i], \"EAVulnerability\");\n        if (effect) await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: targetActor.uuid, effects:[effect.id]});\n    }\n\n    // restore original spell damage and scaling from the backup item\n    let backupItem = await getProperty(workflow, \"originalItem\");\n    // replace this later with a .map function \n    for (let i = 0; i < backupItem.data.data.damage.parts.length; i++) theItem.data.data.damage.parts[i] = backupItem.data.data.damage.parts[i];\n    theItem.data.data.scaling = backupItem.data.data.scaling;\n\n} return; \n\n// if the character has resistance to the new damage type, set vulnerability to negate it\nasync function markTargetVulnerable(target, damageType, args) {\n    const effectData = {\n        label : \"EAVulnerability\",\n        icon : \"icons/magic/defensive/barrier-shield-dome-deflect-blue.webp\",\n        origin: args.uuid,\n        changes: [{\n          \"key\": \"data.traits.dv.value\",        \n          \"value\": `${damageType}`,\n          \"mode\": 2,\n          \"priority\": 20\n          }],\n         disabled: false\n       }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n}\n\n// Function to test for an effect\nasync function findEffect (target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef=> ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_edvfne668p7","path":"Feats","color":"#0000ff"}},"_id":"tcczbhcwEE1z3BLC"}
{"name":"Elemental Adept (Thunder)","type":"feat","img":"systems/dnd5e/icons/skills/shadow_06.jpg","data":{"description":{"value":"<p>When you gain this feat, choose one of the following damage types: acid, cold, fire, lightning, or <strong>thunder</strong>.</p>\n<ul>\n<li>Spells you cast ignore resistance to damage of the chosen type.</li>\n<li>When you roll damage for a spell you cast that deals damage of that type, you can treat any 1 on a damage die as a 2.</li>\n<li>You can select this feat multiple times. Each time you do so, you must choose a different damage type.</li>\n</ul>\n<div>Prerequisite: The ability to cast at least one spell</div>\n<p> </p>\n<details>\n<summary><strong>USEAGE: </strong> <span style=\"color:#169179\">AUTOMATED</span></summary>\nSpells must be properly configured with the damage type assigned.</details>\n<p> </p>\n<details>\n<summary><strong>SETUP:</strong></summary>\n<p>This item should be placed on the character that has the Elemental Adept Feat (damage type).</p>\n</details>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.8 April 10 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"Spells you cast ignore resistance to thunder damage, and when you roll damage for a spell you cast that deals thunder damage, you can treat any 1 on a damage die as a 2.\n\n","unidentified":""},"source":"Player's Handbook","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"The ability to cast at least one spell","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"Ep7NrHqaoJ5py0kF","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Elemental Adept (Thunder),all","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/shadow_06.jpg","label":"Elemental Adept (Thunder)","origin":"Item.d7JuHA9yOhcz7q82","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"featId":57,"version":"2.9.8","prerequisites":[{"description":"The ability to cast at least one spell","prerequisiteMappings":[{"id":42,"entityId":null,"entityTypeId":null,"type":"custom-value","subType":"the-ability-to-cast-at-least-one-spell","value":null,"friendlyTypeName":"Custom Value","friendlySubTypeName":"The ability to cast at least one spell"}]}]},"obsidian":{"source":{"type":"feat"}},"core":{"sourceId":"Compendium.world.ddb-feats.T47bqSNeXlJT56NH"},"scene-packer":{"hash":"a971f7ad1a21e75dc483689cb50b75560fa24204","sourceId":"Item.x8COwK5sdVbcxuiJ"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Elemental Adept (Thunder)","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nElemental Adept \n\nWhen you gain this feat, choose one of the following damage types: acid, cold, fire, lightning, or thunder.\n    - Spells you cast ignore resistance to damage of the chosen type. \n    - In addition, when you roll damage for a spell you cast that deals damage of that type, you can treat any 1 on a damage die as a 2.\nYou can select this feat multiple times. Each time you do so, you must choose a different damage type.\n\nBefore you roll for spell damage:\n    - retreive the damage type fromt thew DAE variable = damageType \n    - duplicate the ITEM on the workflow as OriginalItem\n    - search through all damage on the workfolow ITEM for the given damage type\n    - if found add \"min2\" to all damages\n    - test all targets for resistance to damageType\n    - for every target with resistance set vulnerability\n    - CLEANUP: restore the item and remove the vulnerability form all target(s)\n\nv0.7 April 10 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\n// make sure the attempted hit was made with a spell attack of some type\nif (![\"msak\",\"rsak\",\"save\"].includes(args[0].item.data.actionType)) return;       \nconst damageType = \"thunder\";\n\nif (args[0].macroPass === \"preItemRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    const targets = args[0].targets;\n\n    // backup the whole original item as a property on the workflow\n    let backupItem = theItem.clone();\n    await setProperty(workflow, \"originalItem\", backupItem);\n\n    // mark all targets that are resistant to this damage type now vulnerable to cancel the resistance\n    // replace this later with a .map function  \n    for (let i = 0; i < targets.length; i++) {\n        let targetActor = targets[i].actor;\n        const match = targetActor.data.data.traits.dr.value.find(element => {\n            if (element.includes(damageType)) markTargetVulnerable(targetActor, damageType, args[0]); });\n    }\n\n} else if (args[0].macroPass === \"preambleComplete\") {\n    const theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    let itemData = theItem.data.data;\n\n    // strip damage type in [] from the originalDamage if it exists and add \"min2\" and the damage type back in []\n    // replace this later with a .map function \n    for (let i=0; i < itemData.damage.parts.length; i++) {\n        let oldDamage = itemData.damage.parts[i][1];\n        let oldDice   = itemData.damage.parts[i][0];\n        if (oldDamage === damageType) {\n            let index = oldDice.indexOf('[');\n            if (index !== -1) oldDice = oldDice.slice(0, index); // remove everything after the first open bracket '['\n            itemData.damage.parts[i][1] = damageType;\n            itemData.damage.parts[i][0] = oldDice+\"min2\"+\"[\"+damageType+\"]\";\n            itemData.scaling.formula = itemData.scaling.formula+\"min2\";\n        }\n    }\n\n} else if (args[0].macroPass === \"postActiveEffects\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n    let theItem = MidiQOL.Workflow.getWorkflow(args[0].uuid).item;\n    const targets = args[0].targets;\n\n    // remove any vulnerability previously set on target(s)\n    // replace this later with a .map function \n    for (let i = 0; i < targets.length; i++) {\n        let targetActor = targets[i].actor;\n        let effect = await findEffect(targets[i], \"EAVulnerability\");\n        if (effect) await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: targetActor.uuid, effects:[effect.id]});\n    }\n\n    // restore original spell damage and scaling from the backup item\n    let backupItem = await getProperty(workflow, \"originalItem\");\n    // replace this later with a .map function \n    for (let i = 0; i < backupItem.data.data.damage.parts.length; i++) theItem.data.data.damage.parts[i] = backupItem.data.data.damage.parts[i];\n    theItem.data.data.scaling = backupItem.data.data.scaling;\n\n} return; \n\n// if the character has resistance to the new damage type, set vulnerability to negate it\nasync function markTargetVulnerable(target, damageType, args) {\n    const effectData = {\n        label : \"EAVulnerability\",\n        icon : \"icons/magic/defensive/barrier-shield-dome-deflect-blue.webp\",\n        origin: args.uuid,\n        changes: [{\n          \"key\": \"data.traits.dv.value\",        \n          \"value\": `${damageType}`,\n          \"mode\": 2,\n          \"priority\": 20\n          }],\n         disabled: false\n       }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n}\n\n// Function to test for an effect\nasync function findEffect (target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef=> ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"cf":{"id":"temp_edvfne668p7","path":"Feats","color":"#0000ff"}},"_id":"en2zgdSLrpLrAv1Y"}
{"name":"Orcish Fury","type":"feat","img":"systems/dnd5e/icons/skills/red_01.jpg","data":{"description":{"value":"<p>Your inner fury burns tirelessly. You gain the following benefits:</p>\n<ul>\n<li>When you hit with an attack using a simple or martial weapon, you can roll one of the weapon’s damage dice an additional time and add it as extra damage of the weapon’s damage type. Once you use this ability, you can’t use it again until you finish a short or long rest.</li>\n<li>Immediately after you use your Relentless Endurance trait, you can use your reaction to make one weapon attack. [MANUAL]</li>\n</ul>\n<p> </p>\n<details>\n<summary>VERSION INFO</summary>\n<p>v0.1 April 12 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"XGtE","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Feat: Orcish Fury","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"YJK1tQQIV2Ycrqy0","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Orcish Fury,preDamageRoll","priority":"1"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/red_01.jpg","label":"Orcish Fury","origin":"Item.5PUe0GiheEHUomoR","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"daf45fd5e987361375728fc5f927a4395ccefddd","sourceId":"Item.uQGcKzGeNBZH94iS"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Orcish Fury","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nOrcish Fury\n\nUSEAGE : AUTOMATIC\nThis item should be placed on the character that has the Orcish Fury Feat.  \nUntil used, during each melee attack the player will be prompted if they\nwant to use this ability.\n \nMANEUVER DESCRIPTION:\nWhen you hit with an attack using a simple or martial weapon, you can roll one \nof the weapon’s damage dice an additional time and add it as extra damage of \nthe weapon’s damage type. Once you use this ability, you can’t use it again \nuntil you finish a short or long rest.\n\nv0.2 April 12 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\n// make sure the attempted hit was made with a weapon attack\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return;\n\nif (args[0].macroPass === \"preDamageRoll\") {\n    const pcActor = MidiQOL.MQfromActorUuid(args[0].actorUuid);\n    const target = await fromUuid(args[0].hitTargetUuids[0] ?? \"\");\n\n    // check to make sure only one target is selected\n    if ((args[0].targetUuids.length < 1) || (args[0].targetUuids.length > 1)) {\n        ui.notifications.error(\"You need to select a single target.\");\n        return;\n    }\n\n    // Find Superiority Dice Resource\n    let orcishFury = await findSheetResource(pcActor, \"Orcish Fury\");\n    if (!orcishFury) { \n        ui.notifications.error(\"Could not find a recource labeled 'Orcish Fury'...\"); \n        return;\n    } else if (orcishFury < 1) return;\n\n    // create a dialog and prompt to spend a superiority die\n    let dialog = new Promise((resolve) => {\n        new Dialog({\n            // localize this text\n            title: \"Orcish Fury:\",\n            content: \"<p>Use Orcish Fury for extra damage?</p>\",\n            buttons: {\n                one: {\n                    icon: '<p> </p><img src = \"systems/dnd5e/icons/skills/red_01.jpg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>Yes</p>\",\n                    callback: () => resolve(true)\n                },\n                two: {\n                    icon: '<p> </p><img src = \"systems/dnd5e/icons/skills/weapon_28.jpg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>No</p>\",\n                    callback: () => {resolve(false)}\n                }\n            },\n            default: \"two\"\n        }).render(true);\n    });\n    let choice = await dialog;\n\n    if (!choice) return;\n\n    // if YES subtract a superiorty die\n    await decrimentSheetResource (pcActor, \"Orcish Fury\", 1);\n\n    // get the live MIDI-QOL workflow so we can make changes\n    const diceMult = args[0].isCritical ? 2: 1;\n    let baseDice = (1 * diceMult);\n    let die = args[0].item.data.damage.parts[0][0].split('[')[0];   // everything before the [\n    die = die.toLowerCase();                                        // convert the string to lower case\n    let baseDie = die.split('d')[1];                                //everything after the 'd' the die size and any mods\n    let furyRoll = (baseDice+\"d\"+baseDie);                          // assemble the FuryRoll\n\n    const damageType = args[0].item.data.damage.parts[0][1];        // get teh damage type from the weapon in use   \n    \n    // roll the damage and add it to the workflow\n    let damageRoll = await new Roll(furyRoll).roll();\n    new MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, damageType, target ? [target] : [], damageRoll, {flavor: \"Orcish Fury\", itemCardId: args[0].itemCardId});\n    return; \n}\n\n//---------------------------------- MY FUNCTIONS -------------------------------------\n\n// Test for available resource\n// Return resource object\nasync function findSheetResource (testActor, resourceName) {\n    let resources = Object.values(testActor.data.data.resources);\n    let foundResource = resources.find(i => i.label.toLowerCase() === resourceName.toLowerCase());\n    return foundResource;\n}\n\n// Decriment available resource\nasync function decrimentSheetResource (testActor, resourceName, numValue) {\n    let actorDup = duplicate(testActor.data._source);\n    let resources = Object.values(actorDup.data.resources);\n    let foundResource = resources.find(i => i.label.toLowerCase() === resourceName.toLowerCase());\n    foundResource.value = foundResource.value - numValue;\n    await testActor.update(actorDup); \n    return;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.5PUe0GiheEHUomoR"},"exportSource":{"world":"test","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"cf":{"id":"temp_edvfne668p7","path":"Feats","color":"#0000ff"},"favtab":{"isFavorite":true}},"_id":"S0iU9BiFq4nUdKEY"}
{"name":"Piercer","type":"feat","img":"systems/dnd5e/icons/skills/arrow_01.jpg","data":{"description":{"value":"<div>\n<div>\n<p>You have achieved a penetrating precision in combat, granting you the following benefits:</p>\n<ul>\n<li>Once per turn, when you hit a creature with an attack that deals piercing damage, you can reroll one of the attack’s damage dice, and you must use the new roll.</li>\n<li>When you score a critical hit that deals piercing damage to a creature, you can roll one additional damage die when determining the extra piercing damage the target takes.</li>\n</ul>\n</div>\n</div>\n<div><br /><br /></div>\n<p> </p>","chat":"","unidentified":""},"source":"TCoE","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Feat: Piercer","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"5LsTTEo1APQ0w520","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Piercer,all","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/arrow_01.jpg","label":"Piercer","origin":"Item.Aj6rMauKBQFNOrub","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"59c6b42f8317c27b52af9158c193a24100b24f65","sourceId":"Item.LPlRoxAiHtniLltL"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Piercer","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nPiercer\n\nOnce per turn, when you hit a creature with an attack that deals piercing damage, \nyou can reroll one of the attack’s damage dice, and you must use the new roll.\n\nWhen you score a critical hit that deals piercing damage to a creature, you can \nroll one additional damage die when determining the extra piercing damage the target takes.\n\nv0.5 April 13 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\nif (args[0].macroPass === \"postDamageRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    const actorUuid = workflow.tokenUuid;\n    const actorToken = canvas.tokens.get(workflow.tokenId);\n    const thisItem = actorToken.actor.items.find(i=> i.name === \"Piercer\")?.data;\n\n    // make sure the attempted hit was made with a weapon attack\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return;\n    \n    // damage type must be \"piercing\"    \n    if (workflow.defaultDamageType != \"piercing\") return; \n    \n    // breakdown weapon damage to find the base die, if there was a critical, and the lowest die roll\n    let baseDie = null;\n    let lowestDieRoll = 0;\n    for (let i = 0; i < workflow.damageRoll.terms.length; i++) \n        if (workflow.damageRoll.terms[i]?.faces) {\n            baseDie = \"1d\" + workflow.damageRoll.terms[i].faces; \n            lowestDieRoll = workflow.damageRoll.terms[i].results[0].result;\n            for (let j = 0; j < workflow.damageRoll.terms[i].results.length; j++)\n                if (workflow.damageRoll.terms[i].results[j].result < lowestDieRoll) lowestDieRoll = workflow.damageRoll.terms[i].results[j].result;\n    }\n    \n    // create a dialog and prompt to re-roll lowest die\n    let dialog = new Promise((resolve) => {\n        new Dialog({\n            // localize this text\n            title: \"Piercer Feat:\",\n            content: `<p>would you like to re-roll your lowest damage die?</p><p>Lowest Die Roll: ${lowestDieRoll}</p>`,\n            buttons: {\n                one: {\n                    icon: '<p> </p><img src = \"systems/dnd5e/icons/skills/arrow_01.jpg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>Yes</p>\",\n                    callback: () => resolve(true)\n                },\n                two: {\n                    icon: '<p> </p><img src = \"icons/svg/cancel.svg\" width=\"60\" height=\"60\"></>',\n                    label: \"<p>No</p>\",\n                    callback: () => {resolve(false)}\n                }\n            },\n            default: \"two\"\n        }).render(true);\n    });\n    let choice = await dialog;\n\n    if (choice) await setProperty(workflow, \"ReplaceRoll\", choice);\n    await setProperty(workflow, \"LowestRoll\", lowestDieRoll);\n    await setProperty(workflow, \"BaseDie\", baseDie);\n\n    // trigger BonusDamage to apply the extra damage / adjustments outside of the normal damage roll\n    let effectData = {\n        label : \"Piercer reRoll\",\n        changes: [ {key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.Piercer`, priority: 20} ],\n        icon : thisItem.img,\n        origin: thisItem.uuid,\n        duration: {turns: 1}\n    };    \n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: actorUuid, effects: [effectData]});\n    return; \n\n} else if(args[0].tag === \"DamageBonus\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    const actorUuid = workflow.tokenUuid;\n    const actorToken = canvas.tokens.get(workflow.tokenId);\n    const thisItem = actorToken.actor.items.find(i=> i.name === \"Piercer\")?.data;\n    const targetToken = await fromUuid(args[0].hitTargetUuids[0] ?? \"\");\n    const targetActor = targetToken.actor;\n    let choice = await getProperty(workflow, \"ReplaceRoll\");\n    let lowestDieRoll = await getProperty(workflow, \"LowestRoll\");\n    let baseDie = await getProperty(workflow, \"BaseDie\");\n    let reRoll = null;\n\n    // remove extra damage effect \n    let effect = await findEffect(actorToken, \"Piercer reRoll\");\n    await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: actorUuid, effects:[effect.id]});\n\n    // test if critical is true, apply extra damage die\n    if (workflow?.isCritical) {\n        reRoll = await new Roll(baseDie).roll();\n        new MidiQOL.DamageOnlyWorkflow(targetActor, targetToken, reRoll.total, \"piercing\", [targetToken], reRoll, { flavor: \"Piercer Feat: Critical Extra Damage\", itemData: thisItem, itemCardId: \"new\" });\n    }\n    \n    // if reRoll was selected figure out the difference and apply adjustment to the target\n    if (choice) {\n        reRoll = await new Roll(baseDie).roll();\n        if (reRoll.result < lowestDieRoll) {\n            // healback difference\n            let difference = lowestDieRoll - reRoll.result;\n            return {damageRoll: `${difference}[healing]`, flavor: \"Piercer Feat: ReRoll Adjustment\"}\n        } else {\n            // damage difference\n            let difference = reRoll.result - lowestDieRoll;\n            return {damageRoll: `${difference}[piercing]`, flavor: \"Piercer Feat: ReRoll Adjustment\"}\n        }\n    }\n    return;\n}\n\n// Function to test for an effect\nasync function findEffect (target, effectName) {\n    let effectUuid = null;\n    effectUuid = target?.actor.data.effects.find(ef=> ef.data.label === effectName);\n    return effectUuid;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.5PUe0GiheEHUomoR"},"exportSource":{"world":"test","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"cf":{"id":"temp_edvfne668p7","path":"Feats","color":"#0000ff"},"favtab":{"isFavorite":true}},"_id":"yqGKNiFdDC2Vw8Ri"}
{"name":"Slasher","type":"feat","img":"systems/dnd5e/icons/skills/weapon_34.jpg","data":{"description":{"value":"<p> You’ve learned where to cut to have the greatest results, granting you the following benefits:</p>\n<ul>\n<li>Once per turn when you hit a creature with an attack that deals slashing damage, you can reduce the speed of the target by 10 feet until the start of your next turn.</li>\n<li>When you score a critical hit that deals slashing damage to a creature, you grievously wound it. Until the start of your next turn, the target has disadvantage on all attack rolls.</li>\n</ul>\n<p> </p>","chat":"","unidentified":""},"source":"TCoE","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Feat: Slasher","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"5LsTTEo1APQ0w520","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Slasher,preDamageRoll","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/skills/weapon_34.jpg","label":"Slasher","origin":"Item.Aj6rMauKBQFNOrub","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.onUseMacroName"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"03fc135b9b61cac404cd57f30823767864e1e2ec","sourceId":"Item.CQe7aJptcXa6qlv1"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Slasher","type":"script","author":"ldRsJ6Yp5qPydWA1","img":"icons/svg/dice-target.svg","scope":"global","command":"/*****\nSlasher\n\nOnce per turn when you hit a creature with an attack that deals slashing damage, \nyou can reduce the speed of the target by 10 feet until the start of your next turn.\n\nWhen you score a critical hit that deals slashing damage to a creature, \nyou grievously wound it. Until the start of your next turn, the target has \ndisadvantage on all attack rolls.\n\nv0.1 April 13 2022 jbowens #0415 (Discord) https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git \n*****/\n\n// make sure the attempted hit was made with a weapon attack\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return;\n\nif (args[0].macroPass === \"preDamageRoll\") {\n    const workflow = MidiQOL.Workflow.getWorkflow(args[0].itemUuid);\n    let targetToken = await fromUuid(args[0].hitTargetUuids[0]);\n    let targetActor = targetToken.actor;\n    let theItem = workflow.item.data.data;\n\n    if (theItem.damage.parts[0][1] !== \"slashing\") return;   // not a slashing weapon  \n        else {\n            let effect = await findEffect(targetActor, \"Reduced Movement\");\n            if (!effect) await applyReduceMovementEffect(targetActor, args[0].uuid);\n            if (workflow.isCritical) await applyAttackDisadvantageEffect(targetActor, args[0].uuid);\n        }\n    return; \n}\n\n// Apply the fightened effect to the target\nasync function applyReduceMovementEffect(target, originUuid) {\n    let effectData = {\n        label : \"Reduced Movement\",\n        icon : \"systems/dnd5e/icons/items/equipment/boots-leather.jpg\",\n        origin: originUuid,\n        changes: [ { \"key\": \"data.attributes.movement.all\", \"value\": `-10`, \"mode\":0, \"priority\": 20 } ],\n        disabled: false,\n        flags: { dae: {specialDuration: [\"turnStartSource\"]}, }\n       }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n}\n\n// Apply the fightened effect to the target\nasync function applyAttackDisadvantageEffect(target, originUuid) {\n    let effectData = {\n        label : \"Attack Disadvantage\",\n        icon : \"systems/dnd5e/icons/skills/weapon_08.jpg\",\n        origin: originUuid,\n        changes: [ { \"key\": \"flags.midi-qol.disadvantage.attack.all\", \"value\": `1`, \"mode\": 0, \"priority\": 20 } ],\n        disabled: false,\n        flags: { dae: {specialDuration: [\"turnStartSource\"]}, }\n       }\n    await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: target.uuid, effects: [effectData]});\n}\n\n// Function to test for an effect\nasync function findEffect (thisActor, effectName) {\n    let effectUuid = null;\n    effectUuid = thisActor?.effects.find(ef=> ef.data.label === effectName);\n    return effectUuid;        \n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.5PUe0GiheEHUomoR"},"exportSource":{"world":"test","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"cf":{"id":"temp_edvfne668p7","path":"Feats","color":"#0000ff"},"favtab":{"isFavorite":true}},"_id":"4usZZ4Hchwq25eS8"}
{"name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"cf":{"id":"temp_edvfne668p7","path":"Feats","color":"#0000ff","name":"Feats","children":[null,null,null,null,null,null,null,null],"folderPath":[]},"scene-packer":{"hash":"2f99aeb3e7af26d6a62dd85c6513be3c31993c40"}},"_id":"3p2TWLRZ1SI7tYj9"}
{"name":"Help Action","type":"feat","img":"systems/dnd5e/icons/skills/yellow_08.jpg","data":{"description":{"value":"<p data-content-chunk-id=\"9f050c08-2500-4201-b53b-ae6c8a05642b\">You can lend your aid to another creature in the completion of a task. When you take the Help action, the creature you aid gains advantage on the next ability check it makes to perform the task you are helping with, provided that it makes the check before the start of your next turn.</p>\n<p data-content-chunk-id=\"3b4fbc15-b308-4703-b2fd-7c41f9ad2564\">Alternatively, you can aid a friendly creature in attacking a creature within 5 feet of you. You feint, distract the target, or in some other way team up to make your ally's attack more effective. If your ally attacks the target before your next turn, the first attack roll is made with advantage.</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.2 April 2 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"PHB p192","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Basic Rules","recharge":{"value":null,"charged":false},"attunement":null},"effects":[{"_id":"ioxb7mkofb3lhcvi","changes":[{"key":"flags.midi-qol.grants.advantage.attack.all","mode":5,"value":"1","priority":"20"},{"key":"flags.midi-qol.advantage.all","mode":5,"value":"1","priority":"20"}],"disabled":false,"duration":{"startTime":null,"rounds":1},"icon":"systems/dnd5e/icons/skills/yellow_08.jpg","label":"Help Action","origin":"Actor.4okcHmPmM1iBwyFs.Item.smt73dN8B1zU5F8r","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["isAttacked"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":["flags.midi-qol.grants.advantage.attack.all","flags.midi-qol.advantage.all"]}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"scene-packer":{"hash":"6c38aedf87e7a990fde488d39fae6e011f8d4ea3","sourceId":"Item.hZSZQZTbdslOz2zV"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.ii0ZfozCkVZ5vtpD"},"cf":{"id":"temp_0uietto2erof","path":"Other","color":"#0000ff"}},"_id":"E1rSmb0r525i4VDP"}
{"name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"cf":{"id":"temp_0uietto2erof","path":"Other","color":"#0000ff","name":"Other","children":[null],"folderPath":[]},"scene-packer":{"hash":"98c1ab3a4bfaeb660f736e6748fc5b8b4564e5aa"}},"_id":"qKZmXDsWwHegtLhP"}
{"name":"Vitriolic Sphere","type":"spell","img":"systems/dnd5e/icons/spells/fireball-acid-2.jpg","data":{"description":{"value":"<p class=\"Core-Styles_Core-Body\">You point at a location within range, and a glowing, 1-foot-diameter ball of emerald acid streaks there and explodes in a 20-foot-radius sphere. Each creature in that area must make a Dexterity saving throw. On a failed save, a creature takes 10d4 acid damage and another 5d4 acid damage at the end of its next turn. On a successful save, a creature takes half the initial damage and no damage at the end of its next turn.</p>\n<p class=\"Core-Styles_Core-Body\"><span class=\"Serif-Character-Style_Inline-Subhead-Serif\"><strong>At Higher Levels.</strong> </span>When you cast this spell using a spell slot of 5th level or higher, the initial damage increases by 2d4 for each slot level above 4th.</p>\n<p> </p>\n<details>\n<summary><strong>VERSION INFO</strong></summary>\n<p>v0.2 April 1 2022</p>\n<p>jbowens #0415 (Discord)</p>\n<p>https://github.com/jbowensii/More-Automated-Spells-Items-and-Feats.git</p>\n</details>","chat":"","unidentified":""},"source":"EEPC p170","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":20,"width":null,"units":"ft","type":"sphere"},"range":{"value":150,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["10d4[acid]","acid"],["5d4[acid - At the end of target's next turn]","acid"]],"versatile":""},"formula":"","save":{"ability":"dex","dc":null,"scaling":"spell"},"level":4,"school":"evo","components":{"value":"a drop of giant slug bile","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"a drop of giant slug bile","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""},"attunement":null},"effects":[{"_id":"6dg1MEvF5oFZDngu","changes":[{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=start,\ndamageBeforeSave=true,\nlabel=Vitrolic Sphere,\ndamageRoll=5d4,\ndamageType=acid,\nsaveDC=none","priority":"20"}],"disabled":false,"duration":{"startTime":null},"icon":"systems/dnd5e/icons/spells/fireball-acid-2.jpg","label":"Vitriolic Sphere","origin":"Item.JLed3LoQblm59nP7","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnEnd"],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null,"selectedKey":"flags.midi-qol.OverTime"}],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"ddbimporter":{"id":138279,"definitionId":2404,"entityTypeId":435869154,"dndbeyond":{"lookup":"generic","lookupName":"generic","level":null,"castAtLevel":null},"originalName":"Vitriolic Sphere","sources":[{"sourceId":4,"pageNumber":170,"sourceType":1}],"tags":["Damage"],"version":"2.9.8","effectsApplied":true},"core":{"sourceId":"Compendium.world.ddb-spells.nni9kMIH2znfjZsn"},"scene-packer":{"hash":"208f40f78c839e17b531497a6d0bdeb54e388d2c","sourceId":"Item.F5d5s0i3dri06GPN"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"cf":{"id":"temp_ceulh3ajedr","path":"Spells","color":"#0000ff"}},"_id":"CzvHMJwCrbaBDkKh"}
{"name":"#[CF_tempEntity]","type":"weapon","img":"icons/svg/item-bag.svg","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"ldRsJ6Yp5qPydWA1":3},"flags":{"cf":{"id":"temp_ceulh3ajedr","path":"Spells","color":"#0000ff","name":"Spells","children":[null],"folderPath":[]},"scene-packer":{"hash":"dfdb3887f23ecc8299ab756ee542256727379989"}},"_id":"rXFJqIznpEhTLJAp"}
